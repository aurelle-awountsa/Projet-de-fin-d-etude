{"version":3,"sources":["webpack:///src/app/core/services/booking.service.ts","webpack:///node_modules/@fullcalendar/daygrid/main.js","webpack:///node_modules/@fullcalendar/timegrid/main.js","webpack:///node_modules/@fullcalendar/interaction/main.js"],"names":["headers","set","BookingService","_http","token","localStorage","getItem","httpAuthHeaders","get","booking","post","providedIn","global","factory","exports","core","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","DayGridDateProfileGenerator","_super","buildRenderRange","currentRange","currentRangeUnit","isRangeAllDay","dateEnv","renderRange","start","end","endOfWeek","test","startOfWeek","valueOf","addWeeks","options","monthMode","fixedWeekCount","rowCnt","Math","ceil","diffWeeks","DateProfileGenerator","Popover","_this","isHidden","margin","documentMousedown","ev","el","contains","target","hide","show","render","style","display","position","trigger","createElement","className","top","left","content","parentEl","appendChild","listenBySelector","autoHide","document","addEventListener","destroy","removeElement","removeEventListener","elDims","getBoundingClientRect","origin","computeRect","offsetParent","clippingRect","computeClippingRect","undefined","right","width","min","bottom","height","max","applyStyle","name","slice","SimpleDayGridEventRenderer","renderSegHtml","seg","mirrorInfo","context","eventRange","eventDef","def","eventUi","ui","allDay","isDraggable","startEditable","isResizableFromStart","isStart","durationEditable","eventResizableFromStart","isResizableFromEnd","isEnd","classes","getSegClasses","skinCss","cssToStr","getSkinCss","timeHtml","timeText","titleHtml","unshift","getTimeText","htmlEscape","title","join","url","dir","computeEventTimeFormat","hour","minute","omitZeroMinute","meridiem","computeDisplayEventEnd","FgEventRenderer","DayGridEventRenderer","dayGrid","attachSegs","segs","rowStructs","renderSegRows","rowEls","forEach","rowNode","querySelector","tbodyEl","removeSegPopover","detachSegs","rowStruct","pop","segRows","row","groupSegRows","push","renderSegRow","rowSegs","colCnt","isRtl","segLevels","buildSegLevels","levelCnt","tbody","segMatrix","cellMatrix","loneCellMatrix","levelSegs","col","tr","j","td","emptyCellsUntil","endCol","rowSpan","leftCol","lastCol","firstCol","rightCol","colSpan","introHtml","renderProps","renderIntroHtml","appendToElement","prependToElement","_a","levels","sortEventSegs","isDaySegCollision","level","sort","compareDaySegCols","otherSegs","otherSeg","a","DayGridMirrorRenderer","sourceSeg","skeletonEl","htmlToElement","skeletonTopEl","skeletonTop","DayGridFillRenderer","fillSegTag","renderSegs","type","filter","els","renderFillRow","startCol","trEl","toLowerCase","getElementsByTagName","FillRenderer","DayTile","eventRenderer","DayTileEventRenderer","renderFrame","memoizeRendering","_renderFrame","renderFgEvents","bind","unrender","renderEventSelection","selectByInstanceId","unselectByInstanceId","renderEventDrag","hideByHash","showByHash","renderEventResize","calendar","registerInteractiveComponent","useEventCenter","props","date","fgSegs","eventSelection","eventDragInstances","eventResizeInstances","unregisterInteractiveComponent","theme","format","createFormatter","opt","innerHTML","getClass","getIconClass","segContainerEl","queryHit","positionLeft","positionTop","elWidth","elHeight","component","dateSpan","range","addDays","dayEl","rect","layer","DateComponent","dayTile","_i","segs_1","segs_2","DayBgRow","renderHtml","parts","cells","cell","renderCellHtml","dateProfile","htmlAttrs","reverse","otherAttrs","isDateValid","rangeContainsMarker","activeRange","getDayClasses","formatIso","omitTime","DAY_NUM_FORMAT","day","WEEK_NUM_FORMAT","week","DayGrid","bottomCoordPadding","isCellSizesDirty","fillRenderer","mirrorRenderer","renderCells","_renderCells","_unrenderCells","renderBusinessHours","renderDateSelection","renderBgEvents","_renderEventDrag","_unrenderEventDrag","_renderEventResize","_unrenderEventResize","isRigid","businessHourSegs","dateSelectionSegs","bgEventSegs","fgEventSegs","eventDrag","eventResize","segPopoverTile","updateSegPopoverTile","getCellRange","ownProps","receiveProps","affectedInstances","view","_b","html","renderDayRowHtml","findElements","cellEls","rowPositions","PositionCache","colPositions","publiclyTrigger","toDate","getCellEl","bgRow","renderBgIntroHtml","getIsNumbersVisible","renderNumberTrHtml","getIsDayNumbersVisible","cellWeekNumbersVisible","colWeekNumbersVisible","intro","renderNumberIntroHtml","renderNumberCellsHtml","htmls","renderNumberCellHtml","isDayNumberVisible","weekCalcFirstDow","weekDow","getUTCDay","buildGotoAnchorHtml","updateSize","isResize","isEventsUpdated","buildPositionCaches","computeSizes","assignSizes","buildColPositions","buildRowPositions","build","bottoms","positionToHit","leftPosition","topPosition","leftToIndex","topToIndex","relativeRect","lefts","rights","tops","state","isResizing","segPopover","limitRows","levelLimit","rowLevelLimit","unlimitRow","computeRowLevelLimit","limitRow","rowEl","rowBottom","trEls","findChildren","classList","remove","moreNodes","limitedNodes","segsBelow","totalSegsBelow","colSegsBelow","segMoreNodes","moreTd","moreWrap","moreLink","getCellSegs","renderMoreLink","node","add","concat","insertAfterElement","moreEls","limitedEls","limitedEl","hiddenSegs","innerText","getMoreLinkText","clickOption","_col","moreEl","currentTarget","allSegs","reslicedAllSegs","resliceDaySegs","reslicedHiddenSegs","jsEvent","showSegPopover","zoomTo","parentNode","topEl","releaseAfterSizingTriggers","dayDate","dayStart","dayEnd","dayRange","newSegs","origRange","slicedRange","intersectRanges","instance","num","startLevel","WEEK_NUM_FORMAT$1","DayGridView","viewSpec","dateProfileGenerator","renderHeadIntroHtml","weekNumberStyleAttr","renderDayGridNumberIntroHtml","weekStart","forceOff","renderDayGridBgIntroHtml","renderDayGridIntroHtml","renderSkeletonHtml","scroller","ScrollComponent","dayGridContainerEl","dayGridEl","weekNumberWidth","hasRigidRows","eventLimit","viewHeight","isAuto","updateBaseSize","headRowEl","header","scrollerHeight","scrollbarWidths","computeScrollerHeight","setHeight","matchCellWidths","clear","uncompensateScroll","setGridHeight","getScrollbarWidths","compensateScroll","lockOverflow","subtractInnerElHeight","distributeHeight","undistributeHeight","computeDateScroll","timeMs","queryDateScroll","getScrollTop","applyDateScroll","scroll","setScrollTop","View","dateProfileGeneratorClass","SimpleDayGrid","slicer","DayGridSlicer","dayTable","sliceProps","nextDayThreshold","rawHit","sliceRange","dateRange","Slicer","DayGridView$1","_context","buildDayTable","memoize","DayHeader","simpleDayGrid","dates","headerDates","datesRepDistinctDays","businessHours","dateSelection","eventStore","eventUiBases","daySeries","DaySeries","DayTable","main","createPlugin","defaultView","views","dayGridDay","duration","days","dayGridWeek","weeks","dayGridMonth","months","AbstractDayGridView","buildBasicDayTable","defineProperty","value","daygrid","TimeGridEventRenderer","timeGrid","fullTimeFormat","separator","defaultRangeSeparator","segsByCol","groupSegsByCol","attachSegsByCol","fgContainerEls","computeSegSizes","computeSegVerticals","computeSegHorizontals","assignSegSizes","assignSegVerticals","assignSegCss","fullTimeText","startTimeText","isMultiDayRange","unzonedStart","unzonedEnd","_getTimeText","level0","buildSlotSegLevels","computeForwardSlotSegs","computeSlotSegPressures","computeSegForwardBack","seriesBackwardPressure","seriesBackwardCoord","forwardSegs","forwardCoord","sortForwardSegs","backwardCoord","objs","map","buildTimeGridSegCompareObj","specs","field","order","eventOrderSpecs","obj0","obj1","compareByFieldSpecs","c","_seg","generateSegCss","shouldOverlap","slotEventOverlap","generateSegVerticalCss","zIndex","forwardPressure","computeSlotSegCollisions","k","forwardSeg","results","isSlotSegCollision","seg1","seg2","obj","buildSegCompareObj","TimeGridMirrorRenderer","mirrorContainerEls","sourceSegProps","marginLeft","marginRight","TimeGridFillRenderer","containerEls","bgContainerEls","businessContainerEls","highlightContainerEls","AGENDA_STOCK_SUB_DURATIONS","hours","minutes","seconds","TimeGrid","isSlatSizesDirty","isColSizesDirty","renderSlats","_renderSlats","renderColumns","_renderColumns","_unrenderColumns","_renderDateSelection","_unrenderDateSelection","processOptions","rootBgContainerEl","slatContainerEl","bottomRuleEl","slotDuration","snapDuration","snapsPerSlot","input","createDuration","wholeDivideDurations","isArray","labelFormat","labelInterval","computeLabelInterval","slotsPerLabel","buildSlatPositions","renderSlatRowHtml","slatEls","slatPositions","startOfDay","slotTime","minTime","slotIterator","slotDate","isLabeled","axisHtml","asRoughMs","maxTime","formatIsoTimeString","addDurations","colEls","renderContentSkeleton","unrenderContentSkeleton","contentSkeletonEl","colContainerEls","getNowIndicatorUnit","renderNowIndicator","computeDateTop","nodes","lineEl","arrowEl","nowIndicatorEls","unrenderNowIndicator","getTotalSlatHeight","offsetHeight","when","startOfDayDate","computeTimeTop","len","slatCoverage","slatIndex","slatRemainder","floor","getHeight","eventMinHeight","colIndex","slatTop","slatHeight","partial","localSnapIndex","snapIndex","time","multiplyDuration","isEvent","isDragging","isSelecting","AllDaySplitter","getKeyInfo","timed","getKeysForDateSpan","getKeysForEventDef","hasBgRendering","Splitter","TIMEGRID_ALL_DAY_EVENT_LIMIT","WEEK_HEADER_FORMAT","TimeGridView","splitter","dayCnt","diffDays","weekText","axisStyleAttr","renderTimeGridBgIntroHtml","renderTimeGridIntroHtml","getAllDayHtml","timeGridWrapEl","timeGridEl","axisWidth","noScrollRowEls","usesMinMaxTime","SimpleTimeGrid","buildDayRanges","TimeGridSlicer","dayRanges","sliceNowDate","ranges","segRange","TimeGridView$1","simpleTimeGrid","splitProps","allDaySlot","timeGridDay","timeGridWeek","AbstractTimeGridView","config","touchMouseIgnoreWait","ignoreMouseDepth","listenerCnt","isWindowTouchMoveCancelled","PointerDragging","containerEl","subjectEl","downEl","selector","handleSelector","shouldIgnoreMove","shouldWatchScroll","isTouchDragging","wasTouchScroll","handleMouseDown","shouldIgnoreMouse","isPrimaryMouseButton","tryStart","pev","createEventFromMouse","emitter","initScrollWatch","handleMouseMove","handleMouseUp","recordCoords","cleanup","handleTouchStart","createEventFromTouch","handleTouchMove","handleTouchEnd","window","handleTouchScroll","startIgnoringMouse","handleScroll","pageX","pageXOffset","prevScrollX","prevPageX","pageY","pageYOffset","prevScrollY","prevPageY","origEvent","isTouch","deltaX","origPageX","deltaY","origPageY","EmitterMixin","passive","listenerCreated","listenerDestroyed","querySubjectEl","elementClosest","destroyScrollWatch","cancelTouchScroll","isFirst","touches","button","ctrlKey","setTimeout","onWindowTouchMove","preventDefault","ElementMirror","isVisible","sourceEl","mirrorEl","sourceElRect","body","revertDuration","origScreenX","origScreenY","updateElPosition","handleMove","setIsVisible","bool","stop","needsRevertAnimation","callback","done","doRevertAnimation","finalSourceElRect","transition","whenTransitionDone","getMirrorEl","cloneNode","visibility","boxSizing","ScrollGeomCache","scrollController","doesListening","scrollTop","scrollLeft","getScrollLeft","handleScrollChange","origScrollTop","origScrollLeft","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","clientWidth","getClientWidth","clientHeight","getClientHeight","clientRect","computeClientRect","getEventTarget","getMaxScrollTop","setScrollLeft","getMaxScrollLeft","ScrollController","ElementScrollGeomCache","ElementScrollController","computeInnerRect","WindowScrollGeomCache","WindowScrollController","getTime","performance","now","Date","AutoScroller","isEnabled","scrollQuery","edgeThreshold","maxVelocity","pointerScreenX","pointerScreenY","isAnimating","scrollCaches","everMovedUp","everMovedDown","everMovedLeft","everMovedRight","animate","edge","computeBestEdge","handleSide","msSinceRequest","requestAnimation","buildCaches","yDelta","xDelta","scrollCache","requestAnimationFrame","invDistance","distance","velocity","sign","bestSide","leftDist","rightDist","topDist","bottomDist","canScrollUp","canScrollDown","canScrollLeft","canScrollRight","queryScrollEls","query","querySelectorAll","FeaturefulElementDragging","delay","minDistance","touchScrollAllowed","mirrorNeedsRevert","isInteracting","isDelayEnded","isDistanceSurpassed","delayTimeoutId","onPointerDown","preventSelection","preventContextMenu","pointer","mirror","startDelay","handleDistanceSurpassed","onPointerMove","distanceSq","autoScroller","onPointerUp","allowSelection","allowContextMenu","tryStopDrag","clearTimeout","on","handleDelayEnd","tryStartDrag","stopDrag","setIgnoreMove","setMirrorIsVisible","setMirrorNeedsRevert","setAutoScrollEnabled","ElementDragging","OffsetTracker","origRect","getClippingParents","computeLeft","computeTop","isWithinClipping","point","isIgnoredClipping","pointInsideRect","tagName","HitDragging","dragging","droppableStore","useSubjectCenter","requireInitial","initialHit","movingHit","finalHit","handlePointerDown","prepareHits","processFirstCoord","handleDragStart","handleDragMove","handlePointerUp","releaseHits","handleDragEnd","origPoint","adjustedPoint","subjectRect","constrainPoint","queryHitForOffset","slicedSubjectRect","intersectRects","getRectCenter","coordAdjust","diffPoints","forceHandle","hit","isHitsEqual","offsetTrackers","mapHash","interactionSettings","id","offsetLeft","offsetTop","bestHit","offsetTracker","originLeft","originTop","rangeContainsRange","hit0","hit1","Boolean","isDateSpansEqual","DateClicking","settings","isValidDateDownEl","hitDragging","triggerDateClick","interactionSettingsToStore","Interaction","DateSelecting","dragSelection","canSelect","getComponentTouchDelay","unselect","handleHitUpdate","isFinal","isInvalid","joinHitsIntoSelection","pluginSystem","hooks","dateSelectionTransformers","isDateSelectionValid","dispatch","selection","enableCursor","disableCursor","triggerDateSelect","dateSpan0","dateSpan1","ms","compareNumbers","dateSelectionTransformers_1","transformer","res","EventDragging","subjectSeg","relevantEvents","receivingCalendar","validMutation","mutatedRelevantEvents","origTarget","initialCalendar","getElSeg","eventInstanceId","instanceId","getRelevantEvents","getComponentTouchDelay$1","isValid","isValidSegDownEl","event","EventApi","mutation","interaction","affectedEvents","mutatedEvents","createEmptyEventStore","origSeg","receivingComponent","computeEventMutation","eventDragMutationMassagers","applyMutationToEventStore","isInteractionValid","displayDrag","initialCalendar_1","initialView","eventInstance","eventApi","relevantEvents_1","clearDrag","eventDropArg","eventDropTransformers","delta","startDelta","oldEvent","defs","defId","instances","revert","draggedEl","dropArg","buildDatePointApi","SELECTOR","interactionSettingsStore","nextCalendar","prevCalendar","massagers","date0","date1","standardProps","hasEnd","diffDates","largeUnit","milliseconds","endDelta","massagers_1","massager","EventDragging$1","draggingSeg","querySeg","computeMutation","eventResizeJoinTransforms","prevEvent","fgSegSelector","isFromStart","instanceRange","transforms","transforms_1","transform","UnselectAuto","isRecentPointerDateSelect","onSelect","selectInfo","onDocumentPointerUp","documentPointer","unselectAuto","viewOpt","unselectCancel","off","ExternalElementDragging","suppliedDragMeta","droppableEvent","dragMeta","buildDragMeta","canDropElOnCalendar","computeEventForDateSpan","eventTupleToStore","finalView","arg","parseDragMeta","getDragMetaFromEl","dropAccept","elementMatches","defProps","leftoverProps","externalDefTransforms","parseEventDef","sourceId","startTime","getDefaultEventEnd","createEventInstance","str","getEmbeddedElData","JSON","parse","dataAttrPrefix","prefix","prefixedName","getAttribute","ExternalDraggable","longPressDelay","globalDefaults","eventDragMinDistance","itemSelector","appendTo","eventData","InferredElementDragging","mirrorSelector","currentMirrorEl","handlePointerMove","ThirdPartyDraggable","containerOrSettings","Element","componentInteractions","calendarInteractions","elementDraggingImpl","Draggable"],"mappings":"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","file":"default~admin-admin-module~features-features-module-es5.js","sourcesContent":["import {Injectable} from '@angular/core';\nimport {HttpClient, HttpHeaders} from \"@angular/common/http\";\n\nconst headers = new HttpHeaders().set('Content-Type', 'application/json; charset=utf-8');\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class BookingService {\n\n  token: string = localStorage.getItem('id_token');\n\n  constructor(private readonly _http: HttpClient) {\n  }\n\n  getAllBookings() {\n    const httpAuthHeaders = new HttpHeaders().set('Authorization', this.token);\n    return this._http.get('/server/api/bookings/all', {headers: httpAuthHeaders});\n  }\n\n  getTeacherBookings() {\n    const httpAuthHeaders = new HttpHeaders().set('Authorization', this.token);\n    return this._http.get('/server/api/teacher/bookings', {headers: httpAuthHeaders});\n  }\n\n  addUserBooking(booking) {\n    const httpAuthHeaders = new HttpHeaders().set('Authorization', this.token);\n    return this._http.post('/server/api/user/booking', booking, {headers: httpAuthHeaders});\n  }\n\n  addTeacherBooking(booking) {\n    const httpAuthHeaders = new HttpHeaders().set('Authorization', this.token);\n    return this._http.post('/server/api/teacher/booking', booking, {headers: httpAuthHeaders});\n  }\n\n}\n","/*!\nFullCalendar Day Grid Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) :\n    (global = global || self, factory(global.FullCalendarDayGrid = {}, global.FullCalendar));\n}(this, function (exports, core) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    var DayGridDateProfileGenerator = /** @class */ (function (_super) {\n        __extends(DayGridDateProfileGenerator, _super);\n        function DayGridDateProfileGenerator() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Computes the date range that will be rendered.\n        DayGridDateProfileGenerator.prototype.buildRenderRange = function (currentRange, currentRangeUnit, isRangeAllDay) {\n            var dateEnv = this.dateEnv;\n            var renderRange = _super.prototype.buildRenderRange.call(this, currentRange, currentRangeUnit, isRangeAllDay);\n            var start = renderRange.start;\n            var end = renderRange.end;\n            var endOfWeek;\n            // year and month views should be aligned with weeks. this is already done for week\n            if (/^(year|month)$/.test(currentRangeUnit)) {\n                start = dateEnv.startOfWeek(start);\n                // make end-of-week if not already\n                endOfWeek = dateEnv.startOfWeek(end);\n                if (endOfWeek.valueOf() !== end.valueOf()) {\n                    end = core.addWeeks(endOfWeek, 1);\n                }\n            }\n            // ensure 6 weeks\n            if (this.options.monthMode &&\n                this.options.fixedWeekCount) {\n                var rowCnt = Math.ceil(// could be partial weeks due to hiddenDays\n                core.diffWeeks(start, end));\n                end = core.addWeeks(end, 6 - rowCnt);\n            }\n            return { start: start, end: end };\n        };\n        return DayGridDateProfileGenerator;\n    }(core.DateProfileGenerator));\n\n    /* A rectangular panel that is absolutely positioned over other content\n    ------------------------------------------------------------------------------------------------------------------------\n    Options:\n      - className (string)\n      - content (HTML string, element, or element array)\n      - parentEl\n      - top\n      - left\n      - right (the x coord of where the right edge should be. not a \"CSS\" right)\n      - autoHide (boolean)\n      - show (callback)\n      - hide (callback)\n    */\n    var Popover = /** @class */ (function () {\n        function Popover(options) {\n            var _this = this;\n            this.isHidden = true;\n            this.margin = 10; // the space required between the popover and the edges of the scroll container\n            // Triggered when the user clicks *anywhere* in the document, for the autoHide feature\n            this.documentMousedown = function (ev) {\n                // only hide the popover if the click happened outside the popover\n                if (_this.el && !_this.el.contains(ev.target)) {\n                    _this.hide();\n                }\n            };\n            this.options = options;\n        }\n        // Shows the popover on the specified position. Renders it if not already\n        Popover.prototype.show = function () {\n            if (this.isHidden) {\n                if (!this.el) {\n                    this.render();\n                }\n                this.el.style.display = '';\n                this.position();\n                this.isHidden = false;\n                this.trigger('show');\n            }\n        };\n        // Hides the popover, through CSS, but does not remove it from the DOM\n        Popover.prototype.hide = function () {\n            if (!this.isHidden) {\n                this.el.style.display = 'none';\n                this.isHidden = true;\n                this.trigger('hide');\n            }\n        };\n        // Creates `this.el` and renders content inside of it\n        Popover.prototype.render = function () {\n            var _this = this;\n            var options = this.options;\n            var el = this.el = core.createElement('div', {\n                className: 'fc-popover ' + (options.className || ''),\n                style: {\n                    top: '0',\n                    left: '0'\n                }\n            });\n            if (typeof options.content === 'function') {\n                options.content(el);\n            }\n            options.parentEl.appendChild(el);\n            // when a click happens on anything inside with a 'fc-close' className, hide the popover\n            core.listenBySelector(el, 'click', '.fc-close', function (ev) {\n                _this.hide();\n            });\n            if (options.autoHide) {\n                document.addEventListener('mousedown', this.documentMousedown);\n            }\n        };\n        // Hides and unregisters any handlers\n        Popover.prototype.destroy = function () {\n            this.hide();\n            if (this.el) {\n                core.removeElement(this.el);\n                this.el = null;\n            }\n            document.removeEventListener('mousedown', this.documentMousedown);\n        };\n        // Positions the popover optimally, using the top/left/right options\n        Popover.prototype.position = function () {\n            var options = this.options;\n            var el = this.el;\n            var elDims = el.getBoundingClientRect(); // only used for width,height\n            var origin = core.computeRect(el.offsetParent);\n            var clippingRect = core.computeClippingRect(options.parentEl);\n            var top; // the \"position\" (not \"offset\") values for the popover\n            var left; //\n            // compute top and left\n            top = options.top || 0;\n            if (options.left !== undefined) {\n                left = options.left;\n            }\n            else if (options.right !== undefined) {\n                left = options.right - elDims.width; // derive the left value from the right value\n            }\n            else {\n                left = 0;\n            }\n            // constrain to the view port. if constrained by two edges, give precedence to top/left\n            top = Math.min(top, clippingRect.bottom - elDims.height - this.margin);\n            top = Math.max(top, clippingRect.top + this.margin);\n            left = Math.min(left, clippingRect.right - elDims.width - this.margin);\n            left = Math.max(left, clippingRect.left + this.margin);\n            core.applyStyle(el, {\n                top: top - origin.top,\n                left: left - origin.left\n            });\n        };\n        // Triggers a callback. Calls a function in the option hash of the same name.\n        // Arguments beyond the first `name` are forwarded on.\n        // TODO: better code reuse for this. Repeat code\n        // can kill this???\n        Popover.prototype.trigger = function (name) {\n            if (this.options[name]) {\n                this.options[name].apply(this, Array.prototype.slice.call(arguments, 1));\n            }\n        };\n        return Popover;\n    }());\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // \"Simple\" is bad a name. has nothing to do with SimpleDayGrid\n    var SimpleDayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(SimpleDayGridEventRenderer, _super);\n        function SimpleDayGridEventRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        // Builds the HTML to be used for the default element for an individual segment\n        SimpleDayGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n            var options = this.context.options;\n            var eventRange = seg.eventRange;\n            var eventDef = eventRange.def;\n            var eventUi = eventRange.ui;\n            var allDay = eventDef.allDay;\n            var isDraggable = eventUi.startEditable;\n            var isResizableFromStart = allDay && seg.isStart && eventUi.durationEditable && options.eventResizableFromStart;\n            var isResizableFromEnd = allDay && seg.isEnd && eventUi.durationEditable;\n            var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n            var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n            var timeHtml = '';\n            var timeText;\n            var titleHtml;\n            classes.unshift('fc-day-grid-event', 'fc-h-event');\n            // Only display a timed events time if it is the starting segment\n            if (seg.isStart) {\n                timeText = this.getTimeText(eventRange);\n                if (timeText) {\n                    timeHtml = '<span class=\"fc-time\">' + core.htmlEscape(timeText) + '</span>';\n                }\n            }\n            titleHtml =\n                '<span class=\"fc-title\">' +\n                    (core.htmlEscape(eventDef.title || '') || '&nbsp;') + // we always want one line of height\n                    '</span>';\n            return '<a class=\"' + classes.join(' ') + '\"' +\n                (eventDef.url ?\n                    ' href=\"' + core.htmlEscape(eventDef.url) + '\"' :\n                    '') +\n                (skinCss ?\n                    ' style=\"' + skinCss + '\"' :\n                    '') +\n                '>' +\n                '<div class=\"fc-content\">' +\n                (options.dir === 'rtl' ?\n                    titleHtml + ' ' + timeHtml : // put a natural space in between\n                    timeHtml + ' ' + titleHtml //\n                ) +\n                '</div>' +\n                (isResizableFromStart ?\n                    '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                    '') +\n                (isResizableFromEnd ?\n                    '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                    '') +\n                '</a>';\n        };\n        // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n        SimpleDayGridEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'narrow'\n            };\n        };\n        SimpleDayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return false; // TODO: somehow consider the originating DayGrid's column count\n        };\n        return SimpleDayGridEventRenderer;\n    }(core.FgEventRenderer));\n\n    /* Event-rendering methods for the DayGrid class\n    ----------------------------------------------------------------------------------------------------------------------*/\n    var DayGridEventRenderer = /** @class */ (function (_super) {\n        __extends(DayGridEventRenderer, _super);\n        function DayGridEventRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        // Renders the given foreground event segments onto the grid\n        DayGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // append to each row's content skeleton\n            this.dayGrid.rowEls.forEach(function (rowNode, i) {\n                rowNode.querySelector('.fc-content-skeleton > table').appendChild(rowStructs[i].tbodyEl);\n            });\n            // removes the \"more..\" events popover\n            if (!mirrorInfo) {\n                this.dayGrid.removeSegPopover();\n            }\n        };\n        // Unrenders all currently rendered foreground event segments\n        DayGridEventRenderer.prototype.detachSegs = function () {\n            var rowStructs = this.rowStructs || [];\n            var rowStruct;\n            while ((rowStruct = rowStructs.pop())) {\n                core.removeElement(rowStruct.tbodyEl);\n            }\n            this.rowStructs = null;\n        };\n        // Uses the given events array to generate <tbody> elements that should be appended to each row's content skeleton.\n        // Returns an array of rowStruct objects (see the bottom of `renderSegRow`).\n        // PRECONDITION: each segment shoud already have a rendered and assigned `.el`\n        DayGridEventRenderer.prototype.renderSegRows = function (segs) {\n            var rowStructs = [];\n            var segRows;\n            var row;\n            segRows = this.groupSegRows(segs); // group into nested arrays\n            // iterate each row of segment groupings\n            for (row = 0; row < segRows.length; row++) {\n                rowStructs.push(this.renderSegRow(row, segRows[row]));\n            }\n            return rowStructs;\n        };\n        // Given a row # and an array of segments all in the same row, render a <tbody> element, a skeleton that contains\n        // the segments. Returns object with a bunch of internal data about how the render was calculated.\n        // NOTE: modifies rowSegs\n        DayGridEventRenderer.prototype.renderSegRow = function (row, rowSegs) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var segLevels = this.buildSegLevels(rowSegs); // group into sub-arrays of levels\n            var levelCnt = Math.max(1, segLevels.length); // ensure at least one level\n            var tbody = document.createElement('tbody');\n            var segMatrix = []; // lookup for which segments are rendered into which level+col cells\n            var cellMatrix = []; // lookup for all <td> elements of the level+col matrix\n            var loneCellMatrix = []; // lookup for <td> elements that only take up a single column\n            var i;\n            var levelSegs;\n            var col;\n            var tr;\n            var j;\n            var seg;\n            var td;\n            // populates empty cells from the current column (`col`) to `endCol`\n            function emptyCellsUntil(endCol) {\n                while (col < endCol) {\n                    // try to grab a cell from the level above and extend its rowspan. otherwise, create a fresh cell\n                    td = (loneCellMatrix[i - 1] || [])[col];\n                    if (td) {\n                        td.rowSpan = (td.rowSpan || 1) + 1;\n                    }\n                    else {\n                        td = document.createElement('td');\n                        tr.appendChild(td);\n                    }\n                    cellMatrix[i][col] = td;\n                    loneCellMatrix[i][col] = td;\n                    col++;\n                }\n            }\n            for (i = 0; i < levelCnt; i++) { // iterate through all levels\n                levelSegs = segLevels[i];\n                col = 0;\n                tr = document.createElement('tr');\n                segMatrix.push([]);\n                cellMatrix.push([]);\n                loneCellMatrix.push([]);\n                // levelCnt might be 1 even though there are no actual levels. protect against this.\n                // this single empty row is useful for styling.\n                if (levelSegs) {\n                    for (j = 0; j < levelSegs.length; j++) { // iterate through segments in level\n                        seg = levelSegs[j];\n                        var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                        var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                        emptyCellsUntil(leftCol);\n                        // create a container that occupies or more columns. append the event element.\n                        td = core.createElement('td', { className: 'fc-event-container' }, seg.el);\n                        if (leftCol !== rightCol) {\n                            td.colSpan = rightCol - leftCol + 1;\n                        }\n                        else { // a single-column segment\n                            loneCellMatrix[i][col] = td;\n                        }\n                        while (col <= rightCol) {\n                            cellMatrix[i][col] = td;\n                            segMatrix[i][col] = seg;\n                            col++;\n                        }\n                        tr.appendChild(td);\n                    }\n                }\n                emptyCellsUntil(colCnt); // finish off the row\n                var introHtml = dayGrid.renderProps.renderIntroHtml();\n                if (introHtml) {\n                    if (dayGrid.isRtl) {\n                        core.appendToElement(tr, introHtml);\n                    }\n                    else {\n                        core.prependToElement(tr, introHtml);\n                    }\n                }\n                tbody.appendChild(tr);\n            }\n            return {\n                row: row,\n                tbodyEl: tbody,\n                cellMatrix: cellMatrix,\n                segMatrix: segMatrix,\n                segLevels: segLevels,\n                segs: rowSegs\n            };\n        };\n        // Stacks a flat array of segments, which are all assumed to be in the same row, into subarrays of vertical levels.\n        // NOTE: modifies segs\n        DayGridEventRenderer.prototype.buildSegLevels = function (segs) {\n            var _a = this.dayGrid, isRtl = _a.isRtl, colCnt = _a.colCnt;\n            var levels = [];\n            var i;\n            var seg;\n            var j;\n            // Give preference to elements with certain criteria, so they have\n            // a chance to be closer to the top.\n            segs = this.sortEventSegs(segs);\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                // loop through levels, starting with the topmost, until the segment doesn't collide with other segments\n                for (j = 0; j < levels.length; j++) {\n                    if (!isDaySegCollision(seg, levels[j])) {\n                        break;\n                    }\n                }\n                // `j` now holds the desired subrow index\n                seg.level = j;\n                seg.leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol; // for sorting only\n                seg.rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol // for sorting only\n                ;\n                (levels[j] || (levels[j] = [])).push(seg);\n            }\n            // order segments left-to-right. very important if calendar is RTL\n            for (j = 0; j < levels.length; j++) {\n                levels[j].sort(compareDaySegCols);\n            }\n            return levels;\n        };\n        // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's row\n        DayGridEventRenderer.prototype.groupSegRows = function (segs) {\n            var segRows = [];\n            var i;\n            for (i = 0; i < this.dayGrid.rowCnt; i++) {\n                segRows.push([]);\n            }\n            for (i = 0; i < segs.length; i++) {\n                segRows[segs[i].row].push(segs[i]);\n            }\n            return segRows;\n        };\n        // Computes a default `displayEventEnd` value if one is not expliclty defined\n        DayGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return this.dayGrid.colCnt === 1; // we'll likely have space if there's only one day\n        };\n        return DayGridEventRenderer;\n    }(SimpleDayGridEventRenderer));\n    // Computes whether two segments' columns collide. They are assumed to be in the same row.\n    function isDaySegCollision(seg, otherSegs) {\n        var i;\n        var otherSeg;\n        for (i = 0; i < otherSegs.length; i++) {\n            otherSeg = otherSegs[i];\n            if (otherSeg.firstCol <= seg.lastCol &&\n                otherSeg.lastCol >= seg.firstCol) {\n                return true;\n            }\n        }\n        return false;\n    }\n    // A cmp function for determining the leftmost event\n    function compareDaySegCols(a, b) {\n        return a.leftCol - b.leftCol;\n    }\n\n    var DayGridMirrorRenderer = /** @class */ (function (_super) {\n        __extends(DayGridMirrorRenderer, _super);\n        function DayGridMirrorRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var sourceSeg = mirrorInfo.sourceSeg;\n            var rowStructs = this.rowStructs = this.renderSegRows(segs);\n            // inject each new event skeleton into each associated row\n            this.dayGrid.rowEls.forEach(function (rowNode, row) {\n                var skeletonEl = core.htmlToElement('<div class=\"fc-mirror-skeleton\"><table></table></div>'); // will be absolutely positioned\n                var skeletonTopEl;\n                var skeletonTop;\n                // If there is an original segment, match the top position. Otherwise, put it at the row's top level\n                if (sourceSeg && sourceSeg.row === row) {\n                    skeletonTopEl = sourceSeg.el;\n                }\n                else {\n                    skeletonTopEl = rowNode.querySelector('.fc-content-skeleton tbody');\n                    if (!skeletonTopEl) { // when no events\n                        skeletonTopEl = rowNode.querySelector('.fc-content-skeleton table');\n                    }\n                }\n                skeletonTop = skeletonTopEl.getBoundingClientRect().top -\n                    rowNode.getBoundingClientRect().top; // the offsetParent origin\n                skeletonEl.style.top = skeletonTop + 'px';\n                skeletonEl.querySelector('table').appendChild(rowStructs[row].tbodyEl);\n                rowNode.appendChild(skeletonEl);\n            });\n        };\n        return DayGridMirrorRenderer;\n    }(DayGridEventRenderer));\n\n    var DayGridFillRenderer = /** @class */ (function (_super) {\n        __extends(DayGridFillRenderer, _super);\n        function DayGridFillRenderer(dayGrid) {\n            var _this = _super.call(this, dayGrid.context) || this;\n            _this.fillSegTag = 'td'; // override the default tag name\n            _this.dayGrid = dayGrid;\n            return _this;\n        }\n        DayGridFillRenderer.prototype.renderSegs = function (type, segs) {\n            // don't render timed background events\n            if (type === 'bgEvent') {\n                segs = segs.filter(function (seg) {\n                    return seg.eventRange.def.allDay;\n                });\n            }\n            _super.prototype.renderSegs.call(this, type, segs);\n        };\n        DayGridFillRenderer.prototype.attachSegs = function (type, segs) {\n            var els = [];\n            var i;\n            var seg;\n            var skeletonEl;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                skeletonEl = this.renderFillRow(type, seg);\n                this.dayGrid.rowEls[seg.row].appendChild(skeletonEl);\n                els.push(skeletonEl);\n            }\n            return els;\n        };\n        // Generates the HTML needed for one row of a fill. Requires the seg's el to be rendered.\n        DayGridFillRenderer.prototype.renderFillRow = function (type, seg) {\n            var dayGrid = this.dayGrid;\n            var colCnt = dayGrid.colCnt, isRtl = dayGrid.isRtl;\n            var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n            var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n            var startCol = leftCol;\n            var endCol = rightCol + 1;\n            var className;\n            var skeletonEl;\n            var trEl;\n            if (type === 'businessHours') {\n                className = 'bgevent';\n            }\n            else {\n                className = type.toLowerCase();\n            }\n            skeletonEl = core.htmlToElement('<div class=\"fc-' + className + '-skeleton\">' +\n                '<table><tr></tr></table>' +\n                '</div>');\n            trEl = skeletonEl.getElementsByTagName('tr')[0];\n            if (startCol > 0) {\n                core.appendToElement(trEl, \n                // will create (startCol + 1) td's\n                new Array(startCol + 1).join('<td></td>'));\n            }\n            seg.el.colSpan = endCol - startCol;\n            trEl.appendChild(seg.el);\n            if (endCol < colCnt) {\n                core.appendToElement(trEl, \n                // will create (colCnt - endCol) td's\n                new Array(colCnt - endCol + 1).join('<td></td>'));\n            }\n            var introHtml = dayGrid.renderProps.renderIntroHtml();\n            if (introHtml) {\n                if (dayGrid.isRtl) {\n                    core.appendToElement(trEl, introHtml);\n                }\n                else {\n                    core.prependToElement(trEl, introHtml);\n                }\n            }\n            return skeletonEl;\n        };\n        return DayGridFillRenderer;\n    }(core.FillRenderer));\n\n    var DayTile = /** @class */ (function (_super) {\n        __extends(DayTile, _super);\n        function DayTile(context, el) {\n            var _this = _super.call(this, context, el) || this;\n            var eventRenderer = _this.eventRenderer = new DayTileEventRenderer(_this);\n            var renderFrame = _this.renderFrame = core.memoizeRendering(_this._renderFrame);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderFrame]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            _this.renderEventResize = core.memoizeRendering(eventRenderer.hideByHash.bind(eventRenderer), eventRenderer.showByHash.bind(eventRenderer), [renderFrame]);\n            context.calendar.registerInteractiveComponent(_this, {\n                el: _this.el,\n                useEventCenter: false\n            });\n            return _this;\n        }\n        DayTile.prototype.render = function (props) {\n            this.renderFrame(props.date);\n            this.renderFgEvents(props.fgSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDragInstances);\n            this.renderEventResize(props.eventResizeInstances);\n        };\n        DayTile.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderFrame.unrender(); // should unrender everything else\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        DayTile.prototype._renderFrame = function (date) {\n            var _a = this, theme = _a.theme, dateEnv = _a.dateEnv;\n            var title = dateEnv.format(date, core.createFormatter(this.opt('dayPopoverFormat')) // TODO: cache\n            );\n            this.el.innerHTML =\n                '<div class=\"fc-header ' + theme.getClass('popoverHeader') + '\">' +\n                    '<span class=\"fc-title\">' +\n                    core.htmlEscape(title) +\n                    '</span>' +\n                    '<span class=\"fc-close ' + theme.getIconClass('close') + '\"></span>' +\n                    '</div>' +\n                    '<div class=\"fc-body ' + theme.getClass('popoverContent') + '\">' +\n                    '<div class=\"fc-event-container\"></div>' +\n                    '</div>';\n            this.segContainerEl = this.el.querySelector('.fc-event-container');\n        };\n        DayTile.prototype.queryHit = function (positionLeft, positionTop, elWidth, elHeight) {\n            var date = this.props.date; // HACK\n            if (positionLeft < elWidth && positionTop < elHeight) {\n                return {\n                    component: this,\n                    dateSpan: {\n                        allDay: true,\n                        range: { start: date, end: core.addDays(date, 1) }\n                    },\n                    dayEl: this.el,\n                    rect: {\n                        left: 0,\n                        top: 0,\n                        right: elWidth,\n                        bottom: elHeight\n                    },\n                    layer: 1\n                };\n            }\n        };\n        return DayTile;\n    }(core.DateComponent));\n    var DayTileEventRenderer = /** @class */ (function (_super) {\n        __extends(DayTileEventRenderer, _super);\n        function DayTileEventRenderer(dayTile) {\n            var _this = _super.call(this, dayTile.context) || this;\n            _this.dayTile = dayTile;\n            return _this;\n        }\n        DayTileEventRenderer.prototype.attachSegs = function (segs) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                this.dayTile.segContainerEl.appendChild(seg.el);\n            }\n        };\n        DayTileEventRenderer.prototype.detachSegs = function (segs) {\n            for (var _i = 0, segs_2 = segs; _i < segs_2.length; _i++) {\n                var seg = segs_2[_i];\n                core.removeElement(seg.el);\n            }\n        };\n        return DayTileEventRenderer;\n    }(SimpleDayGridEventRenderer));\n\n    var DayBgRow = /** @class */ (function () {\n        function DayBgRow(context) {\n            this.context = context;\n        }\n        DayBgRow.prototype.renderHtml = function (props) {\n            var parts = [];\n            if (props.renderIntroHtml) {\n                parts.push(props.renderIntroHtml());\n            }\n            for (var _i = 0, _a = props.cells; _i < _a.length; _i++) {\n                var cell = _a[_i];\n                parts.push(renderCellHtml(cell.date, props.dateProfile, this.context, cell.htmlAttrs));\n            }\n            if (!props.cells.length) {\n                parts.push('<td class=\"fc-day ' + this.context.theme.getClass('widgetContent') + '\"></td>');\n            }\n            if (this.context.options.dir === 'rtl') {\n                parts.reverse();\n            }\n            return '<tr>' + parts.join('') + '</tr>';\n        };\n        return DayBgRow;\n    }());\n    function renderCellHtml(date, dateProfile, context, otherAttrs) {\n        var dateEnv = context.dateEnv, theme = context.theme;\n        var isDateValid = core.rangeContainsMarker(dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n        var classes = core.getDayClasses(date, dateProfile, context);\n        classes.unshift('fc-day', theme.getClass('widgetContent'));\n        return '<td class=\"' + classes.join(' ') + '\"' +\n            (isDateValid ?\n                ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                '') +\n            (otherAttrs ?\n                ' ' + otherAttrs :\n                '') +\n            '></td>';\n    }\n\n    var DAY_NUM_FORMAT = core.createFormatter({ day: 'numeric' });\n    var WEEK_NUM_FORMAT = core.createFormatter({ week: 'numeric' });\n    var DayGrid = /** @class */ (function (_super) {\n        __extends(DayGrid, _super);\n        function DayGrid(context, el, renderProps) {\n            var _this = _super.call(this, context, el) || this;\n            _this.bottomCoordPadding = 0; // hack for extending the hit area for the last row of the coordinate grid\n            _this.isCellSizesDirty = false;\n            var eventRenderer = _this.eventRenderer = new DayGridEventRenderer(_this);\n            var fillRenderer = _this.fillRenderer = new DayGridFillRenderer(_this);\n            _this.mirrorRenderer = new DayGridMirrorRenderer(_this);\n            var renderCells = _this.renderCells = core.memoizeRendering(_this._renderCells, _this._unrenderCells);\n            _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderCells]);\n            _this.renderDateSelection = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'highlight'), fillRenderer.unrender.bind(fillRenderer, 'highlight'), [renderCells]);\n            _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderCells]);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderCells]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderCells]);\n            _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderCells]);\n            _this.renderProps = renderProps;\n            return _this;\n        }\n        DayGrid.prototype.render = function (props) {\n            var cells = props.cells;\n            this.rowCnt = cells.length;\n            this.colCnt = cells[0].length;\n            this.renderCells(cells, props.isRigid);\n            this.renderBusinessHours(props.businessHourSegs);\n            this.renderDateSelection(props.dateSelectionSegs);\n            this.renderBgEvents(props.bgEventSegs);\n            this.renderFgEvents(props.fgEventSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDrag);\n            this.renderEventResize(props.eventResize);\n            if (this.segPopoverTile) {\n                this.updateSegPopoverTile();\n            }\n        };\n        DayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.renderCells.unrender(); // will unrender everything else\n        };\n        DayGrid.prototype.getCellRange = function (row, col) {\n            var start = this.props.cells[row][col].date;\n            var end = core.addDays(start, 1);\n            return { start: start, end: end };\n        };\n        DayGrid.prototype.updateSegPopoverTile = function (date, segs) {\n            var ownProps = this.props;\n            this.segPopoverTile.receiveProps({\n                date: date || this.segPopoverTile.props.date,\n                fgSegs: segs || this.segPopoverTile.props.fgSegs,\n                eventSelection: ownProps.eventSelection,\n                eventDragInstances: ownProps.eventDrag ? ownProps.eventDrag.affectedInstances : null,\n                eventResizeInstances: ownProps.eventResize ? ownProps.eventResize.affectedInstances : null\n            });\n        };\n        /* Date Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderCells = function (cells, isRigid) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var _b = this, rowCnt = _b.rowCnt, colCnt = _b.colCnt;\n            var html = '';\n            var row;\n            var col;\n            for (row = 0; row < rowCnt; row++) {\n                html += this.renderDayRowHtml(row, isRigid);\n            }\n            this.el.innerHTML = html;\n            this.rowEls = core.findElements(this.el, '.fc-row');\n            this.cellEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n            if (this.isRtl) {\n                this.cellEls.reverse();\n            }\n            this.rowPositions = new core.PositionCache(this.el, this.rowEls, false, true // vertical\n            );\n            this.colPositions = new core.PositionCache(this.el, this.cellEls.slice(0, colCnt), // only the first row\n            true, false // horizontal\n            );\n            // trigger dayRender with each cell's element\n            for (row = 0; row < rowCnt; row++) {\n                for (col = 0; col < colCnt; col++) {\n                    this.publiclyTrigger('dayRender', [\n                        {\n                            date: dateEnv.toDate(cells[row][col].date),\n                            el: this.getCellEl(row, col),\n                            view: view\n                        }\n                    ]);\n                }\n            }\n            this.isCellSizesDirty = true;\n        };\n        DayGrid.prototype._unrenderCells = function () {\n            this.removeSegPopover();\n        };\n        // Generates the HTML for a single row, which is a div that wraps a table.\n        // `row` is the row number.\n        DayGrid.prototype.renderDayRowHtml = function (row, isRigid) {\n            var theme = this.theme;\n            var classes = ['fc-row', 'fc-week', theme.getClass('dayRow')];\n            if (isRigid) {\n                classes.push('fc-rigid');\n            }\n            var bgRow = new DayBgRow(this.context);\n            return '' +\n                '<div class=\"' + classes.join(' ') + '\">' +\n                '<div class=\"fc-bg\">' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                bgRow.renderHtml({\n                    cells: this.props.cells[row],\n                    dateProfile: this.props.dateProfile,\n                    renderIntroHtml: this.renderProps.renderBgIntroHtml\n                }) +\n                '</table>' +\n                '</div>' +\n                '<div class=\"fc-content-skeleton\">' +\n                '<table>' +\n                (this.getIsNumbersVisible() ?\n                    '<thead>' +\n                        this.renderNumberTrHtml(row) +\n                        '</thead>' :\n                    '') +\n                '</table>' +\n                '</div>' +\n                '</div>';\n        };\n        DayGrid.prototype.getIsNumbersVisible = function () {\n            return this.getIsDayNumbersVisible() ||\n                this.renderProps.cellWeekNumbersVisible ||\n                this.renderProps.colWeekNumbersVisible;\n        };\n        DayGrid.prototype.getIsDayNumbersVisible = function () {\n            return this.rowCnt > 1;\n        };\n        /* Grid Number Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.renderNumberTrHtml = function (row) {\n            var intro = this.renderProps.renderNumberIntroHtml(row, this);\n            return '' +\n                '<tr>' +\n                (this.isRtl ? '' : intro) +\n                this.renderNumberCellsHtml(row) +\n                (this.isRtl ? intro : '') +\n                '</tr>';\n        };\n        DayGrid.prototype.renderNumberCellsHtml = function (row) {\n            var htmls = [];\n            var col;\n            var date;\n            for (col = 0; col < this.colCnt; col++) {\n                date = this.props.cells[row][col].date;\n                htmls.push(this.renderNumberCellHtml(date));\n            }\n            if (this.isRtl) {\n                htmls.reverse();\n            }\n            return htmls.join('');\n        };\n        // Generates the HTML for the <td>s of the \"number\" row in the DayGrid's content skeleton.\n        // The number row will only exist if either day numbers or week numbers are turned on.\n        DayGrid.prototype.renderNumberCellHtml = function (date) {\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var html = '';\n            var isDateValid = core.rangeContainsMarker(this.props.dateProfile.activeRange, date); // TODO: called too frequently. cache somehow.\n            var isDayNumberVisible = this.getIsDayNumbersVisible() && isDateValid;\n            var classes;\n            var weekCalcFirstDow;\n            if (!isDayNumberVisible && !this.renderProps.cellWeekNumbersVisible) {\n                // no numbers in day cell (week number must be along the side)\n                return '<td></td>'; //  will create an empty space above events :(\n            }\n            classes = core.getDayClasses(date, this.props.dateProfile, this.context);\n            classes.unshift('fc-day-top');\n            if (this.renderProps.cellWeekNumbersVisible) {\n                weekCalcFirstDow = dateEnv.weekDow;\n            }\n            html += '<td class=\"' + classes.join(' ') + '\"' +\n                (isDateValid ?\n                    ' data-date=\"' + dateEnv.formatIso(date, { omitTime: true }) + '\"' :\n                    '') +\n                '>';\n            if (this.renderProps.cellWeekNumbersVisible && (date.getUTCDay() === weekCalcFirstDow)) {\n                html += core.buildGotoAnchorHtml(view, { date: date, type: 'week' }, { 'class': 'fc-week-number' }, dateEnv.format(date, WEEK_NUM_FORMAT) // inner HTML\n                );\n            }\n            if (isDayNumberVisible) {\n                html += core.buildGotoAnchorHtml(view, date, { 'class': 'fc-day-number' }, dateEnv.format(date, DAY_NUM_FORMAT) // inner HTML\n                );\n            }\n            html += '</td>';\n            return html;\n        };\n        /* Sizing\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.updateSize = function (isResize) {\n            var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n            if (isResize ||\n                this.isCellSizesDirty ||\n                this.view.calendar.isEventsUpdated // hack\n            ) {\n                this.buildPositionCaches();\n                this.isCellSizesDirty = false;\n            }\n            fillRenderer.computeSizes(isResize);\n            eventRenderer.computeSizes(isResize);\n            mirrorRenderer.computeSizes(isResize);\n            fillRenderer.assignSizes(isResize);\n            eventRenderer.assignSizes(isResize);\n            mirrorRenderer.assignSizes(isResize);\n        };\n        DayGrid.prototype.buildPositionCaches = function () {\n            this.buildColPositions();\n            this.buildRowPositions();\n        };\n        DayGrid.prototype.buildColPositions = function () {\n            this.colPositions.build();\n        };\n        DayGrid.prototype.buildRowPositions = function () {\n            this.rowPositions.build();\n            this.rowPositions.bottoms[this.rowCnt - 1] += this.bottomCoordPadding; // hack\n        };\n        /* Hit System\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.positionToHit = function (leftPosition, topPosition) {\n            var _a = this, colPositions = _a.colPositions, rowPositions = _a.rowPositions;\n            var col = colPositions.leftToIndex(leftPosition);\n            var row = rowPositions.topToIndex(topPosition);\n            if (row != null && col != null) {\n                return {\n                    row: row,\n                    col: col,\n                    dateSpan: {\n                        range: this.getCellRange(row, col),\n                        allDay: true\n                    },\n                    dayEl: this.getCellEl(row, col),\n                    relativeRect: {\n                        left: colPositions.lefts[col],\n                        right: colPositions.rights[col],\n                        top: rowPositions.tops[row],\n                        bottom: rowPositions.bottoms[row]\n                    }\n                };\n            }\n        };\n        /* Cell System\n        ------------------------------------------------------------------------------------------------------------------*/\n        // FYI: the first column is the leftmost column, regardless of date\n        DayGrid.prototype.getCellEl = function (row, col) {\n            return this.cellEls[row * this.colCnt + col];\n        };\n        /* Event Drag Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n            }\n        };\n        DayGrid.prototype._unrenderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n            }\n        };\n        /* Event Resize Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype._renderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.fillRenderer.renderSegs('highlight', state.segs);\n                this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        DayGrid.prototype._unrenderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.fillRenderer.unrender('highlight');\n                this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        /* More+ Link Popover\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGrid.prototype.removeSegPopover = function () {\n            if (this.segPopover) {\n                this.segPopover.hide(); // in handler, will call segPopover's removeElement\n            }\n        };\n        // Limits the number of \"levels\" (vertically stacking layers of events) for each row of the grid.\n        // `levelLimit` can be false (don't limit), a number, or true (should be computed).\n        DayGrid.prototype.limitRows = function (levelLimit) {\n            var rowStructs = this.eventRenderer.rowStructs || [];\n            var row; // row #\n            var rowLevelLimit;\n            for (row = 0; row < rowStructs.length; row++) {\n                this.unlimitRow(row);\n                if (!levelLimit) {\n                    rowLevelLimit = false;\n                }\n                else if (typeof levelLimit === 'number') {\n                    rowLevelLimit = levelLimit;\n                }\n                else {\n                    rowLevelLimit = this.computeRowLevelLimit(row);\n                }\n                if (rowLevelLimit !== false) {\n                    this.limitRow(row, rowLevelLimit);\n                }\n            }\n        };\n        // Computes the number of levels a row will accomodate without going outside its bounds.\n        // Assumes the row is \"rigid\" (maintains a constant height regardless of what is inside).\n        // `row` is the row number.\n        DayGrid.prototype.computeRowLevelLimit = function (row) {\n            var rowEl = this.rowEls[row]; // the containing \"fake\" row div\n            var rowBottom = rowEl.getBoundingClientRect().bottom; // relative to viewport!\n            var trEls = core.findChildren(this.eventRenderer.rowStructs[row].tbodyEl);\n            var i;\n            var trEl;\n            // Reveal one level <tr> at a time and stop when we find one out of bounds\n            for (i = 0; i < trEls.length; i++) {\n                trEl = trEls[i];\n                trEl.classList.remove('fc-limited'); // reset to original state (reveal)\n                if (trEl.getBoundingClientRect().bottom > rowBottom) {\n                    return i;\n                }\n            }\n            return false; // should not limit at all\n        };\n        // Limits the given grid row to the maximum number of levels and injects \"more\" links if necessary.\n        // `row` is the row number.\n        // `levelLimit` is a number for the maximum (inclusive) number of levels allowed.\n        DayGrid.prototype.limitRow = function (row, levelLimit) {\n            var _this = this;\n            var _a = this, colCnt = _a.colCnt, isRtl = _a.isRtl;\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            var moreNodes = []; // array of \"more\" <a> links and <td> DOM nodes\n            var col = 0; // col #, left-to-right (not chronologically)\n            var levelSegs; // array of segment objects in the last allowable level, ordered left-to-right\n            var cellMatrix; // a matrix (by level, then column) of all <td> elements in the row\n            var limitedNodes; // array of temporarily hidden level <tr> and segment <td> DOM nodes\n            var i;\n            var seg;\n            var segsBelow; // array of segment objects below `seg` in the current `col`\n            var totalSegsBelow; // total number of segments below `seg` in any of the columns `seg` occupies\n            var colSegsBelow; // array of segment arrays, below seg, one for each column (offset from segs's first column)\n            var td;\n            var rowSpan;\n            var segMoreNodes; // array of \"more\" <td> cells that will stand-in for the current seg's cell\n            var j;\n            var moreTd;\n            var moreWrap;\n            var moreLink;\n            // Iterates through empty level cells and places \"more\" links inside if need be\n            var emptyCellsUntil = function (endCol) {\n                while (col < endCol) {\n                    segsBelow = _this.getCellSegs(row, col, levelLimit);\n                    if (segsBelow.length) {\n                        td = cellMatrix[levelLimit - 1][col];\n                        moreLink = _this.renderMoreLink(row, col, segsBelow);\n                        moreWrap = core.createElement('div', null, moreLink);\n                        td.appendChild(moreWrap);\n                        moreNodes.push(moreWrap);\n                    }\n                    col++;\n                }\n            };\n            if (levelLimit && levelLimit < rowStruct.segLevels.length) { // is it actually over the limit?\n                levelSegs = rowStruct.segLevels[levelLimit - 1];\n                cellMatrix = rowStruct.cellMatrix;\n                limitedNodes = core.findChildren(rowStruct.tbodyEl).slice(levelLimit); // get level <tr> elements past the limit\n                limitedNodes.forEach(function (node) {\n                    node.classList.add('fc-limited'); // hide elements and get a simple DOM-nodes array\n                });\n                // iterate though segments in the last allowable level\n                for (i = 0; i < levelSegs.length; i++) {\n                    seg = levelSegs[i];\n                    var leftCol = isRtl ? (colCnt - 1 - seg.lastCol) : seg.firstCol;\n                    var rightCol = isRtl ? (colCnt - 1 - seg.firstCol) : seg.lastCol;\n                    emptyCellsUntil(leftCol); // process empty cells before the segment\n                    // determine *all* segments below `seg` that occupy the same columns\n                    colSegsBelow = [];\n                    totalSegsBelow = 0;\n                    while (col <= rightCol) {\n                        segsBelow = this.getCellSegs(row, col, levelLimit);\n                        colSegsBelow.push(segsBelow);\n                        totalSegsBelow += segsBelow.length;\n                        col++;\n                    }\n                    if (totalSegsBelow) { // do we need to replace this segment with one or many \"more\" links?\n                        td = cellMatrix[levelLimit - 1][leftCol]; // the segment's parent cell\n                        rowSpan = td.rowSpan || 1;\n                        segMoreNodes = [];\n                        // make a replacement <td> for each column the segment occupies. will be one for each colspan\n                        for (j = 0; j < colSegsBelow.length; j++) {\n                            moreTd = core.createElement('td', { className: 'fc-more-cell', rowSpan: rowSpan });\n                            segsBelow = colSegsBelow[j];\n                            moreLink = this.renderMoreLink(row, leftCol + j, [seg].concat(segsBelow) // count seg as hidden too\n                            );\n                            moreWrap = core.createElement('div', null, moreLink);\n                            moreTd.appendChild(moreWrap);\n                            segMoreNodes.push(moreTd);\n                            moreNodes.push(moreTd);\n                        }\n                        td.classList.add('fc-limited');\n                        core.insertAfterElement(td, segMoreNodes);\n                        limitedNodes.push(td);\n                    }\n                }\n                emptyCellsUntil(this.colCnt); // finish off the level\n                rowStruct.moreEls = moreNodes; // for easy undoing later\n                rowStruct.limitedEls = limitedNodes; // for easy undoing later\n            }\n        };\n        // Reveals all levels and removes all \"more\"-related elements for a grid's row.\n        // `row` is a row number.\n        DayGrid.prototype.unlimitRow = function (row) {\n            var rowStruct = this.eventRenderer.rowStructs[row];\n            if (rowStruct.moreEls) {\n                rowStruct.moreEls.forEach(core.removeElement);\n                rowStruct.moreEls = null;\n            }\n            if (rowStruct.limitedEls) {\n                rowStruct.limitedEls.forEach(function (limitedEl) {\n                    limitedEl.classList.remove('fc-limited');\n                });\n                rowStruct.limitedEls = null;\n            }\n        };\n        // Renders an <a> element that represents hidden event element for a cell.\n        // Responsible for attaching click handler as well.\n        DayGrid.prototype.renderMoreLink = function (row, col, hiddenSegs) {\n            var _this = this;\n            var _a = this, view = _a.view, dateEnv = _a.dateEnv;\n            var a = core.createElement('a', { className: 'fc-more' });\n            a.innerText = this.getMoreLinkText(hiddenSegs.length);\n            a.addEventListener('click', function (ev) {\n                var clickOption = _this.opt('eventLimitClick');\n                var _col = _this.isRtl ? _this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n                var date = _this.props.cells[row][_col].date;\n                var moreEl = ev.currentTarget;\n                var dayEl = _this.getCellEl(row, col);\n                var allSegs = _this.getCellSegs(row, col);\n                // rescope the segments to be within the cell's date\n                var reslicedAllSegs = _this.resliceDaySegs(allSegs, date);\n                var reslicedHiddenSegs = _this.resliceDaySegs(hiddenSegs, date);\n                if (typeof clickOption === 'function') {\n                    // the returned value can be an atomic option\n                    clickOption = _this.publiclyTrigger('eventLimitClick', [\n                        {\n                            date: dateEnv.toDate(date),\n                            allDay: true,\n                            dayEl: dayEl,\n                            moreEl: moreEl,\n                            segs: reslicedAllSegs,\n                            hiddenSegs: reslicedHiddenSegs,\n                            jsEvent: ev,\n                            view: view\n                        }\n                    ]);\n                }\n                if (clickOption === 'popover') {\n                    _this.showSegPopover(row, col, moreEl, reslicedAllSegs);\n                }\n                else if (typeof clickOption === 'string') { // a view name\n                    view.calendar.zoomTo(date, clickOption);\n                }\n            });\n            return a;\n        };\n        // Reveals the popover that displays all events within a cell\n        DayGrid.prototype.showSegPopover = function (row, col, moreLink, segs) {\n            var _this = this;\n            var _a = this, calendar = _a.calendar, view = _a.view, theme = _a.theme;\n            var _col = this.isRtl ? this.colCnt - col - 1 : col; // HACK: props.cells has different dir system?\n            var moreWrap = moreLink.parentNode; // the <div> wrapper around the <a>\n            var topEl; // the element we want to match the top coordinate of\n            var options;\n            if (this.rowCnt === 1) {\n                topEl = view.el; // will cause the popover to cover any sort of header\n            }\n            else {\n                topEl = this.rowEls[row]; // will align with top of row\n            }\n            options = {\n                className: 'fc-more-popover ' + theme.getClass('popover'),\n                parentEl: view.el,\n                top: core.computeRect(topEl).top,\n                autoHide: true,\n                content: function (el) {\n                    _this.segPopoverTile = new DayTile(_this.context, el);\n                    _this.updateSegPopoverTile(_this.props.cells[row][_col].date, segs);\n                },\n                hide: function () {\n                    _this.segPopoverTile.destroy();\n                    _this.segPopoverTile = null;\n                    _this.segPopover.destroy();\n                    _this.segPopover = null;\n                }\n            };\n            // Determine horizontal coordinate.\n            // We use the moreWrap instead of the <td> to avoid border confusion.\n            if (this.isRtl) {\n                options.right = core.computeRect(moreWrap).right + 1; // +1 to be over cell border\n            }\n            else {\n                options.left = core.computeRect(moreWrap).left - 1; // -1 to be over cell border\n            }\n            this.segPopover = new Popover(options);\n            this.segPopover.show();\n            calendar.releaseAfterSizingTriggers(); // hack for eventPositioned\n        };\n        // Given the events within an array of segment objects, reslice them to be in a single day\n        DayGrid.prototype.resliceDaySegs = function (segs, dayDate) {\n            var dayStart = dayDate;\n            var dayEnd = core.addDays(dayStart, 1);\n            var dayRange = { start: dayStart, end: dayEnd };\n            var newSegs = [];\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                var eventRange = seg.eventRange;\n                var origRange = eventRange.range;\n                var slicedRange = core.intersectRanges(origRange, dayRange);\n                if (slicedRange) {\n                    newSegs.push(__assign({}, seg, { eventRange: {\n                            def: eventRange.def,\n                            ui: __assign({}, eventRange.ui, { durationEditable: false }),\n                            instance: eventRange.instance,\n                            range: slicedRange\n                        }, isStart: seg.isStart && slicedRange.start.valueOf() === origRange.start.valueOf(), isEnd: seg.isEnd && slicedRange.end.valueOf() === origRange.end.valueOf() }));\n                }\n            }\n            return newSegs;\n        };\n        // Generates the text that should be inside a \"more\" link, given the number of events it represents\n        DayGrid.prototype.getMoreLinkText = function (num) {\n            var opt = this.opt('eventLimitText');\n            if (typeof opt === 'function') {\n                return opt(num);\n            }\n            else {\n                return '+' + num + ' ' + opt;\n            }\n        };\n        // Returns segments within a given cell.\n        // If `startLevel` is specified, returns only events including and below that level. Otherwise returns all segs.\n        DayGrid.prototype.getCellSegs = function (row, col, startLevel) {\n            var segMatrix = this.eventRenderer.rowStructs[row].segMatrix;\n            var level = startLevel || 0;\n            var segs = [];\n            var seg;\n            while (level < segMatrix.length) {\n                seg = segMatrix[level][col];\n                if (seg) {\n                    segs.push(seg);\n                }\n                level++;\n            }\n            return segs;\n        };\n        return DayGrid;\n    }(core.DateComponent));\n\n    var WEEK_NUM_FORMAT$1 = core.createFormatter({ week: 'numeric' });\n    /* An abstract class for the daygrid views, as well as month view. Renders one or more rows of day cells.\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // It is a manager for a DayGrid subcomponent, which does most of the heavy lifting.\n    // It is responsible for managing width/height.\n    var DayGridView = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n            /* Header Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before the day-of week header cells\n            _this.renderHeadIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<th class=\"fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.weekNumberStyleAttr() + '>' +\n                        '<span>' + // needed for matchCellWidths\n                        core.htmlEscape(_this.opt('weekLabel')) +\n                        '</span>' +\n                        '</th>';\n                }\n                return '';\n            };\n            /* Day Grid Rendering\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before content-skeleton cells that display the day/week numbers\n            _this.renderDayGridNumberIntroHtml = function (row, dayGrid) {\n                var dateEnv = _this.dateEnv;\n                var weekStart = dayGrid.props.cells[row][0].date;\n                if (_this.colWeekNumbersVisible) {\n                    return '' +\n                        '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '>' +\n                        core.buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                        _this, { date: weekStart, type: 'week', forceOff: dayGrid.colCnt === 1 }, dateEnv.format(weekStart, WEEK_NUM_FORMAT$1) // inner HTML\n                        ) +\n                        '</td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before the day bg cells for each day-row\n            _this.renderDayGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number ' + theme.getClass('widgetContent') + '\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            // Generates the HTML that goes before every other type of row generated by DayGrid.\n            // Affects mirror-skeleton and highlight-skeleton rows.\n            _this.renderDayGridIntroHtml = function () {\n                if (_this.colWeekNumbersVisible) {\n                    return '<td class=\"fc-week-number\" ' + _this.weekNumberStyleAttr() + '></td>';\n                }\n                return '';\n            };\n            _this.el.classList.add('fc-dayGrid-view');\n            _this.el.innerHTML = _this.renderSkeletonHtml();\n            _this.scroller = new core.ScrollComponent('hidden', // overflow x\n            'auto' // overflow y\n            );\n            var dayGridContainerEl = _this.scroller.el;\n            _this.el.querySelector('.fc-body > tr > td').appendChild(dayGridContainerEl);\n            dayGridContainerEl.classList.add('fc-day-grid-container');\n            var dayGridEl = core.createElement('div', { className: 'fc-day-grid' });\n            dayGridContainerEl.appendChild(dayGridEl);\n            var cellWeekNumbersVisible;\n            if (_this.opt('weekNumbers')) {\n                if (_this.opt('weekNumbersWithinDays')) {\n                    cellWeekNumbersVisible = true;\n                    _this.colWeekNumbersVisible = false;\n                }\n                else {\n                    cellWeekNumbersVisible = false;\n                    _this.colWeekNumbersVisible = true;\n                }\n            }\n            else {\n                _this.colWeekNumbersVisible = false;\n                cellWeekNumbersVisible = false;\n            }\n            _this.dayGrid = new DayGrid(_this.context, dayGridEl, {\n                renderNumberIntroHtml: _this.renderDayGridNumberIntroHtml,\n                renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n                renderIntroHtml: _this.renderDayGridIntroHtml,\n                colWeekNumbersVisible: _this.colWeekNumbersVisible,\n                cellWeekNumbersVisible: cellWeekNumbersVisible\n            });\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.dayGrid.destroy();\n            this.scroller.destroy();\n        };\n        // Builds the HTML skeleton for the view.\n        // The day-grid component will render inside of a container defined by this HTML.\n        DayGridView.prototype.renderSkeletonHtml = function () {\n            var theme = this.theme;\n            return '' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                (this.opt('columnHeader') ?\n                    '<thead class=\"fc-head\">' +\n                        '<tr>' +\n                        '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                        '</tr>' +\n                        '</thead>' :\n                    '') +\n                '<tbody class=\"fc-body\">' +\n                '<tr>' +\n                '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                '</tr>' +\n                '</tbody>' +\n                '</table>';\n        };\n        // Generates an HTML attribute string for setting the width of the week number column, if it is known\n        DayGridView.prototype.weekNumberStyleAttr = function () {\n            if (this.weekNumberWidth != null) {\n                return 'style=\"width:' + this.weekNumberWidth + 'px\"';\n            }\n            return '';\n        };\n        // Determines whether each row should have a constant height\n        DayGridView.prototype.hasRigidRows = function () {\n            var eventLimit = this.opt('eventLimit');\n            return eventLimit && typeof eventLimit !== 'number';\n        };\n        /* Dimensions\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n            this.dayGrid.updateSize(isResize);\n        };\n        // Refreshes the horizontal dimensions of the view\n        DayGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n            var dayGrid = this.dayGrid;\n            var eventLimit = this.opt('eventLimit');\n            var headRowEl = this.header ? this.header.el : null; // HACK\n            var scrollerHeight;\n            var scrollbarWidths;\n            // hack to give the view some height prior to dayGrid's columns being rendered\n            // TODO: separate setting height from scroller VS dayGrid.\n            if (!dayGrid.rowEls) {\n                if (!isAuto) {\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                return;\n            }\n            if (this.colWeekNumbersVisible) {\n                // Make sure all week number cells running down the side have the same width.\n                this.weekNumberWidth = core.matchCellWidths(core.findElements(this.el, '.fc-week-number'));\n            }\n            // reset all heights to be natural\n            this.scroller.clear();\n            if (headRowEl) {\n                core.uncompensateScroll(headRowEl);\n            }\n            dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n            // is the event limit a constant level number?\n            if (eventLimit && typeof eventLimit === 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels first so the height can redistribute after\n            }\n            // distribute the height to the rows\n            // (viewHeight is a \"recommended\" value if isAuto)\n            scrollerHeight = this.computeScrollerHeight(viewHeight);\n            this.setGridHeight(scrollerHeight, isAuto);\n            // is the event limit dynamically calculated?\n            if (eventLimit && typeof eventLimit !== 'number') {\n                dayGrid.limitRows(eventLimit); // limit the levels after the grid's row heights have been set\n            }\n            if (!isAuto) { // should we force dimensions of the scroll container?\n                this.scroller.setHeight(scrollerHeight);\n                scrollbarWidths = this.scroller.getScrollbarWidths();\n                if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                    if (headRowEl) {\n                        core.compensateScroll(headRowEl, scrollbarWidths);\n                    }\n                    // doing the scrollbar compensation might have created text overflow which created more height. redo\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                // guarantees the same scrollbar widths\n                this.scroller.lockOverflow(scrollbarWidths);\n            }\n        };\n        // given a desired total height of the view, returns what the height of the scroller should be\n        DayGridView.prototype.computeScrollerHeight = function (viewHeight) {\n            return viewHeight -\n                core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n        };\n        // Sets the height of just the DayGrid component in this view\n        DayGridView.prototype.setGridHeight = function (height, isAuto) {\n            if (this.opt('monthMode')) {\n                // if auto, make the height of each row the height that it would be if there were 6 weeks\n                if (isAuto) {\n                    height *= this.dayGrid.rowCnt / 6;\n                }\n                core.distributeHeight(this.dayGrid.rowEls, height, !isAuto); // if auto, don't compensate for height-hogging rows\n            }\n            else {\n                if (isAuto) {\n                    core.undistributeHeight(this.dayGrid.rowEls); // let the rows be their natural height with no expanding\n                }\n                else {\n                    core.distributeHeight(this.dayGrid.rowEls, height, true); // true = compensate for height-hogging rows\n                }\n            }\n        };\n        /* Scroll\n        ------------------------------------------------------------------------------------------------------------------*/\n        DayGridView.prototype.computeDateScroll = function (timeMs) {\n            return { top: 0 };\n        };\n        DayGridView.prototype.queryDateScroll = function () {\n            return { top: this.scroller.getScrollTop() };\n        };\n        DayGridView.prototype.applyDateScroll = function (scroll) {\n            if (scroll.top !== undefined) {\n                this.scroller.setScrollTop(scroll.top);\n            }\n        };\n        return DayGridView;\n    }(core.View));\n    DayGridView.prototype.dateProfileGeneratorClass = DayGridDateProfileGenerator;\n\n    var SimpleDayGrid = /** @class */ (function (_super) {\n        __extends(SimpleDayGrid, _super);\n        function SimpleDayGrid(context, dayGrid) {\n            var _this = _super.call(this, context, dayGrid.el) || this;\n            _this.slicer = new DayGridSlicer();\n            _this.dayGrid = dayGrid;\n            context.calendar.registerInteractiveComponent(_this, { el: _this.dayGrid.el });\n            return _this;\n        }\n        SimpleDayGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        SimpleDayGrid.prototype.render = function (props) {\n            var dayGrid = this.dayGrid;\n            var dateProfile = props.dateProfile, dayTable = props.dayTable;\n            dayGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, props.nextDayThreshold, dayGrid, dayTable), { dateProfile: dateProfile, cells: dayTable.cells, isRigid: props.isRigid }));\n        };\n        SimpleDayGrid.prototype.buildPositionCaches = function () {\n            this.dayGrid.buildPositionCaches();\n        };\n        SimpleDayGrid.prototype.queryHit = function (positionLeft, positionTop) {\n            var rawHit = this.dayGrid.positionToHit(positionLeft, positionTop);\n            if (rawHit) {\n                return {\n                    component: this.dayGrid,\n                    dateSpan: rawHit.dateSpan,\n                    dayEl: rawHit.dayEl,\n                    rect: {\n                        left: rawHit.relativeRect.left,\n                        right: rawHit.relativeRect.right,\n                        top: rawHit.relativeRect.top,\n                        bottom: rawHit.relativeRect.bottom\n                    },\n                    layer: 0\n                };\n            }\n        };\n        return SimpleDayGrid;\n    }(core.DateComponent));\n    var DayGridSlicer = /** @class */ (function (_super) {\n        __extends(DayGridSlicer, _super);\n        function DayGridSlicer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        DayGridSlicer.prototype.sliceRange = function (dateRange, dayTable) {\n            return dayTable.sliceRange(dateRange);\n        };\n        return DayGridSlicer;\n    }(core.Slicer));\n\n    var DayGridView$1 = /** @class */ (function (_super) {\n        __extends(DayGridView, _super);\n        function DayGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.buildDayTable = core.memoize(buildDayTable);\n            if (_this.opt('columnHeader')) {\n                _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n            }\n            _this.simpleDayGrid = new SimpleDayGrid(_this.context, _this.dayGrid);\n            return _this;\n        }\n        DayGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            if (this.header) {\n                this.header.destroy();\n            }\n            this.simpleDayGrid.destroy();\n        };\n        DayGridView.prototype.render = function (props) {\n            _super.prototype.render.call(this, props);\n            var dateProfile = this.props.dateProfile;\n            var dayTable = this.dayTable =\n                this.buildDayTable(dateProfile, this.dateProfileGenerator);\n            if (this.header) {\n                this.header.receiveProps({\n                    dateProfile: dateProfile,\n                    dates: dayTable.headerDates,\n                    datesRepDistinctDays: dayTable.rowCnt === 1,\n                    renderIntroHtml: this.renderHeadIntroHtml\n                });\n            }\n            this.simpleDayGrid.receiveProps({\n                dateProfile: dateProfile,\n                dayTable: dayTable,\n                businessHours: props.businessHours,\n                dateSelection: props.dateSelection,\n                eventStore: props.eventStore,\n                eventUiBases: props.eventUiBases,\n                eventSelection: props.eventSelection,\n                eventDrag: props.eventDrag,\n                eventResize: props.eventResize,\n                isRigid: this.hasRigidRows(),\n                nextDayThreshold: this.nextDayThreshold\n            });\n        };\n        return DayGridView;\n    }(DayGridView));\n    function buildDayTable(dateProfile, dateProfileGenerator) {\n        var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n        return new core.DayTable(daySeries, /year|month|week/.test(dateProfile.currentRangeUnit));\n    }\n\n    var main = core.createPlugin({\n        defaultView: 'dayGridMonth',\n        views: {\n            dayGrid: DayGridView$1,\n            dayGridDay: {\n                type: 'dayGrid',\n                duration: { days: 1 }\n            },\n            dayGridWeek: {\n                type: 'dayGrid',\n                duration: { weeks: 1 }\n            },\n            dayGridMonth: {\n                type: 'dayGrid',\n                duration: { months: 1 },\n                monthMode: true,\n                fixedWeekCount: true\n            }\n        }\n    });\n\n    exports.AbstractDayGridView = DayGridView;\n    exports.DayBgRow = DayBgRow;\n    exports.DayGrid = DayGrid;\n    exports.DayGridSlicer = DayGridSlicer;\n    exports.DayGridView = DayGridView$1;\n    exports.SimpleDayGrid = SimpleDayGrid;\n    exports.buildBasicDayTable = buildDayTable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","/*!\nFullCalendar Time Grid Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core'), require('@fullcalendar/daygrid')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core', '@fullcalendar/daygrid'], factory) :\n    (global = global || self, factory(global.FullCalendarTimeGrid = {}, global.FullCalendar, global.FullCalendarDayGrid));\n}(this, function (exports, core, daygrid) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    /*\n    Only handles foreground segs.\n    Does not own rendering. Use for low-level util methods by TimeGrid.\n    */\n    var TimeGridEventRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridEventRenderer, _super);\n        function TimeGridEventRenderer(timeGrid) {\n            var _this = _super.call(this, timeGrid.context) || this;\n            _this.timeGrid = timeGrid;\n            _this.fullTimeFormat = core.createFormatter({\n                hour: 'numeric',\n                minute: '2-digit',\n                separator: _this.context.options.defaultRangeSeparator\n            });\n            return _this;\n        }\n        // Given an array of foreground segments, render a DOM element for each, computes position,\n        // and attaches to the column inner-container elements.\n        TimeGridEventRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            var segsByCol = this.timeGrid.groupSegsByCol(segs);\n            // order the segs within each column\n            // TODO: have groupSegsByCol do this?\n            for (var col = 0; col < segsByCol.length; col++) {\n                segsByCol[col] = this.sortEventSegs(segsByCol[col]);\n            }\n            this.segsByCol = segsByCol;\n            this.timeGrid.attachSegsByCol(segsByCol, this.timeGrid.fgContainerEls);\n        };\n        TimeGridEventRenderer.prototype.detachSegs = function (segs) {\n            segs.forEach(function (seg) {\n                core.removeElement(seg.el);\n            });\n            this.segsByCol = null;\n        };\n        TimeGridEventRenderer.prototype.computeSegSizes = function (allSegs) {\n            var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n            var colCnt = timeGrid.colCnt;\n            timeGrid.computeSegVerticals(allSegs); // horizontals relies on this\n            if (segsByCol) {\n                for (var col = 0; col < colCnt; col++) {\n                    this.computeSegHorizontals(segsByCol[col]); // compute horizontal coordinates, z-index's, and reorder the array\n                }\n            }\n        };\n        TimeGridEventRenderer.prototype.assignSegSizes = function (allSegs) {\n            var _a = this, timeGrid = _a.timeGrid, segsByCol = _a.segsByCol;\n            var colCnt = timeGrid.colCnt;\n            timeGrid.assignSegVerticals(allSegs); // horizontals relies on this\n            if (segsByCol) {\n                for (var col = 0; col < colCnt; col++) {\n                    this.assignSegCss(segsByCol[col]);\n                }\n            }\n        };\n        // Computes a default event time formatting string if `eventTimeFormat` is not explicitly defined\n        TimeGridEventRenderer.prototype.computeEventTimeFormat = function () {\n            return {\n                hour: 'numeric',\n                minute: '2-digit',\n                meridiem: false\n            };\n        };\n        // Computes a default `displayEventEnd` value if one is not expliclty defined\n        TimeGridEventRenderer.prototype.computeDisplayEventEnd = function () {\n            return true;\n        };\n        // Renders the HTML for a single event segment's default rendering\n        TimeGridEventRenderer.prototype.renderSegHtml = function (seg, mirrorInfo) {\n            var eventRange = seg.eventRange;\n            var eventDef = eventRange.def;\n            var eventUi = eventRange.ui;\n            var allDay = eventDef.allDay;\n            var isDraggable = eventUi.startEditable;\n            var isResizableFromStart = seg.isStart && eventUi.durationEditable && this.context.options.eventResizableFromStart;\n            var isResizableFromEnd = seg.isEnd && eventUi.durationEditable;\n            var classes = this.getSegClasses(seg, isDraggable, isResizableFromStart || isResizableFromEnd, mirrorInfo);\n            var skinCss = core.cssToStr(this.getSkinCss(eventUi));\n            var timeText;\n            var fullTimeText; // more verbose time text. for the print stylesheet\n            var startTimeText; // just the start time text\n            classes.unshift('fc-time-grid-event');\n            // if the event appears to span more than one day...\n            if (core.isMultiDayRange(eventRange.range)) {\n                // Don't display time text on segments that run entirely through a day.\n                // That would appear as midnight-midnight and would look dumb.\n                // Otherwise, display the time text for the *segment's* times (like 6pm-midnight or midnight-10am)\n                if (seg.isStart || seg.isEnd) {\n                    var unzonedStart = seg.start;\n                    var unzonedEnd = seg.end;\n                    timeText = this._getTimeText(unzonedStart, unzonedEnd, allDay); // TODO: give the timezones\n                    fullTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, this.fullTimeFormat);\n                    startTimeText = this._getTimeText(unzonedStart, unzonedEnd, allDay, null, false); // displayEnd=false\n                }\n            }\n            else {\n                // Display the normal time text for the *event's* times\n                timeText = this.getTimeText(eventRange);\n                fullTimeText = this.getTimeText(eventRange, this.fullTimeFormat);\n                startTimeText = this.getTimeText(eventRange, null, false); // displayEnd=false\n            }\n            return '<a class=\"' + classes.join(' ') + '\"' +\n                (eventDef.url ?\n                    ' href=\"' + core.htmlEscape(eventDef.url) + '\"' :\n                    '') +\n                (skinCss ?\n                    ' style=\"' + skinCss + '\"' :\n                    '') +\n                '>' +\n                '<div class=\"fc-content\">' +\n                (timeText ?\n                    '<div class=\"fc-time\"' +\n                        ' data-start=\"' + core.htmlEscape(startTimeText) + '\"' +\n                        ' data-full=\"' + core.htmlEscape(fullTimeText) + '\"' +\n                        '>' +\n                        '<span>' + core.htmlEscape(timeText) + '</span>' +\n                        '</div>' :\n                    '') +\n                (eventDef.title ?\n                    '<div class=\"fc-title\">' +\n                        core.htmlEscape(eventDef.title) +\n                        '</div>' :\n                    '') +\n                '</div>' +\n                /* TODO: write CSS for this\n                (isResizableFromStart ?\n                  '<div class=\"fc-resizer fc-start-resizer\"></div>' :\n                  ''\n                  ) +\n                */\n                (isResizableFromEnd ?\n                    '<div class=\"fc-resizer fc-end-resizer\"></div>' :\n                    '') +\n                '</a>';\n        };\n        // Given an array of segments that are all in the same column, sets the backwardCoord and forwardCoord on each.\n        // Assumed the segs are already ordered.\n        // NOTE: Also reorders the given array by date!\n        TimeGridEventRenderer.prototype.computeSegHorizontals = function (segs) {\n            var levels;\n            var level0;\n            var i;\n            levels = buildSlotSegLevels(segs);\n            computeForwardSlotSegs(levels);\n            if ((level0 = levels[0])) {\n                for (i = 0; i < level0.length; i++) {\n                    computeSlotSegPressures(level0[i]);\n                }\n                for (i = 0; i < level0.length; i++) {\n                    this.computeSegForwardBack(level0[i], 0, 0);\n                }\n            }\n        };\n        // Calculate seg.forwardCoord and seg.backwardCoord for the segment, where both values range\n        // from 0 to 1. If the calendar is left-to-right, the seg.backwardCoord maps to \"left\" and\n        // seg.forwardCoord maps to \"right\" (via percentage). Vice-versa if the calendar is right-to-left.\n        //\n        // The segment might be part of a \"series\", which means consecutive segments with the same pressure\n        // who's width is unknown until an edge has been hit. `seriesBackwardPressure` is the number of\n        // segments behind this one in the current series, and `seriesBackwardCoord` is the starting\n        // coordinate of the first segment in the series.\n        TimeGridEventRenderer.prototype.computeSegForwardBack = function (seg, seriesBackwardPressure, seriesBackwardCoord) {\n            var forwardSegs = seg.forwardSegs;\n            var i;\n            if (seg.forwardCoord === undefined) { // not already computed\n                if (!forwardSegs.length) {\n                    // if there are no forward segments, this segment should butt up against the edge\n                    seg.forwardCoord = 1;\n                }\n                else {\n                    // sort highest pressure first\n                    this.sortForwardSegs(forwardSegs);\n                    // this segment's forwardCoord will be calculated from the backwardCoord of the\n                    // highest-pressure forward segment.\n                    this.computeSegForwardBack(forwardSegs[0], seriesBackwardPressure + 1, seriesBackwardCoord);\n                    seg.forwardCoord = forwardSegs[0].backwardCoord;\n                }\n                // calculate the backwardCoord from the forwardCoord. consider the series\n                seg.backwardCoord = seg.forwardCoord -\n                    (seg.forwardCoord - seriesBackwardCoord) / // available width for series\n                        (seriesBackwardPressure + 1); // # of segments in the series\n                // use this segment's coordinates to computed the coordinates of the less-pressurized\n                // forward segments\n                for (i = 0; i < forwardSegs.length; i++) {\n                    this.computeSegForwardBack(forwardSegs[i], 0, seg.forwardCoord);\n                }\n            }\n        };\n        TimeGridEventRenderer.prototype.sortForwardSegs = function (forwardSegs) {\n            var objs = forwardSegs.map(buildTimeGridSegCompareObj);\n            var specs = [\n                // put higher-pressure first\n                { field: 'forwardPressure', order: -1 },\n                // put segments that are closer to initial edge first (and favor ones with no coords yet)\n                { field: 'backwardCoord', order: 1 }\n            ].concat(this.context.view.eventOrderSpecs);\n            objs.sort(function (obj0, obj1) {\n                return core.compareByFieldSpecs(obj0, obj1, specs);\n            });\n            return objs.map(function (c) {\n                return c._seg;\n            });\n        };\n        // Given foreground event segments that have already had their position coordinates computed,\n        // assigns position-related CSS values to their elements.\n        TimeGridEventRenderer.prototype.assignSegCss = function (segs) {\n            for (var _i = 0, segs_1 = segs; _i < segs_1.length; _i++) {\n                var seg = segs_1[_i];\n                core.applyStyle(seg.el, this.generateSegCss(seg));\n                if (seg.level > 0) {\n                    seg.el.classList.add('fc-time-grid-event-inset');\n                }\n                // if the event is short that the title will be cut off,\n                // attach a className that condenses the title into the time area.\n                if (seg.eventRange.def.title && seg.bottom - seg.top < 30) {\n                    seg.el.classList.add('fc-short'); // TODO: \"condensed\" is a better name\n                }\n            }\n        };\n        // Generates an object with CSS properties/values that should be applied to an event segment element.\n        // Contains important positioning-related properties that should be applied to any event element, customized or not.\n        TimeGridEventRenderer.prototype.generateSegCss = function (seg) {\n            var shouldOverlap = this.context.options.slotEventOverlap;\n            var backwardCoord = seg.backwardCoord; // the left side if LTR. the right side if RTL. floating-point\n            var forwardCoord = seg.forwardCoord; // the right side if LTR. the left side if RTL. floating-point\n            var props = this.timeGrid.generateSegVerticalCss(seg); // get top/bottom first\n            var isRtl = this.timeGrid.isRtl;\n            var left; // amount of space from left edge, a fraction of the total width\n            var right; // amount of space from right edge, a fraction of the total width\n            if (shouldOverlap) {\n                // double the width, but don't go beyond the maximum forward coordinate (1.0)\n                forwardCoord = Math.min(1, backwardCoord + (forwardCoord - backwardCoord) * 2);\n            }\n            if (isRtl) {\n                left = 1 - forwardCoord;\n                right = backwardCoord;\n            }\n            else {\n                left = backwardCoord;\n                right = 1 - forwardCoord;\n            }\n            props.zIndex = seg.level + 1; // convert from 0-base to 1-based\n            props.left = left * 100 + '%';\n            props.right = right * 100 + '%';\n            if (shouldOverlap && seg.forwardPressure) {\n                // add padding to the edge so that forward stacked events don't cover the resizer's icon\n                props[isRtl ? 'marginLeft' : 'marginRight'] = 10 * 2; // 10 is a guesstimate of the icon's width\n            }\n            return props;\n        };\n        return TimeGridEventRenderer;\n    }(core.FgEventRenderer));\n    // Builds an array of segments \"levels\". The first level will be the leftmost tier of segments if the calendar is\n    // left-to-right, or the rightmost if the calendar is right-to-left. Assumes the segments are already ordered by date.\n    function buildSlotSegLevels(segs) {\n        var levels = [];\n        var i;\n        var seg;\n        var j;\n        for (i = 0; i < segs.length; i++) {\n            seg = segs[i];\n            // go through all the levels and stop on the first level where there are no collisions\n            for (j = 0; j < levels.length; j++) {\n                if (!computeSlotSegCollisions(seg, levels[j]).length) {\n                    break;\n                }\n            }\n            seg.level = j;\n            (levels[j] || (levels[j] = [])).push(seg);\n        }\n        return levels;\n    }\n    // For every segment, figure out the other segments that are in subsequent\n    // levels that also occupy the same vertical space. Accumulate in seg.forwardSegs\n    function computeForwardSlotSegs(levels) {\n        var i;\n        var level;\n        var j;\n        var seg;\n        var k;\n        for (i = 0; i < levels.length; i++) {\n            level = levels[i];\n            for (j = 0; j < level.length; j++) {\n                seg = level[j];\n                seg.forwardSegs = [];\n                for (k = i + 1; k < levels.length; k++) {\n                    computeSlotSegCollisions(seg, levels[k], seg.forwardSegs);\n                }\n            }\n        }\n    }\n    // Figure out which path forward (via seg.forwardSegs) results in the longest path until\n    // the furthest edge is reached. The number of segments in this path will be seg.forwardPressure\n    function computeSlotSegPressures(seg) {\n        var forwardSegs = seg.forwardSegs;\n        var forwardPressure = 0;\n        var i;\n        var forwardSeg;\n        if (seg.forwardPressure === undefined) { // not already computed\n            for (i = 0; i < forwardSegs.length; i++) {\n                forwardSeg = forwardSegs[i];\n                // figure out the child's maximum forward path\n                computeSlotSegPressures(forwardSeg);\n                // either use the existing maximum, or use the child's forward pressure\n                // plus one (for the forwardSeg itself)\n                forwardPressure = Math.max(forwardPressure, 1 + forwardSeg.forwardPressure);\n            }\n            seg.forwardPressure = forwardPressure;\n        }\n    }\n    // Find all the segments in `otherSegs` that vertically collide with `seg`.\n    // Append into an optionally-supplied `results` array and return.\n    function computeSlotSegCollisions(seg, otherSegs, results) {\n        if (results === void 0) { results = []; }\n        for (var i = 0; i < otherSegs.length; i++) {\n            if (isSlotSegCollision(seg, otherSegs[i])) {\n                results.push(otherSegs[i]);\n            }\n        }\n        return results;\n    }\n    // Do these segments occupy the same vertical space?\n    function isSlotSegCollision(seg1, seg2) {\n        return seg1.bottom > seg2.top && seg1.top < seg2.bottom;\n    }\n    function buildTimeGridSegCompareObj(seg) {\n        var obj = core.buildSegCompareObj(seg);\n        obj.forwardPressure = seg.forwardPressure;\n        obj.backwardCoord = seg.backwardCoord;\n        return obj;\n    }\n\n    var TimeGridMirrorRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridMirrorRenderer, _super);\n        function TimeGridMirrorRenderer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TimeGridMirrorRenderer.prototype.attachSegs = function (segs, mirrorInfo) {\n            this.segsByCol = this.timeGrid.groupSegsByCol(segs);\n            this.timeGrid.attachSegsByCol(this.segsByCol, this.timeGrid.mirrorContainerEls);\n            this.sourceSeg = mirrorInfo.sourceSeg;\n        };\n        TimeGridMirrorRenderer.prototype.generateSegCss = function (seg) {\n            var props = _super.prototype.generateSegCss.call(this, seg);\n            var sourceSeg = this.sourceSeg;\n            if (sourceSeg && sourceSeg.col === seg.col) {\n                var sourceSegProps = _super.prototype.generateSegCss.call(this, sourceSeg);\n                props.left = sourceSegProps.left;\n                props.right = sourceSegProps.right;\n                props.marginLeft = sourceSegProps.marginLeft;\n                props.marginRight = sourceSegProps.marginRight;\n            }\n            return props;\n        };\n        return TimeGridMirrorRenderer;\n    }(TimeGridEventRenderer));\n\n    var TimeGridFillRenderer = /** @class */ (function (_super) {\n        __extends(TimeGridFillRenderer, _super);\n        function TimeGridFillRenderer(timeGrid) {\n            var _this = _super.call(this, timeGrid.context) || this;\n            _this.timeGrid = timeGrid;\n            return _this;\n        }\n        TimeGridFillRenderer.prototype.attachSegs = function (type, segs) {\n            var timeGrid = this.timeGrid;\n            var containerEls;\n            // TODO: more efficient lookup\n            if (type === 'bgEvent') {\n                containerEls = timeGrid.bgContainerEls;\n            }\n            else if (type === 'businessHours') {\n                containerEls = timeGrid.businessContainerEls;\n            }\n            else if (type === 'highlight') {\n                containerEls = timeGrid.highlightContainerEls;\n            }\n            timeGrid.attachSegsByCol(timeGrid.groupSegsByCol(segs), containerEls);\n            return segs.map(function (seg) {\n                return seg.el;\n            });\n        };\n        TimeGridFillRenderer.prototype.computeSegSizes = function (segs) {\n            this.timeGrid.computeSegVerticals(segs);\n        };\n        TimeGridFillRenderer.prototype.assignSegSizes = function (segs) {\n            this.timeGrid.assignSegVerticals(segs);\n        };\n        return TimeGridFillRenderer;\n    }(core.FillRenderer));\n\n    /* A component that renders one or more columns of vertical time slots\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // potential nice values for the slot-duration and interval-duration\n    // from largest to smallest\n    var AGENDA_STOCK_SUB_DURATIONS = [\n        { hours: 1 },\n        { minutes: 30 },\n        { minutes: 15 },\n        { seconds: 30 },\n        { seconds: 15 }\n    ];\n    var TimeGrid = /** @class */ (function (_super) {\n        __extends(TimeGrid, _super);\n        function TimeGrid(context, el, renderProps) {\n            var _this = _super.call(this, context, el) || this;\n            _this.isSlatSizesDirty = false;\n            _this.isColSizesDirty = false;\n            _this.renderSlats = core.memoizeRendering(_this._renderSlats);\n            var eventRenderer = _this.eventRenderer = new TimeGridEventRenderer(_this);\n            var fillRenderer = _this.fillRenderer = new TimeGridFillRenderer(_this);\n            _this.mirrorRenderer = new TimeGridMirrorRenderer(_this);\n            var renderColumns = _this.renderColumns = core.memoizeRendering(_this._renderColumns, _this._unrenderColumns);\n            _this.renderBusinessHours = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'businessHours'), fillRenderer.unrender.bind(fillRenderer, 'businessHours'), [renderColumns]);\n            _this.renderDateSelection = core.memoizeRendering(_this._renderDateSelection, _this._unrenderDateSelection, [renderColumns]);\n            _this.renderFgEvents = core.memoizeRendering(eventRenderer.renderSegs.bind(eventRenderer), eventRenderer.unrender.bind(eventRenderer), [renderColumns]);\n            _this.renderBgEvents = core.memoizeRendering(fillRenderer.renderSegs.bind(fillRenderer, 'bgEvent'), fillRenderer.unrender.bind(fillRenderer, 'bgEvent'), [renderColumns]);\n            _this.renderEventSelection = core.memoizeRendering(eventRenderer.selectByInstanceId.bind(eventRenderer), eventRenderer.unselectByInstanceId.bind(eventRenderer), [_this.renderFgEvents]);\n            _this.renderEventDrag = core.memoizeRendering(_this._renderEventDrag, _this._unrenderEventDrag, [renderColumns]);\n            _this.renderEventResize = core.memoizeRendering(_this._renderEventResize, _this._unrenderEventResize, [renderColumns]);\n            _this.processOptions();\n            el.innerHTML =\n                '<div class=\"fc-bg\"></div>' +\n                    '<div class=\"fc-slats\"></div>' +\n                    '<hr class=\"fc-divider ' + _this.theme.getClass('widgetHeader') + '\" style=\"display:none\" />';\n            _this.rootBgContainerEl = el.querySelector('.fc-bg');\n            _this.slatContainerEl = el.querySelector('.fc-slats');\n            _this.bottomRuleEl = el.querySelector('.fc-divider');\n            _this.renderProps = renderProps;\n            return _this;\n        }\n        /* Options\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Parses various options into properties of this object\n        TimeGrid.prototype.processOptions = function () {\n            var slotDuration = this.opt('slotDuration');\n            var snapDuration = this.opt('snapDuration');\n            var snapsPerSlot;\n            var input;\n            slotDuration = core.createDuration(slotDuration);\n            snapDuration = snapDuration ? core.createDuration(snapDuration) : slotDuration;\n            snapsPerSlot = core.wholeDivideDurations(slotDuration, snapDuration);\n            if (snapsPerSlot === null) {\n                snapDuration = slotDuration;\n                snapsPerSlot = 1;\n                // TODO: say warning?\n            }\n            this.slotDuration = slotDuration;\n            this.snapDuration = snapDuration;\n            this.snapsPerSlot = snapsPerSlot;\n            // might be an array value (for TimelineView).\n            // if so, getting the most granular entry (the last one probably).\n            input = this.opt('slotLabelFormat');\n            if (Array.isArray(input)) {\n                input = input[input.length - 1];\n            }\n            this.labelFormat = core.createFormatter(input || {\n                hour: 'numeric',\n                minute: '2-digit',\n                omitZeroMinute: true,\n                meridiem: 'short'\n            });\n            input = this.opt('slotLabelInterval');\n            this.labelInterval = input ?\n                core.createDuration(input) :\n                this.computeLabelInterval(slotDuration);\n        };\n        // Computes an automatic value for slotLabelInterval\n        TimeGrid.prototype.computeLabelInterval = function (slotDuration) {\n            var i;\n            var labelInterval;\n            var slotsPerLabel;\n            // find the smallest stock label interval that results in more than one slots-per-label\n            for (i = AGENDA_STOCK_SUB_DURATIONS.length - 1; i >= 0; i--) {\n                labelInterval = core.createDuration(AGENDA_STOCK_SUB_DURATIONS[i]);\n                slotsPerLabel = core.wholeDivideDurations(labelInterval, slotDuration);\n                if (slotsPerLabel !== null && slotsPerLabel > 1) {\n                    return labelInterval;\n                }\n            }\n            return slotDuration; // fall back\n        };\n        /* Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.render = function (props) {\n            var cells = props.cells;\n            this.colCnt = cells.length;\n            this.renderSlats(props.dateProfile);\n            this.renderColumns(props.cells, props.dateProfile);\n            this.renderBusinessHours(props.businessHourSegs);\n            this.renderDateSelection(props.dateSelectionSegs);\n            this.renderFgEvents(props.fgEventSegs);\n            this.renderBgEvents(props.bgEventSegs);\n            this.renderEventSelection(props.eventSelection);\n            this.renderEventDrag(props.eventDrag);\n            this.renderEventResize(props.eventResize);\n        };\n        TimeGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            // should unrender everything else too\n            this.renderSlats.unrender();\n            this.renderColumns.unrender();\n        };\n        TimeGrid.prototype.updateSize = function (isResize) {\n            var _a = this, fillRenderer = _a.fillRenderer, eventRenderer = _a.eventRenderer, mirrorRenderer = _a.mirrorRenderer;\n            if (isResize || this.isSlatSizesDirty) {\n                this.buildSlatPositions();\n                this.isSlatSizesDirty = false;\n            }\n            if (isResize || this.isColSizesDirty) {\n                this.buildColPositions();\n                this.isColSizesDirty = false;\n            }\n            fillRenderer.computeSizes(isResize);\n            eventRenderer.computeSizes(isResize);\n            mirrorRenderer.computeSizes(isResize);\n            fillRenderer.assignSizes(isResize);\n            eventRenderer.assignSizes(isResize);\n            mirrorRenderer.assignSizes(isResize);\n        };\n        TimeGrid.prototype._renderSlats = function (dateProfile) {\n            var theme = this.theme;\n            this.slatContainerEl.innerHTML =\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                    this.renderSlatRowHtml(dateProfile) +\n                    '</table>';\n            this.slatEls = core.findElements(this.slatContainerEl, 'tr');\n            this.slatPositions = new core.PositionCache(this.el, this.slatEls, false, true // vertical\n            );\n            this.isSlatSizesDirty = true;\n        };\n        // Generates the HTML for the horizontal \"slats\" that run width-wise. Has a time axis on a side. Depends on RTL.\n        TimeGrid.prototype.renderSlatRowHtml = function (dateProfile) {\n            var _a = this, dateEnv = _a.dateEnv, theme = _a.theme, isRtl = _a.isRtl;\n            var html = '';\n            var dayStart = core.startOfDay(dateProfile.renderRange.start);\n            var slotTime = dateProfile.minTime;\n            var slotIterator = core.createDuration(0);\n            var slotDate; // will be on the view's first day, but we only care about its time\n            var isLabeled;\n            var axisHtml;\n            // Calculate the time for each slot\n            while (core.asRoughMs(slotTime) < core.asRoughMs(dateProfile.maxTime)) {\n                slotDate = dateEnv.add(dayStart, slotTime);\n                isLabeled = core.wholeDivideDurations(slotIterator, this.labelInterval) !== null;\n                axisHtml =\n                    '<td class=\"fc-axis fc-time ' + theme.getClass('widgetContent') + '\">' +\n                        (isLabeled ?\n                            '<span>' + // for matchCellWidths\n                                core.htmlEscape(dateEnv.format(slotDate, this.labelFormat)) +\n                                '</span>' :\n                            '') +\n                        '</td>';\n                html +=\n                    '<tr data-time=\"' + core.formatIsoTimeString(slotDate) + '\"' +\n                        (isLabeled ? '' : ' class=\"fc-minor\"') +\n                        '>' +\n                        (!isRtl ? axisHtml : '') +\n                        '<td class=\"' + theme.getClass('widgetContent') + '\"></td>' +\n                        (isRtl ? axisHtml : '') +\n                        '</tr>';\n                slotTime = core.addDurations(slotTime, this.slotDuration);\n                slotIterator = core.addDurations(slotIterator, this.slotDuration);\n            }\n            return html;\n        };\n        TimeGrid.prototype._renderColumns = function (cells, dateProfile) {\n            var _a = this, theme = _a.theme, dateEnv = _a.dateEnv, view = _a.view;\n            var bgRow = new daygrid.DayBgRow(this.context);\n            this.rootBgContainerEl.innerHTML =\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                    bgRow.renderHtml({\n                        cells: cells,\n                        dateProfile: dateProfile,\n                        renderIntroHtml: this.renderProps.renderBgIntroHtml\n                    }) +\n                    '</table>';\n            this.colEls = core.findElements(this.el, '.fc-day, .fc-disabled-day');\n            for (var col = 0; col < this.colCnt; col++) {\n                this.publiclyTrigger('dayRender', [\n                    {\n                        date: dateEnv.toDate(cells[col].date),\n                        el: this.colEls[col],\n                        view: view\n                    }\n                ]);\n            }\n            if (this.isRtl) {\n                this.colEls.reverse();\n            }\n            this.colPositions = new core.PositionCache(this.el, this.colEls, true, // horizontal\n            false);\n            this.renderContentSkeleton();\n            this.isColSizesDirty = true;\n        };\n        TimeGrid.prototype._unrenderColumns = function () {\n            this.unrenderContentSkeleton();\n        };\n        /* Content Skeleton\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Renders the DOM that the view's content will live in\n        TimeGrid.prototype.renderContentSkeleton = function () {\n            var parts = [];\n            var skeletonEl;\n            parts.push(this.renderProps.renderIntroHtml());\n            for (var i = 0; i < this.colCnt; i++) {\n                parts.push('<td>' +\n                    '<div class=\"fc-content-col\">' +\n                    '<div class=\"fc-event-container fc-mirror-container\"></div>' +\n                    '<div class=\"fc-event-container\"></div>' +\n                    '<div class=\"fc-highlight-container\"></div>' +\n                    '<div class=\"fc-bgevent-container\"></div>' +\n                    '<div class=\"fc-business-container\"></div>' +\n                    '</div>' +\n                    '</td>');\n            }\n            if (this.isRtl) {\n                parts.reverse();\n            }\n            skeletonEl = this.contentSkeletonEl = core.htmlToElement('<div class=\"fc-content-skeleton\">' +\n                '<table>' +\n                '<tr>' + parts.join('') + '</tr>' +\n                '</table>' +\n                '</div>');\n            this.colContainerEls = core.findElements(skeletonEl, '.fc-content-col');\n            this.mirrorContainerEls = core.findElements(skeletonEl, '.fc-mirror-container');\n            this.fgContainerEls = core.findElements(skeletonEl, '.fc-event-container:not(.fc-mirror-container)');\n            this.bgContainerEls = core.findElements(skeletonEl, '.fc-bgevent-container');\n            this.highlightContainerEls = core.findElements(skeletonEl, '.fc-highlight-container');\n            this.businessContainerEls = core.findElements(skeletonEl, '.fc-business-container');\n            if (this.isRtl) {\n                this.colContainerEls.reverse();\n                this.mirrorContainerEls.reverse();\n                this.fgContainerEls.reverse();\n                this.bgContainerEls.reverse();\n                this.highlightContainerEls.reverse();\n                this.businessContainerEls.reverse();\n            }\n            this.el.appendChild(skeletonEl);\n        };\n        TimeGrid.prototype.unrenderContentSkeleton = function () {\n            core.removeElement(this.contentSkeletonEl);\n        };\n        // Given a flat array of segments, return an array of sub-arrays, grouped by each segment's col\n        TimeGrid.prototype.groupSegsByCol = function (segs) {\n            var segsByCol = [];\n            var i;\n            for (i = 0; i < this.colCnt; i++) {\n                segsByCol.push([]);\n            }\n            for (i = 0; i < segs.length; i++) {\n                segsByCol[segs[i].col].push(segs[i]);\n            }\n            return segsByCol;\n        };\n        // Given segments grouped by column, insert the segments' elements into a parallel array of container\n        // elements, each living within a column.\n        TimeGrid.prototype.attachSegsByCol = function (segsByCol, containerEls) {\n            var col;\n            var segs;\n            var i;\n            for (col = 0; col < this.colCnt; col++) { // iterate each column grouping\n                segs = segsByCol[col];\n                for (i = 0; i < segs.length; i++) {\n                    containerEls[col].appendChild(segs[i].el);\n                }\n            }\n        };\n        /* Now Indicator\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.getNowIndicatorUnit = function () {\n            return 'minute'; // will refresh on the minute\n        };\n        TimeGrid.prototype.renderNowIndicator = function (segs, date) {\n            // HACK: if date columns not ready for some reason (scheduler)\n            if (!this.colContainerEls) {\n                return;\n            }\n            var top = this.computeDateTop(date);\n            var nodes = [];\n            var i;\n            // render lines within the columns\n            for (i = 0; i < segs.length; i++) {\n                var lineEl = core.createElement('div', { className: 'fc-now-indicator fc-now-indicator-line' });\n                lineEl.style.top = top + 'px';\n                this.colContainerEls[segs[i].col].appendChild(lineEl);\n                nodes.push(lineEl);\n            }\n            // render an arrow over the axis\n            if (segs.length > 0) { // is the current time in view?\n                var arrowEl = core.createElement('div', { className: 'fc-now-indicator fc-now-indicator-arrow' });\n                arrowEl.style.top = top + 'px';\n                this.contentSkeletonEl.appendChild(arrowEl);\n                nodes.push(arrowEl);\n            }\n            this.nowIndicatorEls = nodes;\n        };\n        TimeGrid.prototype.unrenderNowIndicator = function () {\n            if (this.nowIndicatorEls) {\n                this.nowIndicatorEls.forEach(core.removeElement);\n                this.nowIndicatorEls = null;\n            }\n        };\n        /* Coordinates\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.getTotalSlatHeight = function () {\n            return this.slatContainerEl.offsetHeight;\n        };\n        // Computes the top coordinate, relative to the bounds of the grid, of the given date.\n        // A `startOfDayDate` must be given for avoiding ambiguity over how to treat midnight.\n        TimeGrid.prototype.computeDateTop = function (when, startOfDayDate) {\n            if (!startOfDayDate) {\n                startOfDayDate = core.startOfDay(when);\n            }\n            return this.computeTimeTop(when.valueOf() - startOfDayDate.valueOf());\n        };\n        // Computes the top coordinate, relative to the bounds of the grid, of the given time (a Duration).\n        TimeGrid.prototype.computeTimeTop = function (timeMs) {\n            var len = this.slatEls.length;\n            var dateProfile = this.props.dateProfile;\n            var slatCoverage = (timeMs - core.asRoughMs(dateProfile.minTime)) / core.asRoughMs(this.slotDuration); // floating-point value of # of slots covered\n            var slatIndex;\n            var slatRemainder;\n            // compute a floating-point number for how many slats should be progressed through.\n            // from 0 to number of slats (inclusive)\n            // constrained because minTime/maxTime might be customized.\n            slatCoverage = Math.max(0, slatCoverage);\n            slatCoverage = Math.min(len, slatCoverage);\n            // an integer index of the furthest whole slat\n            // from 0 to number slats (*exclusive*, so len-1)\n            slatIndex = Math.floor(slatCoverage);\n            slatIndex = Math.min(slatIndex, len - 1);\n            // how much further through the slatIndex slat (from 0.0-1.0) must be covered in addition.\n            // could be 1.0 if slatCoverage is covering *all* the slots\n            slatRemainder = slatCoverage - slatIndex;\n            return this.slatPositions.tops[slatIndex] +\n                this.slatPositions.getHeight(slatIndex) * slatRemainder;\n        };\n        // For each segment in an array, computes and assigns its top and bottom properties\n        TimeGrid.prototype.computeSegVerticals = function (segs) {\n            var eventMinHeight = this.opt('timeGridEventMinHeight');\n            var i;\n            var seg;\n            var dayDate;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                dayDate = this.props.cells[seg.col].date;\n                seg.top = this.computeDateTop(seg.start, dayDate);\n                seg.bottom = Math.max(seg.top + eventMinHeight, this.computeDateTop(seg.end, dayDate));\n            }\n        };\n        // Given segments that already have their top/bottom properties computed, applies those values to\n        // the segments' elements.\n        TimeGrid.prototype.assignSegVerticals = function (segs) {\n            var i;\n            var seg;\n            for (i = 0; i < segs.length; i++) {\n                seg = segs[i];\n                core.applyStyle(seg.el, this.generateSegVerticalCss(seg));\n            }\n        };\n        // Generates an object with CSS properties for the top/bottom coordinates of a segment element\n        TimeGrid.prototype.generateSegVerticalCss = function (seg) {\n            return {\n                top: seg.top,\n                bottom: -seg.bottom // flipped because needs to be space beyond bottom edge of event container\n            };\n        };\n        /* Sizing\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.buildPositionCaches = function () {\n            this.buildColPositions();\n            this.buildSlatPositions();\n        };\n        TimeGrid.prototype.buildColPositions = function () {\n            this.colPositions.build();\n        };\n        TimeGrid.prototype.buildSlatPositions = function () {\n            this.slatPositions.build();\n        };\n        /* Hit System\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype.positionToHit = function (positionLeft, positionTop) {\n            var _a = this, dateEnv = _a.dateEnv, snapsPerSlot = _a.snapsPerSlot, slatPositions = _a.slatPositions, colPositions = _a.colPositions;\n            var colIndex = colPositions.leftToIndex(positionLeft);\n            var slatIndex = slatPositions.topToIndex(positionTop);\n            if (colIndex != null && slatIndex != null) {\n                var slatTop = slatPositions.tops[slatIndex];\n                var slatHeight = slatPositions.getHeight(slatIndex);\n                var partial = (positionTop - slatTop) / slatHeight; // floating point number between 0 and 1\n                var localSnapIndex = Math.floor(partial * snapsPerSlot); // the snap # relative to start of slat\n                var snapIndex = slatIndex * snapsPerSlot + localSnapIndex;\n                var dayDate = this.props.cells[colIndex].date;\n                var time = core.addDurations(this.props.dateProfile.minTime, core.multiplyDuration(this.snapDuration, snapIndex));\n                var start = dateEnv.add(dayDate, time);\n                var end = dateEnv.add(start, this.snapDuration);\n                return {\n                    col: colIndex,\n                    dateSpan: {\n                        range: { start: start, end: end },\n                        allDay: false\n                    },\n                    dayEl: this.colEls[colIndex],\n                    relativeRect: {\n                        left: colPositions.lefts[colIndex],\n                        right: colPositions.rights[colIndex],\n                        top: slatTop,\n                        bottom: slatTop + slatHeight\n                    }\n                };\n            }\n        };\n        /* Event Drag Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype._renderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                if (state.isEvent) {\n                    this.mirrorRenderer.renderSegs(state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n                }\n                else {\n                    this.fillRenderer.renderSegs('highlight', state.segs);\n                }\n            }\n        };\n        TimeGrid.prototype._unrenderEventDrag = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.mirrorRenderer.unrender(state.segs, { isDragging: true, sourceSeg: state.sourceSeg });\n                this.fillRenderer.unrender('highlight');\n            }\n        };\n        /* Event Resize Visualization\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGrid.prototype._renderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.hideByHash(state.affectedInstances);\n                this.mirrorRenderer.renderSegs(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        TimeGrid.prototype._unrenderEventResize = function (state) {\n            if (state) {\n                this.eventRenderer.showByHash(state.affectedInstances);\n                this.mirrorRenderer.unrender(state.segs, { isResizing: true, sourceSeg: state.sourceSeg });\n            }\n        };\n        /* Selection\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Renders a visual indication of a selection. Overrides the default, which was to simply render a highlight.\n        TimeGrid.prototype._renderDateSelection = function (segs) {\n            if (segs) {\n                if (this.opt('selectMirror')) {\n                    this.mirrorRenderer.renderSegs(segs, { isSelecting: true });\n                }\n                else {\n                    this.fillRenderer.renderSegs('highlight', segs);\n                }\n            }\n        };\n        TimeGrid.prototype._unrenderDateSelection = function (segs) {\n            this.mirrorRenderer.unrender(segs, { isSelecting: true });\n            this.fillRenderer.unrender('highlight');\n        };\n        return TimeGrid;\n    }(core.DateComponent));\n\n    var AllDaySplitter = /** @class */ (function (_super) {\n        __extends(AllDaySplitter, _super);\n        function AllDaySplitter() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        AllDaySplitter.prototype.getKeyInfo = function () {\n            return {\n                allDay: {},\n                timed: {}\n            };\n        };\n        AllDaySplitter.prototype.getKeysForDateSpan = function (dateSpan) {\n            if (dateSpan.allDay) {\n                return ['allDay'];\n            }\n            else {\n                return ['timed'];\n            }\n        };\n        AllDaySplitter.prototype.getKeysForEventDef = function (eventDef) {\n            if (!eventDef.allDay) {\n                return ['timed'];\n            }\n            else if (core.hasBgRendering(eventDef)) {\n                return ['timed', 'allDay'];\n            }\n            else {\n                return ['allDay'];\n            }\n        };\n        return AllDaySplitter;\n    }(core.Splitter));\n\n    var TIMEGRID_ALL_DAY_EVENT_LIMIT = 5;\n    var WEEK_HEADER_FORMAT = core.createFormatter({ week: 'short' });\n    /* An abstract class for all timegrid-related views. Displays one more columns with time slots running vertically.\n    ----------------------------------------------------------------------------------------------------------------------*/\n    // Is a manager for the TimeGrid subcomponent and possibly the DayGrid subcomponent (if allDaySlot is on).\n    // Responsible for managing width/height.\n    var TimeGridView = /** @class */ (function (_super) {\n        __extends(TimeGridView, _super);\n        function TimeGridView(context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.splitter = new AllDaySplitter();\n            /* Header Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that will go before the day-of week header cells\n            _this.renderHeadIntroHtml = function () {\n                var _a = _this, theme = _a.theme, dateEnv = _a.dateEnv;\n                var range = _this.props.dateProfile.renderRange;\n                var dayCnt = core.diffDays(range.start, range.end);\n                var weekText;\n                if (_this.opt('weekNumbers')) {\n                    weekText = dateEnv.format(range.start, WEEK_HEADER_FORMAT);\n                    return '' +\n                        '<th class=\"fc-axis fc-week-number ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '>' +\n                        core.buildGotoAnchorHtml(// aside from link, important for matchCellWidths\n                        _this, { date: range.start, type: 'week', forceOff: dayCnt > 1 }, core.htmlEscape(weekText) // inner HTML\n                        ) +\n                        '</th>';\n                }\n                else {\n                    return '<th class=\"fc-axis ' + theme.getClass('widgetHeader') + '\" ' + _this.axisStyleAttr() + '></th>';\n                }\n            };\n            /* Time Grid Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that goes before the bg of the TimeGrid slot area. Long vertical column.\n            _this.renderTimeGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                return '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            // Generates the HTML that goes before all other types of cells.\n            // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n            _this.renderTimeGridIntroHtml = function () {\n                return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            /* Day Grid Render Methods\n            ------------------------------------------------------------------------------------------------------------------*/\n            // Generates the HTML that goes before the all-day cells\n            _this.renderDayGridBgIntroHtml = function () {\n                var theme = _this.theme;\n                return '' +\n                    '<td class=\"fc-axis ' + theme.getClass('widgetContent') + '\" ' + _this.axisStyleAttr() + '>' +\n                    '<span>' + // needed for matchCellWidths\n                    core.getAllDayHtml(_this) +\n                    '</span>' +\n                    '</td>';\n            };\n            // Generates the HTML that goes before all other types of cells.\n            // Affects content-skeleton, mirror-skeleton, highlight-skeleton for both the time-grid and day-grid.\n            _this.renderDayGridIntroHtml = function () {\n                return '<td class=\"fc-axis\" ' + _this.axisStyleAttr() + '></td>';\n            };\n            _this.el.classList.add('fc-timeGrid-view');\n            _this.el.innerHTML = _this.renderSkeletonHtml();\n            _this.scroller = new core.ScrollComponent('hidden', // overflow x\n            'auto' // overflow y\n            );\n            var timeGridWrapEl = _this.scroller.el;\n            _this.el.querySelector('.fc-body > tr > td').appendChild(timeGridWrapEl);\n            timeGridWrapEl.classList.add('fc-time-grid-container');\n            var timeGridEl = core.createElement('div', { className: 'fc-time-grid' });\n            timeGridWrapEl.appendChild(timeGridEl);\n            _this.timeGrid = new TimeGrid(_this.context, timeGridEl, {\n                renderBgIntroHtml: _this.renderTimeGridBgIntroHtml,\n                renderIntroHtml: _this.renderTimeGridIntroHtml\n            });\n            if (_this.opt('allDaySlot')) { // should we display the \"all-day\" area?\n                _this.dayGrid = new daygrid.DayGrid(// the all-day subcomponent of this view\n                _this.context, _this.el.querySelector('.fc-day-grid'), {\n                    renderNumberIntroHtml: _this.renderDayGridIntroHtml,\n                    renderBgIntroHtml: _this.renderDayGridBgIntroHtml,\n                    renderIntroHtml: _this.renderDayGridIntroHtml,\n                    colWeekNumbersVisible: false,\n                    cellWeekNumbersVisible: false\n                });\n                // have the day-grid extend it's coordinate area over the <hr> dividing the two grids\n                _this.dayGrid.bottomCoordPadding = _this.el.querySelector('.fc-divider').offsetHeight;\n            }\n            return _this;\n        }\n        TimeGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.timeGrid.destroy();\n            if (this.dayGrid) {\n                this.dayGrid.destroy();\n            }\n            this.scroller.destroy();\n        };\n        /* Rendering\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Builds the HTML skeleton for the view.\n        // The day-grid and time-grid components will render inside containers defined by this HTML.\n        TimeGridView.prototype.renderSkeletonHtml = function () {\n            var theme = this.theme;\n            return '' +\n                '<table class=\"' + theme.getClass('tableGrid') + '\">' +\n                (this.opt('columnHeader') ?\n                    '<thead class=\"fc-head\">' +\n                        '<tr>' +\n                        '<td class=\"fc-head-container ' + theme.getClass('widgetHeader') + '\">&nbsp;</td>' +\n                        '</tr>' +\n                        '</thead>' :\n                    '') +\n                '<tbody class=\"fc-body\">' +\n                '<tr>' +\n                '<td class=\"' + theme.getClass('widgetContent') + '\">' +\n                (this.opt('allDaySlot') ?\n                    '<div class=\"fc-day-grid\"></div>' +\n                        '<hr class=\"fc-divider ' + theme.getClass('widgetHeader') + '\" />' :\n                    '') +\n                '</td>' +\n                '</tr>' +\n                '</tbody>' +\n                '</table>';\n        };\n        /* Now Indicator\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGridView.prototype.getNowIndicatorUnit = function () {\n            return this.timeGrid.getNowIndicatorUnit();\n        };\n        // subclasses should implement\n        // renderNowIndicator(date: DateMarker) {\n        // }\n        TimeGridView.prototype.unrenderNowIndicator = function () {\n            this.timeGrid.unrenderNowIndicator();\n        };\n        /* Dimensions\n        ------------------------------------------------------------------------------------------------------------------*/\n        TimeGridView.prototype.updateSize = function (isResize, viewHeight, isAuto) {\n            _super.prototype.updateSize.call(this, isResize, viewHeight, isAuto); // will call updateBaseSize. important that executes first\n            this.timeGrid.updateSize(isResize);\n            if (this.dayGrid) {\n                this.dayGrid.updateSize(isResize);\n            }\n        };\n        // Adjusts the vertical dimensions of the view to the specified values\n        TimeGridView.prototype.updateBaseSize = function (isResize, viewHeight, isAuto) {\n            var _this = this;\n            var eventLimit;\n            var scrollerHeight;\n            var scrollbarWidths;\n            // make all axis cells line up\n            this.axisWidth = core.matchCellWidths(core.findElements(this.el, '.fc-axis'));\n            // hack to give the view some height prior to timeGrid's columns being rendered\n            // TODO: separate setting height from scroller VS timeGrid.\n            if (!this.timeGrid.colEls) {\n                if (!isAuto) {\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                return;\n            }\n            // set of fake row elements that must compensate when scroller has scrollbars\n            var noScrollRowEls = core.findElements(this.el, '.fc-row').filter(function (node) {\n                return !_this.scroller.el.contains(node);\n            });\n            // reset all dimensions back to the original state\n            this.timeGrid.bottomRuleEl.style.display = 'none'; // will be shown later if this <hr> is necessary\n            this.scroller.clear(); // sets height to 'auto' and clears overflow\n            noScrollRowEls.forEach(core.uncompensateScroll);\n            // limit number of events in the all-day area\n            if (this.dayGrid) {\n                this.dayGrid.removeSegPopover(); // kill the \"more\" popover if displayed\n                eventLimit = this.opt('eventLimit');\n                if (eventLimit && typeof eventLimit !== 'number') {\n                    eventLimit = TIMEGRID_ALL_DAY_EVENT_LIMIT; // make sure \"auto\" goes to a real number\n                }\n                if (eventLimit) {\n                    this.dayGrid.limitRows(eventLimit);\n                }\n            }\n            if (!isAuto) { // should we force dimensions of the scroll container?\n                scrollerHeight = this.computeScrollerHeight(viewHeight);\n                this.scroller.setHeight(scrollerHeight);\n                scrollbarWidths = this.scroller.getScrollbarWidths();\n                if (scrollbarWidths.left || scrollbarWidths.right) { // using scrollbars?\n                    // make the all-day and header rows lines up\n                    noScrollRowEls.forEach(function (rowEl) {\n                        core.compensateScroll(rowEl, scrollbarWidths);\n                    });\n                    // the scrollbar compensation might have changed text flow, which might affect height, so recalculate\n                    // and reapply the desired height to the scroller.\n                    scrollerHeight = this.computeScrollerHeight(viewHeight);\n                    this.scroller.setHeight(scrollerHeight);\n                }\n                // guarantees the same scrollbar widths\n                this.scroller.lockOverflow(scrollbarWidths);\n                // if there's any space below the slats, show the horizontal rule.\n                // this won't cause any new overflow, because lockOverflow already called.\n                if (this.timeGrid.getTotalSlatHeight() < scrollerHeight) {\n                    this.timeGrid.bottomRuleEl.style.display = '';\n                }\n            }\n        };\n        // given a desired total height of the view, returns what the height of the scroller should be\n        TimeGridView.prototype.computeScrollerHeight = function (viewHeight) {\n            return viewHeight -\n                core.subtractInnerElHeight(this.el, this.scroller.el); // everything that's NOT the scroller\n        };\n        /* Scroll\n        ------------------------------------------------------------------------------------------------------------------*/\n        // Computes the initial pre-configured scroll state prior to allowing the user to change it\n        TimeGridView.prototype.computeDateScroll = function (timeMs) {\n            var top = this.timeGrid.computeTimeTop(timeMs);\n            // zoom can give weird floating-point values. rather scroll a little bit further\n            top = Math.ceil(top);\n            if (top) {\n                top++; // to overcome top border that slots beyond the first have. looks better\n            }\n            return { top: top };\n        };\n        TimeGridView.prototype.queryDateScroll = function () {\n            return { top: this.scroller.getScrollTop() };\n        };\n        TimeGridView.prototype.applyDateScroll = function (scroll) {\n            if (scroll.top !== undefined) {\n                this.scroller.setScrollTop(scroll.top);\n            }\n        };\n        // Generates an HTML attribute string for setting the width of the axis, if it is known\n        TimeGridView.prototype.axisStyleAttr = function () {\n            if (this.axisWidth != null) {\n                return 'style=\"width:' + this.axisWidth + 'px\"';\n            }\n            return '';\n        };\n        return TimeGridView;\n    }(core.View));\n    TimeGridView.prototype.usesMinMaxTime = true; // indicates that minTime/maxTime affects rendering\n\n    var SimpleTimeGrid = /** @class */ (function (_super) {\n        __extends(SimpleTimeGrid, _super);\n        function SimpleTimeGrid(context, timeGrid) {\n            var _this = _super.call(this, context, timeGrid.el) || this;\n            _this.buildDayRanges = core.memoize(buildDayRanges);\n            _this.slicer = new TimeGridSlicer();\n            _this.timeGrid = timeGrid;\n            context.calendar.registerInteractiveComponent(_this, {\n                el: _this.timeGrid.el\n            });\n            return _this;\n        }\n        SimpleTimeGrid.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            this.calendar.unregisterInteractiveComponent(this);\n        };\n        SimpleTimeGrid.prototype.render = function (props) {\n            var dateProfile = props.dateProfile, dayTable = props.dayTable;\n            var dayRanges = this.dayRanges = this.buildDayRanges(dayTable, dateProfile, this.dateEnv);\n            this.timeGrid.receiveProps(__assign({}, this.slicer.sliceProps(props, dateProfile, null, this.timeGrid, dayRanges), { dateProfile: dateProfile, cells: dayTable.cells[0] }));\n        };\n        SimpleTimeGrid.prototype.renderNowIndicator = function (date) {\n            this.timeGrid.renderNowIndicator(this.slicer.sliceNowDate(date, this.timeGrid, this.dayRanges), date);\n        };\n        SimpleTimeGrid.prototype.buildPositionCaches = function () {\n            this.timeGrid.buildPositionCaches();\n        };\n        SimpleTimeGrid.prototype.queryHit = function (positionLeft, positionTop) {\n            var rawHit = this.timeGrid.positionToHit(positionLeft, positionTop);\n            if (rawHit) {\n                return {\n                    component: this.timeGrid,\n                    dateSpan: rawHit.dateSpan,\n                    dayEl: rawHit.dayEl,\n                    rect: {\n                        left: rawHit.relativeRect.left,\n                        right: rawHit.relativeRect.right,\n                        top: rawHit.relativeRect.top,\n                        bottom: rawHit.relativeRect.bottom\n                    },\n                    layer: 0\n                };\n            }\n        };\n        return SimpleTimeGrid;\n    }(core.DateComponent));\n    function buildDayRanges(dayTable, dateProfile, dateEnv) {\n        var ranges = [];\n        for (var _i = 0, _a = dayTable.headerDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            ranges.push({\n                start: dateEnv.add(date, dateProfile.minTime),\n                end: dateEnv.add(date, dateProfile.maxTime)\n            });\n        }\n        return ranges;\n    }\n    var TimeGridSlicer = /** @class */ (function (_super) {\n        __extends(TimeGridSlicer, _super);\n        function TimeGridSlicer() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        TimeGridSlicer.prototype.sliceRange = function (range, dayRanges) {\n            var segs = [];\n            for (var col = 0; col < dayRanges.length; col++) {\n                var segRange = core.intersectRanges(range, dayRanges[col]);\n                if (segRange) {\n                    segs.push({\n                        start: segRange.start,\n                        end: segRange.end,\n                        isStart: segRange.start.valueOf() === range.start.valueOf(),\n                        isEnd: segRange.end.valueOf() === range.end.valueOf(),\n                        col: col\n                    });\n                }\n            }\n            return segs;\n        };\n        return TimeGridSlicer;\n    }(core.Slicer));\n\n    var TimeGridView$1 = /** @class */ (function (_super) {\n        __extends(TimeGridView, _super);\n        function TimeGridView(_context, viewSpec, dateProfileGenerator, parentEl) {\n            var _this = _super.call(this, _context, viewSpec, dateProfileGenerator, parentEl) || this;\n            _this.buildDayTable = core.memoize(buildDayTable);\n            if (_this.opt('columnHeader')) {\n                _this.header = new core.DayHeader(_this.context, _this.el.querySelector('.fc-head-container'));\n            }\n            _this.simpleTimeGrid = new SimpleTimeGrid(_this.context, _this.timeGrid);\n            if (_this.dayGrid) {\n                _this.simpleDayGrid = new daygrid.SimpleDayGrid(_this.context, _this.dayGrid);\n            }\n            return _this;\n        }\n        TimeGridView.prototype.destroy = function () {\n            _super.prototype.destroy.call(this);\n            if (this.header) {\n                this.header.destroy();\n            }\n            this.simpleTimeGrid.destroy();\n            if (this.simpleDayGrid) {\n                this.simpleDayGrid.destroy();\n            }\n        };\n        TimeGridView.prototype.render = function (props) {\n            _super.prototype.render.call(this, props); // for flags for updateSize\n            var dateProfile = this.props.dateProfile;\n            var dayTable = this.buildDayTable(dateProfile, this.dateProfileGenerator);\n            var splitProps = this.splitter.splitProps(props);\n            if (this.header) {\n                this.header.receiveProps({\n                    dateProfile: dateProfile,\n                    dates: dayTable.headerDates,\n                    datesRepDistinctDays: true,\n                    renderIntroHtml: this.renderHeadIntroHtml\n                });\n            }\n            this.simpleTimeGrid.receiveProps(__assign({}, splitProps['timed'], { dateProfile: dateProfile,\n                dayTable: dayTable }));\n            if (this.simpleDayGrid) {\n                this.simpleDayGrid.receiveProps(__assign({}, splitProps['allDay'], { dateProfile: dateProfile,\n                    dayTable: dayTable, nextDayThreshold: this.nextDayThreshold, isRigid: false }));\n            }\n        };\n        TimeGridView.prototype.renderNowIndicator = function (date) {\n            this.simpleTimeGrid.renderNowIndicator(date);\n        };\n        return TimeGridView;\n    }(TimeGridView));\n    function buildDayTable(dateProfile, dateProfileGenerator) {\n        var daySeries = new core.DaySeries(dateProfile.renderRange, dateProfileGenerator);\n        return new core.DayTable(daySeries, false);\n    }\n\n    var main = core.createPlugin({\n        defaultView: 'timeGridWeek',\n        views: {\n            timeGrid: {\n                class: TimeGridView$1,\n                allDaySlot: true,\n                slotDuration: '00:30:00',\n                slotEventOverlap: true // a bad name. confused with overlap/constraint system\n            },\n            timeGridDay: {\n                type: 'timeGrid',\n                duration: { days: 1 }\n            },\n            timeGridWeek: {\n                type: 'timeGrid',\n                duration: { weeks: 1 }\n            }\n        }\n    });\n\n    exports.AbstractTimeGridView = TimeGridView;\n    exports.TimeGrid = TimeGrid;\n    exports.TimeGridSlicer = TimeGridSlicer;\n    exports.TimeGridView = TimeGridView$1;\n    exports.buildDayRanges = buildDayRanges;\n    exports.buildDayTable = buildDayTable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n","/*!\nFullCalendar Interaction Plugin v4.1.0\nDocs & License: https://fullcalendar.io/\n(c) 2019 Adam Shaw\n*/\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@fullcalendar/core')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@fullcalendar/core'], factory) :\n    (global = global || self, factory(global.FullCalendarInteraction = {}, global.FullCalendar));\n}(this, function (exports, core) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n    /* global Reflect, Promise */\r\n\r\n    var extendStatics = function(d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    };\r\n\r\n    function __extends(d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    }\r\n\r\n    var __assign = function() {\r\n        __assign = Object.assign || function __assign(t) {\r\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n                s = arguments[i];\r\n                for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n            }\r\n            return t;\r\n        };\r\n        return __assign.apply(this, arguments);\r\n    };\n\n    core.config.touchMouseIgnoreWait = 500;\n    var ignoreMouseDepth = 0;\n    var listenerCnt = 0;\n    var isWindowTouchMoveCancelled = false;\n    /*\n    Uses a \"pointer\" abstraction, which monitors UI events for both mouse and touch.\n    Tracks when the pointer \"drags\" on a certain element, meaning down+move+up.\n\n    Also, tracks if there was touch-scrolling.\n    Also, can prevent touch-scrolling from happening.\n    Also, can fire pointermove events when scrolling happens underneath, even when no real pointer movement.\n\n    emits:\n    - pointerdown\n    - pointermove\n    - pointerup\n    */\n    var PointerDragging = /** @class */ (function () {\n        function PointerDragging(containerEl) {\n            var _this = this;\n            this.subjectEl = null;\n            this.downEl = null;\n            // options that can be directly assigned by caller\n            this.selector = ''; // will cause subjectEl in all emitted events to be this element\n            this.handleSelector = '';\n            this.shouldIgnoreMove = false;\n            this.shouldWatchScroll = true; // for simulating pointermove on scroll\n            // internal states\n            this.isDragging = false;\n            this.isTouchDragging = false;\n            this.wasTouchScroll = false;\n            // Mouse\n            // ----------------------------------------------------------------------------------------------------\n            this.handleMouseDown = function (ev) {\n                if (!_this.shouldIgnoreMouse() &&\n                    isPrimaryMouseButton(ev) &&\n                    _this.tryStart(ev)) {\n                    var pev = _this.createEventFromMouse(ev, true);\n                    _this.emitter.trigger('pointerdown', pev);\n                    _this.initScrollWatch(pev);\n                    if (!_this.shouldIgnoreMove) {\n                        document.addEventListener('mousemove', _this.handleMouseMove);\n                    }\n                    document.addEventListener('mouseup', _this.handleMouseUp);\n                }\n            };\n            this.handleMouseMove = function (ev) {\n                var pev = _this.createEventFromMouse(ev);\n                _this.recordCoords(pev);\n                _this.emitter.trigger('pointermove', pev);\n            };\n            this.handleMouseUp = function (ev) {\n                document.removeEventListener('mousemove', _this.handleMouseMove);\n                document.removeEventListener('mouseup', _this.handleMouseUp);\n                _this.emitter.trigger('pointerup', _this.createEventFromMouse(ev));\n                _this.cleanup(); // call last so that pointerup has access to props\n            };\n            // Touch\n            // ----------------------------------------------------------------------------------------------------\n            this.handleTouchStart = function (ev) {\n                if (_this.tryStart(ev)) {\n                    _this.isTouchDragging = true;\n                    var pev = _this.createEventFromTouch(ev, true);\n                    _this.emitter.trigger('pointerdown', pev);\n                    _this.initScrollWatch(pev);\n                    // unlike mouse, need to attach to target, not document\n                    // https://stackoverflow.com/a/45760014\n                    var target = ev.target;\n                    if (!_this.shouldIgnoreMove) {\n                        target.addEventListener('touchmove', _this.handleTouchMove);\n                    }\n                    target.addEventListener('touchend', _this.handleTouchEnd);\n                    target.addEventListener('touchcancel', _this.handleTouchEnd); // treat it as a touch end\n                    // attach a handler to get called when ANY scroll action happens on the page.\n                    // this was impossible to do with normal on/off because 'scroll' doesn't bubble.\n                    // http://stackoverflow.com/a/32954565/96342\n                    window.addEventListener('scroll', _this.handleTouchScroll, true // useCapture\n                    );\n                }\n            };\n            this.handleTouchMove = function (ev) {\n                var pev = _this.createEventFromTouch(ev);\n                _this.recordCoords(pev);\n                _this.emitter.trigger('pointermove', pev);\n            };\n            this.handleTouchEnd = function (ev) {\n                if (_this.isDragging) { // done to guard against touchend followed by touchcancel\n                    var target = ev.target;\n                    target.removeEventListener('touchmove', _this.handleTouchMove);\n                    target.removeEventListener('touchend', _this.handleTouchEnd);\n                    target.removeEventListener('touchcancel', _this.handleTouchEnd);\n                    window.removeEventListener('scroll', _this.handleTouchScroll, true); // useCaptured=true\n                    _this.emitter.trigger('pointerup', _this.createEventFromTouch(ev));\n                    _this.cleanup(); // call last so that pointerup has access to props\n                    _this.isTouchDragging = false;\n                    startIgnoringMouse();\n                }\n            };\n            this.handleTouchScroll = function () {\n                _this.wasTouchScroll = true;\n            };\n            this.handleScroll = function (ev) {\n                if (!_this.shouldIgnoreMove) {\n                    var pageX = (window.pageXOffset - _this.prevScrollX) + _this.prevPageX;\n                    var pageY = (window.pageYOffset - _this.prevScrollY) + _this.prevPageY;\n                    _this.emitter.trigger('pointermove', {\n                        origEvent: ev,\n                        isTouch: _this.isTouchDragging,\n                        subjectEl: _this.subjectEl,\n                        pageX: pageX,\n                        pageY: pageY,\n                        deltaX: pageX - _this.origPageX,\n                        deltaY: pageY - _this.origPageY\n                    });\n                }\n            };\n            this.containerEl = containerEl;\n            this.emitter = new core.EmitterMixin();\n            containerEl.addEventListener('mousedown', this.handleMouseDown);\n            containerEl.addEventListener('touchstart', this.handleTouchStart, { passive: true });\n            listenerCreated();\n        }\n        PointerDragging.prototype.destroy = function () {\n            this.containerEl.removeEventListener('mousedown', this.handleMouseDown);\n            this.containerEl.removeEventListener('touchstart', this.handleTouchStart, { passive: true });\n            listenerDestroyed();\n        };\n        PointerDragging.prototype.tryStart = function (ev) {\n            var subjectEl = this.querySubjectEl(ev);\n            var downEl = ev.target;\n            if (subjectEl &&\n                (!this.handleSelector || core.elementClosest(downEl, this.handleSelector))) {\n                this.subjectEl = subjectEl;\n                this.downEl = downEl;\n                this.isDragging = true; // do this first so cancelTouchScroll will work\n                this.wasTouchScroll = false;\n                return true;\n            }\n            return false;\n        };\n        PointerDragging.prototype.cleanup = function () {\n            isWindowTouchMoveCancelled = false;\n            this.isDragging = false;\n            this.subjectEl = null;\n            this.downEl = null;\n            // keep wasTouchScroll around for later access\n            this.destroyScrollWatch();\n        };\n        PointerDragging.prototype.querySubjectEl = function (ev) {\n            if (this.selector) {\n                return core.elementClosest(ev.target, this.selector);\n            }\n            else {\n                return this.containerEl;\n            }\n        };\n        PointerDragging.prototype.shouldIgnoreMouse = function () {\n            return ignoreMouseDepth || this.isTouchDragging;\n        };\n        // can be called by user of this class, to cancel touch-based scrolling for the current drag\n        PointerDragging.prototype.cancelTouchScroll = function () {\n            if (this.isDragging) {\n                isWindowTouchMoveCancelled = true;\n            }\n        };\n        // Scrolling that simulates pointermoves\n        // ----------------------------------------------------------------------------------------------------\n        PointerDragging.prototype.initScrollWatch = function (ev) {\n            if (this.shouldWatchScroll) {\n                this.recordCoords(ev);\n                window.addEventListener('scroll', this.handleScroll, true); // useCapture=true\n            }\n        };\n        PointerDragging.prototype.recordCoords = function (ev) {\n            if (this.shouldWatchScroll) {\n                this.prevPageX = ev.pageX;\n                this.prevPageY = ev.pageY;\n                this.prevScrollX = window.pageXOffset;\n                this.prevScrollY = window.pageYOffset;\n            }\n        };\n        PointerDragging.prototype.destroyScrollWatch = function () {\n            if (this.shouldWatchScroll) {\n                window.removeEventListener('scroll', this.handleScroll, true); // useCaptured=true\n            }\n        };\n        // Event Normalization\n        // ----------------------------------------------------------------------------------------------------\n        PointerDragging.prototype.createEventFromMouse = function (ev, isFirst) {\n            var deltaX = 0;\n            var deltaY = 0;\n            // TODO: repeat code\n            if (isFirst) {\n                this.origPageX = ev.pageX;\n                this.origPageY = ev.pageY;\n            }\n            else {\n                deltaX = ev.pageX - this.origPageX;\n                deltaY = ev.pageY - this.origPageY;\n            }\n            return {\n                origEvent: ev,\n                isTouch: false,\n                subjectEl: this.subjectEl,\n                pageX: ev.pageX,\n                pageY: ev.pageY,\n                deltaX: deltaX,\n                deltaY: deltaY\n            };\n        };\n        PointerDragging.prototype.createEventFromTouch = function (ev, isFirst) {\n            var touches = ev.touches;\n            var pageX;\n            var pageY;\n            var deltaX = 0;\n            var deltaY = 0;\n            // if touch coords available, prefer,\n            // because FF would give bad ev.pageX ev.pageY\n            if (touches && touches.length) {\n                pageX = touches[0].pageX;\n                pageY = touches[0].pageY;\n            }\n            else {\n                pageX = ev.pageX;\n                pageY = ev.pageY;\n            }\n            // TODO: repeat code\n            if (isFirst) {\n                this.origPageX = pageX;\n                this.origPageY = pageY;\n            }\n            else {\n                deltaX = pageX - this.origPageX;\n                deltaY = pageY - this.origPageY;\n            }\n            return {\n                origEvent: ev,\n                isTouch: true,\n                subjectEl: this.subjectEl,\n                pageX: pageX,\n                pageY: pageY,\n                deltaX: deltaX,\n                deltaY: deltaY\n            };\n        };\n        return PointerDragging;\n    }());\n    // Returns a boolean whether this was a left mouse click and no ctrl key (which means right click on Mac)\n    function isPrimaryMouseButton(ev) {\n        return ev.button === 0 && !ev.ctrlKey;\n    }\n    // Ignoring fake mouse events generated by touch\n    // ----------------------------------------------------------------------------------------------------\n    function startIgnoringMouse() {\n        ignoreMouseDepth++;\n        setTimeout(function () {\n            ignoreMouseDepth--;\n        }, core.config.touchMouseIgnoreWait);\n    }\n    // We want to attach touchmove as early as possible for Safari\n    // ----------------------------------------------------------------------------------------------------\n    function listenerCreated() {\n        if (!(listenerCnt++)) {\n            window.addEventListener('touchmove', onWindowTouchMove, { passive: false });\n        }\n    }\n    function listenerDestroyed() {\n        if (!(--listenerCnt)) {\n            window.removeEventListener('touchmove', onWindowTouchMove, { passive: false });\n        }\n    }\n    function onWindowTouchMove(ev) {\n        if (isWindowTouchMoveCancelled) {\n            ev.preventDefault();\n        }\n    }\n\n    /*\n    An effect in which an element follows the movement of a pointer across the screen.\n    The moving element is a clone of some other element.\n    Must call start + handleMove + stop.\n    */\n    var ElementMirror = /** @class */ (function () {\n        function ElementMirror() {\n            this.isVisible = false; // must be explicitly enabled\n            this.sourceEl = null;\n            this.mirrorEl = null;\n            this.sourceElRect = null; // screen coords relative to viewport\n            // options that can be set directly by caller\n            this.parentNode = document.body;\n            this.zIndex = 9999;\n            this.revertDuration = 0;\n        }\n        ElementMirror.prototype.start = function (sourceEl, pageX, pageY) {\n            this.sourceEl = sourceEl;\n            this.sourceElRect = this.sourceEl.getBoundingClientRect();\n            this.origScreenX = pageX - window.pageXOffset;\n            this.origScreenY = pageY - window.pageYOffset;\n            this.deltaX = 0;\n            this.deltaY = 0;\n            this.updateElPosition();\n        };\n        ElementMirror.prototype.handleMove = function (pageX, pageY) {\n            this.deltaX = (pageX - window.pageXOffset) - this.origScreenX;\n            this.deltaY = (pageY - window.pageYOffset) - this.origScreenY;\n            this.updateElPosition();\n        };\n        // can be called before start\n        ElementMirror.prototype.setIsVisible = function (bool) {\n            if (bool) {\n                if (!this.isVisible) {\n                    if (this.mirrorEl) {\n                        this.mirrorEl.style.display = '';\n                    }\n                    this.isVisible = bool; // needs to happen before updateElPosition\n                    this.updateElPosition(); // because was not updating the position while invisible\n                }\n            }\n            else {\n                if (this.isVisible) {\n                    if (this.mirrorEl) {\n                        this.mirrorEl.style.display = 'none';\n                    }\n                    this.isVisible = bool;\n                }\n            }\n        };\n        // always async\n        ElementMirror.prototype.stop = function (needsRevertAnimation, callback) {\n            var _this = this;\n            var done = function () {\n                _this.cleanup();\n                callback();\n            };\n            if (needsRevertAnimation &&\n                this.mirrorEl &&\n                this.isVisible &&\n                this.revertDuration && // if 0, transition won't work\n                (this.deltaX || this.deltaY) // if same coords, transition won't work\n            ) {\n                this.doRevertAnimation(done, this.revertDuration);\n            }\n            else {\n                setTimeout(done, 0);\n            }\n        };\n        ElementMirror.prototype.doRevertAnimation = function (callback, revertDuration) {\n            var mirrorEl = this.mirrorEl;\n            var finalSourceElRect = this.sourceEl.getBoundingClientRect(); // because autoscrolling might have happened\n            mirrorEl.style.transition =\n                'top ' + revertDuration + 'ms,' +\n                    'left ' + revertDuration + 'ms';\n            core.applyStyle(mirrorEl, {\n                left: finalSourceElRect.left,\n                top: finalSourceElRect.top\n            });\n            core.whenTransitionDone(mirrorEl, function () {\n                mirrorEl.style.transition = '';\n                callback();\n            });\n        };\n        ElementMirror.prototype.cleanup = function () {\n            if (this.mirrorEl) {\n                core.removeElement(this.mirrorEl);\n                this.mirrorEl = null;\n            }\n            this.sourceEl = null;\n        };\n        ElementMirror.prototype.updateElPosition = function () {\n            if (this.sourceEl && this.isVisible) {\n                core.applyStyle(this.getMirrorEl(), {\n                    left: this.sourceElRect.left + this.deltaX,\n                    top: this.sourceElRect.top + this.deltaY\n                });\n            }\n        };\n        ElementMirror.prototype.getMirrorEl = function () {\n            var sourceElRect = this.sourceElRect;\n            var mirrorEl = this.mirrorEl;\n            if (!mirrorEl) {\n                mirrorEl = this.mirrorEl = this.sourceEl.cloneNode(true); // cloneChildren=true\n                // we don't want long taps or any mouse interaction causing selection/menus.\n                // would use preventSelection(), but that prevents selectstart, causing problems.\n                mirrorEl.classList.add('fc-unselectable');\n                mirrorEl.classList.add('fc-dragging');\n                core.applyStyle(mirrorEl, {\n                    position: 'fixed',\n                    zIndex: this.zIndex,\n                    visibility: '',\n                    boxSizing: 'border-box',\n                    width: sourceElRect.right - sourceElRect.left,\n                    height: sourceElRect.bottom - sourceElRect.top,\n                    right: 'auto',\n                    bottom: 'auto',\n                    margin: 0\n                });\n                this.parentNode.appendChild(mirrorEl);\n            }\n            return mirrorEl;\n        };\n        return ElementMirror;\n    }());\n\n    /*\n    Is a cache for a given element's scroll information (all the info that ScrollController stores)\n    in addition the \"client rectangle\" of the element.. the area within the scrollbars.\n\n    The cache can be in one of two modes:\n    - doesListening:false - ignores when the container is scrolled by someone else\n    - doesListening:true - watch for scrolling and update the cache\n    */\n    var ScrollGeomCache = /** @class */ (function (_super) {\n        __extends(ScrollGeomCache, _super);\n        function ScrollGeomCache(scrollController, doesListening) {\n            var _this = _super.call(this) || this;\n            _this.handleScroll = function () {\n                _this.scrollTop = _this.scrollController.getScrollTop();\n                _this.scrollLeft = _this.scrollController.getScrollLeft();\n                _this.handleScrollChange();\n            };\n            _this.scrollController = scrollController;\n            _this.doesListening = doesListening;\n            _this.scrollTop = _this.origScrollTop = scrollController.getScrollTop();\n            _this.scrollLeft = _this.origScrollLeft = scrollController.getScrollLeft();\n            _this.scrollWidth = scrollController.getScrollWidth();\n            _this.scrollHeight = scrollController.getScrollHeight();\n            _this.clientWidth = scrollController.getClientWidth();\n            _this.clientHeight = scrollController.getClientHeight();\n            _this.clientRect = _this.computeClientRect(); // do last in case it needs cached values\n            if (_this.doesListening) {\n                _this.getEventTarget().addEventListener('scroll', _this.handleScroll);\n            }\n            return _this;\n        }\n        ScrollGeomCache.prototype.destroy = function () {\n            if (this.doesListening) {\n                this.getEventTarget().removeEventListener('scroll', this.handleScroll);\n            }\n        };\n        ScrollGeomCache.prototype.getScrollTop = function () {\n            return this.scrollTop;\n        };\n        ScrollGeomCache.prototype.getScrollLeft = function () {\n            return this.scrollLeft;\n        };\n        ScrollGeomCache.prototype.setScrollTop = function (top) {\n            this.scrollController.setScrollTop(top);\n            if (!this.doesListening) {\n                // we are not relying on the element to normalize out-of-bounds scroll values\n                // so we need to sanitize ourselves\n                this.scrollTop = Math.max(Math.min(top, this.getMaxScrollTop()), 0);\n                this.handleScrollChange();\n            }\n        };\n        ScrollGeomCache.prototype.setScrollLeft = function (top) {\n            this.scrollController.setScrollLeft(top);\n            if (!this.doesListening) {\n                // we are not relying on the element to normalize out-of-bounds scroll values\n                // so we need to sanitize ourselves\n                this.scrollLeft = Math.max(Math.min(top, this.getMaxScrollLeft()), 0);\n                this.handleScrollChange();\n            }\n        };\n        ScrollGeomCache.prototype.getClientWidth = function () {\n            return this.clientWidth;\n        };\n        ScrollGeomCache.prototype.getClientHeight = function () {\n            return this.clientHeight;\n        };\n        ScrollGeomCache.prototype.getScrollWidth = function () {\n            return this.scrollWidth;\n        };\n        ScrollGeomCache.prototype.getScrollHeight = function () {\n            return this.scrollHeight;\n        };\n        ScrollGeomCache.prototype.handleScrollChange = function () {\n        };\n        return ScrollGeomCache;\n    }(core.ScrollController));\n    var ElementScrollGeomCache = /** @class */ (function (_super) {\n        __extends(ElementScrollGeomCache, _super);\n        function ElementScrollGeomCache(el, doesListening) {\n            return _super.call(this, new core.ElementScrollController(el), doesListening) || this;\n        }\n        ElementScrollGeomCache.prototype.getEventTarget = function () {\n            return this.scrollController.el;\n        };\n        ElementScrollGeomCache.prototype.computeClientRect = function () {\n            return core.computeInnerRect(this.scrollController.el);\n        };\n        return ElementScrollGeomCache;\n    }(ScrollGeomCache));\n    var WindowScrollGeomCache = /** @class */ (function (_super) {\n        __extends(WindowScrollGeomCache, _super);\n        function WindowScrollGeomCache(doesListening) {\n            return _super.call(this, new core.WindowScrollController(), doesListening) || this;\n        }\n        WindowScrollGeomCache.prototype.getEventTarget = function () {\n            return window;\n        };\n        WindowScrollGeomCache.prototype.computeClientRect = function () {\n            return {\n                left: this.scrollLeft,\n                right: this.scrollLeft + this.clientWidth,\n                top: this.scrollTop,\n                bottom: this.scrollTop + this.clientHeight\n            };\n        };\n        // the window is the only scroll object that changes it's rectangle relative\n        // to the document's topleft as it scrolls\n        WindowScrollGeomCache.prototype.handleScrollChange = function () {\n            this.clientRect = this.computeClientRect();\n        };\n        return WindowScrollGeomCache;\n    }(ScrollGeomCache));\n\n    // If available we are using native \"performance\" API instead of \"Date\"\n    // Read more about it on MDN:\n    // https://developer.mozilla.org/en-US/docs/Web/API/Performance\n    var getTime = typeof performance === 'function' ? performance.now : Date.now;\n    /*\n    For a pointer interaction, automatically scrolls certain scroll containers when the pointer\n    approaches the edge.\n\n    The caller must call start + handleMove + stop.\n    */\n    var AutoScroller = /** @class */ (function () {\n        function AutoScroller() {\n            var _this = this;\n            // options that can be set by caller\n            this.isEnabled = true;\n            this.scrollQuery = [window, '.fc-scroller'];\n            this.edgeThreshold = 50; // pixels\n            this.maxVelocity = 300; // pixels per second\n            // internal state\n            this.pointerScreenX = null;\n            this.pointerScreenY = null;\n            this.isAnimating = false;\n            this.scrollCaches = null;\n            // protect against the initial pointerdown being too close to an edge and starting the scroll\n            this.everMovedUp = false;\n            this.everMovedDown = false;\n            this.everMovedLeft = false;\n            this.everMovedRight = false;\n            this.animate = function () {\n                if (_this.isAnimating) { // wasn't cancelled between animation calls\n                    var edge = _this.computeBestEdge(_this.pointerScreenX + window.pageXOffset, _this.pointerScreenY + window.pageYOffset);\n                    if (edge) {\n                        var now = getTime();\n                        _this.handleSide(edge, (now - _this.msSinceRequest) / 1000);\n                        _this.requestAnimation(now);\n                    }\n                    else {\n                        _this.isAnimating = false; // will stop animation\n                    }\n                }\n            };\n        }\n        AutoScroller.prototype.start = function (pageX, pageY) {\n            if (this.isEnabled) {\n                this.scrollCaches = this.buildCaches();\n                this.pointerScreenX = null;\n                this.pointerScreenY = null;\n                this.everMovedUp = false;\n                this.everMovedDown = false;\n                this.everMovedLeft = false;\n                this.everMovedRight = false;\n                this.handleMove(pageX, pageY);\n            }\n        };\n        AutoScroller.prototype.handleMove = function (pageX, pageY) {\n            if (this.isEnabled) {\n                var pointerScreenX = pageX - window.pageXOffset;\n                var pointerScreenY = pageY - window.pageYOffset;\n                var yDelta = this.pointerScreenY === null ? 0 : pointerScreenY - this.pointerScreenY;\n                var xDelta = this.pointerScreenX === null ? 0 : pointerScreenX - this.pointerScreenX;\n                if (yDelta < 0) {\n                    this.everMovedUp = true;\n                }\n                else if (yDelta > 0) {\n                    this.everMovedDown = true;\n                }\n                if (xDelta < 0) {\n                    this.everMovedLeft = true;\n                }\n                else if (xDelta > 0) {\n                    this.everMovedRight = true;\n                }\n                this.pointerScreenX = pointerScreenX;\n                this.pointerScreenY = pointerScreenY;\n                if (!this.isAnimating) {\n                    this.isAnimating = true;\n                    this.requestAnimation(getTime());\n                }\n            }\n        };\n        AutoScroller.prototype.stop = function () {\n            if (this.isEnabled) {\n                this.isAnimating = false; // will stop animation\n                for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                    var scrollCache = _a[_i];\n                    scrollCache.destroy();\n                }\n                this.scrollCaches = null;\n            }\n        };\n        AutoScroller.prototype.requestAnimation = function (now) {\n            this.msSinceRequest = now;\n            requestAnimationFrame(this.animate);\n        };\n        AutoScroller.prototype.handleSide = function (edge, seconds) {\n            var scrollCache = edge.scrollCache;\n            var edgeThreshold = this.edgeThreshold;\n            var invDistance = edgeThreshold - edge.distance;\n            var velocity = // the closer to the edge, the faster we scroll\n             (invDistance * invDistance) / (edgeThreshold * edgeThreshold) * // quadratic\n                this.maxVelocity * seconds;\n            var sign = 1;\n            switch (edge.name) {\n                case 'left':\n                    sign = -1;\n                // falls through\n                case 'right':\n                    scrollCache.setScrollLeft(scrollCache.getScrollLeft() + velocity * sign);\n                    break;\n                case 'top':\n                    sign = -1;\n                // falls through\n                case 'bottom':\n                    scrollCache.setScrollTop(scrollCache.getScrollTop() + velocity * sign);\n                    break;\n            }\n        };\n        // left/top are relative to document topleft\n        AutoScroller.prototype.computeBestEdge = function (left, top) {\n            var edgeThreshold = this.edgeThreshold;\n            var bestSide = null;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                var rect = scrollCache.clientRect;\n                var leftDist = left - rect.left;\n                var rightDist = rect.right - left;\n                var topDist = top - rect.top;\n                var bottomDist = rect.bottom - top;\n                // completely within the rect?\n                if (leftDist >= 0 && rightDist >= 0 && topDist >= 0 && bottomDist >= 0) {\n                    if (topDist <= edgeThreshold && this.everMovedUp && scrollCache.canScrollUp() &&\n                        (!bestSide || bestSide.distance > topDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'top', distance: topDist };\n                    }\n                    if (bottomDist <= edgeThreshold && this.everMovedDown && scrollCache.canScrollDown() &&\n                        (!bestSide || bestSide.distance > bottomDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'bottom', distance: bottomDist };\n                    }\n                    if (leftDist <= edgeThreshold && this.everMovedLeft && scrollCache.canScrollLeft() &&\n                        (!bestSide || bestSide.distance > leftDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'left', distance: leftDist };\n                    }\n                    if (rightDist <= edgeThreshold && this.everMovedRight && scrollCache.canScrollRight() &&\n                        (!bestSide || bestSide.distance > rightDist)) {\n                        bestSide = { scrollCache: scrollCache, name: 'right', distance: rightDist };\n                    }\n                }\n            }\n            return bestSide;\n        };\n        AutoScroller.prototype.buildCaches = function () {\n            return this.queryScrollEls().map(function (el) {\n                if (el === window) {\n                    return new WindowScrollGeomCache(false); // false = don't listen to user-generated scrolls\n                }\n                else {\n                    return new ElementScrollGeomCache(el, false); // false = don't listen to user-generated scrolls\n                }\n            });\n        };\n        AutoScroller.prototype.queryScrollEls = function () {\n            var els = [];\n            for (var _i = 0, _a = this.scrollQuery; _i < _a.length; _i++) {\n                var query = _a[_i];\n                if (typeof query === 'object') {\n                    els.push(query);\n                }\n                else {\n                    els.push.apply(els, Array.prototype.slice.call(document.querySelectorAll(query)));\n                }\n            }\n            return els;\n        };\n        return AutoScroller;\n    }());\n\n    /*\n    Monitors dragging on an element. Has a number of high-level features:\n    - minimum distance required before dragging\n    - minimum wait time (\"delay\") before dragging\n    - a mirror element that follows the pointer\n    */\n    var FeaturefulElementDragging = /** @class */ (function (_super) {\n        __extends(FeaturefulElementDragging, _super);\n        function FeaturefulElementDragging(containerEl) {\n            var _this = _super.call(this, containerEl) || this;\n            // options that can be directly set by caller\n            // the caller can also set the PointerDragging's options as well\n            _this.delay = null;\n            _this.minDistance = 0;\n            _this.touchScrollAllowed = true; // prevents drag from starting and blocks scrolling during drag\n            _this.mirrorNeedsRevert = false;\n            _this.isInteracting = false; // is the user validly moving the pointer? lasts until pointerup\n            _this.isDragging = false; // is it INTENTFULLY dragging? lasts until after revert animation\n            _this.isDelayEnded = false;\n            _this.isDistanceSurpassed = false;\n            _this.delayTimeoutId = null;\n            _this.onPointerDown = function (ev) {\n                if (!_this.isDragging) { // so new drag doesn't happen while revert animation is going\n                    _this.isInteracting = true;\n                    _this.isDelayEnded = false;\n                    _this.isDistanceSurpassed = false;\n                    core.preventSelection(document.body);\n                    core.preventContextMenu(document.body);\n                    // prevent links from being visited if there's an eventual drag.\n                    // also prevents selection in older browsers (maybe?).\n                    // not necessary for touch, besides, browser would complain about passiveness.\n                    if (!ev.isTouch) {\n                        ev.origEvent.preventDefault();\n                    }\n                    _this.emitter.trigger('pointerdown', ev);\n                    if (!_this.pointer.shouldIgnoreMove) {\n                        // actions related to initiating dragstart+dragmove+dragend...\n                        _this.mirror.setIsVisible(false); // reset. caller must set-visible\n                        _this.mirror.start(ev.subjectEl, ev.pageX, ev.pageY); // must happen on first pointer down\n                        _this.startDelay(ev);\n                        if (!_this.minDistance) {\n                            _this.handleDistanceSurpassed(ev);\n                        }\n                    }\n                }\n            };\n            _this.onPointerMove = function (ev) {\n                if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                    _this.emitter.trigger('pointermove', ev);\n                    if (!_this.isDistanceSurpassed) {\n                        var minDistance = _this.minDistance;\n                        var distanceSq = void 0; // current distance from the origin, squared\n                        var deltaX = ev.deltaX, deltaY = ev.deltaY;\n                        distanceSq = deltaX * deltaX + deltaY * deltaY;\n                        if (distanceSq >= minDistance * minDistance) { // use pythagorean theorem\n                            _this.handleDistanceSurpassed(ev);\n                        }\n                    }\n                    if (_this.isDragging) {\n                        // a real pointer move? (not one simulated by scrolling)\n                        if (ev.origEvent.type !== 'scroll') {\n                            _this.mirror.handleMove(ev.pageX, ev.pageY);\n                            _this.autoScroller.handleMove(ev.pageX, ev.pageY);\n                        }\n                        _this.emitter.trigger('dragmove', ev);\n                    }\n                }\n            };\n            _this.onPointerUp = function (ev) {\n                if (_this.isInteracting) { // if false, still waiting for previous drag's revert\n                    _this.isInteracting = false;\n                    core.allowSelection(document.body);\n                    core.allowContextMenu(document.body);\n                    _this.emitter.trigger('pointerup', ev); // can potentially set mirrorNeedsRevert\n                    if (_this.isDragging) {\n                        _this.autoScroller.stop();\n                        _this.tryStopDrag(ev); // which will stop the mirror\n                    }\n                    if (_this.delayTimeoutId) {\n                        clearTimeout(_this.delayTimeoutId);\n                        _this.delayTimeoutId = null;\n                    }\n                }\n            };\n            var pointer = _this.pointer = new PointerDragging(containerEl);\n            pointer.emitter.on('pointerdown', _this.onPointerDown);\n            pointer.emitter.on('pointermove', _this.onPointerMove);\n            pointer.emitter.on('pointerup', _this.onPointerUp);\n            _this.mirror = new ElementMirror();\n            _this.autoScroller = new AutoScroller();\n            return _this;\n        }\n        FeaturefulElementDragging.prototype.destroy = function () {\n            this.pointer.destroy();\n        };\n        FeaturefulElementDragging.prototype.startDelay = function (ev) {\n            var _this = this;\n            if (typeof this.delay === 'number') {\n                this.delayTimeoutId = setTimeout(function () {\n                    _this.delayTimeoutId = null;\n                    _this.handleDelayEnd(ev);\n                }, this.delay);\n            }\n            else {\n                this.handleDelayEnd(ev);\n            }\n        };\n        FeaturefulElementDragging.prototype.handleDelayEnd = function (ev) {\n            this.isDelayEnded = true;\n            this.tryStartDrag(ev);\n        };\n        FeaturefulElementDragging.prototype.handleDistanceSurpassed = function (ev) {\n            this.isDistanceSurpassed = true;\n            this.tryStartDrag(ev);\n        };\n        FeaturefulElementDragging.prototype.tryStartDrag = function (ev) {\n            if (this.isDelayEnded && this.isDistanceSurpassed) {\n                if (!this.pointer.wasTouchScroll || this.touchScrollAllowed) {\n                    this.isDragging = true;\n                    this.mirrorNeedsRevert = false;\n                    this.autoScroller.start(ev.pageX, ev.pageY);\n                    this.emitter.trigger('dragstart', ev);\n                    if (this.touchScrollAllowed === false) {\n                        this.pointer.cancelTouchScroll();\n                    }\n                }\n            }\n        };\n        FeaturefulElementDragging.prototype.tryStopDrag = function (ev) {\n            // .stop() is ALWAYS asynchronous, which we NEED because we want all pointerup events\n            // that come from the document to fire beforehand. much more convenient this way.\n            this.mirror.stop(this.mirrorNeedsRevert, this.stopDrag.bind(this, ev) // bound with args\n            );\n        };\n        FeaturefulElementDragging.prototype.stopDrag = function (ev) {\n            this.isDragging = false;\n            this.emitter.trigger('dragend', ev);\n        };\n        // fill in the implementations...\n        FeaturefulElementDragging.prototype.setIgnoreMove = function (bool) {\n            this.pointer.shouldIgnoreMove = bool;\n        };\n        FeaturefulElementDragging.prototype.setMirrorIsVisible = function (bool) {\n            this.mirror.setIsVisible(bool);\n        };\n        FeaturefulElementDragging.prototype.setMirrorNeedsRevert = function (bool) {\n            this.mirrorNeedsRevert = bool;\n        };\n        FeaturefulElementDragging.prototype.setAutoScrollEnabled = function (bool) {\n            this.autoScroller.isEnabled = bool;\n        };\n        return FeaturefulElementDragging;\n    }(core.ElementDragging));\n\n    /*\n    When this class is instantiated, it records the offset of an element (relative to the document topleft),\n    and continues to monitor scrolling, updating the cached coordinates if it needs to.\n    Does not access the DOM after instantiation, so highly performant.\n\n    Also keeps track of all scrolling/overflow:hidden containers that are parents of the given element\n    and an determine if a given point is inside the combined clipping rectangle.\n    */\n    var OffsetTracker = /** @class */ (function () {\n        function OffsetTracker(el) {\n            this.origRect = core.computeRect(el);\n            // will work fine for divs that have overflow:hidden\n            this.scrollCaches = core.getClippingParents(el).map(function (el) {\n                return new ElementScrollGeomCache(el, true); // listen=true\n            });\n        }\n        OffsetTracker.prototype.destroy = function () {\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                scrollCache.destroy();\n            }\n        };\n        OffsetTracker.prototype.computeLeft = function () {\n            var left = this.origRect.left;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                left += scrollCache.origScrollLeft - scrollCache.getScrollLeft();\n            }\n            return left;\n        };\n        OffsetTracker.prototype.computeTop = function () {\n            var top = this.origRect.top;\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                top += scrollCache.origScrollTop - scrollCache.getScrollTop();\n            }\n            return top;\n        };\n        OffsetTracker.prototype.isWithinClipping = function (pageX, pageY) {\n            var point = { left: pageX, top: pageY };\n            for (var _i = 0, _a = this.scrollCaches; _i < _a.length; _i++) {\n                var scrollCache = _a[_i];\n                if (!isIgnoredClipping(scrollCache.getEventTarget()) &&\n                    !core.pointInsideRect(point, scrollCache.clientRect)) {\n                    return false;\n                }\n            }\n            return true;\n        };\n        return OffsetTracker;\n    }());\n    // certain clipping containers should never constrain interactions, like <html> and <body>\n    // https://github.com/fullcalendar/fullcalendar/issues/3615\n    function isIgnoredClipping(node) {\n        var tagName = node.tagName;\n        return tagName === 'HTML' || tagName === 'BODY';\n    }\n\n    /*\n    Tracks movement over multiple droppable areas (aka \"hits\")\n    that exist in one or more DateComponents.\n    Relies on an existing draggable.\n\n    emits:\n    - pointerdown\n    - dragstart\n    - hitchange - fires initially, even if not over a hit\n    - pointerup\n    - (hitchange - again, to null, if ended over a hit)\n    - dragend\n    */\n    var HitDragging = /** @class */ (function () {\n        function HitDragging(dragging, droppableStore) {\n            var _this = this;\n            // options that can be set by caller\n            this.useSubjectCenter = false;\n            this.requireInitial = true; // if doesn't start out on a hit, won't emit any events\n            this.initialHit = null;\n            this.movingHit = null;\n            this.finalHit = null; // won't ever be populated if shouldIgnoreMove\n            this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                _this.initialHit = null;\n                _this.movingHit = null;\n                _this.finalHit = null;\n                _this.prepareHits();\n                _this.processFirstCoord(ev);\n                if (_this.initialHit || !_this.requireInitial) {\n                    dragging.setIgnoreMove(false);\n                    _this.emitter.trigger('pointerdown', ev); // TODO: fire this before computing processFirstCoord, so listeners can cancel. this gets fired by almost every handler :(\n                }\n                else {\n                    dragging.setIgnoreMove(true);\n                }\n            };\n            this.handleDragStart = function (ev) {\n                _this.emitter.trigger('dragstart', ev);\n                _this.handleMove(ev, true); // force = fire even if initially null\n            };\n            this.handleDragMove = function (ev) {\n                _this.emitter.trigger('dragmove', ev);\n                _this.handleMove(ev);\n            };\n            this.handlePointerUp = function (ev) {\n                _this.releaseHits();\n                _this.emitter.trigger('pointerup', ev);\n            };\n            this.handleDragEnd = function (ev) {\n                if (_this.movingHit) {\n                    _this.emitter.trigger('hitupdate', null, true, ev);\n                }\n                _this.finalHit = _this.movingHit;\n                _this.movingHit = null;\n                _this.emitter.trigger('dragend', ev);\n            };\n            this.droppableStore = droppableStore;\n            dragging.emitter.on('pointerdown', this.handlePointerDown);\n            dragging.emitter.on('dragstart', this.handleDragStart);\n            dragging.emitter.on('dragmove', this.handleDragMove);\n            dragging.emitter.on('pointerup', this.handlePointerUp);\n            dragging.emitter.on('dragend', this.handleDragEnd);\n            this.dragging = dragging;\n            this.emitter = new core.EmitterMixin();\n        }\n        // sets initialHit\n        // sets coordAdjust\n        HitDragging.prototype.processFirstCoord = function (ev) {\n            var origPoint = { left: ev.pageX, top: ev.pageY };\n            var adjustedPoint = origPoint;\n            var subjectEl = ev.subjectEl;\n            var subjectRect;\n            if (subjectEl !== document) {\n                subjectRect = core.computeRect(subjectEl);\n                adjustedPoint = core.constrainPoint(adjustedPoint, subjectRect);\n            }\n            var initialHit = this.initialHit = this.queryHitForOffset(adjustedPoint.left, adjustedPoint.top);\n            if (initialHit) {\n                if (this.useSubjectCenter && subjectRect) {\n                    var slicedSubjectRect = core.intersectRects(subjectRect, initialHit.rect);\n                    if (slicedSubjectRect) {\n                        adjustedPoint = core.getRectCenter(slicedSubjectRect);\n                    }\n                }\n                this.coordAdjust = core.diffPoints(adjustedPoint, origPoint);\n            }\n            else {\n                this.coordAdjust = { left: 0, top: 0 };\n            }\n        };\n        HitDragging.prototype.handleMove = function (ev, forceHandle) {\n            var hit = this.queryHitForOffset(ev.pageX + this.coordAdjust.left, ev.pageY + this.coordAdjust.top);\n            if (forceHandle || !isHitsEqual(this.movingHit, hit)) {\n                this.movingHit = hit;\n                this.emitter.trigger('hitupdate', hit, false, ev);\n            }\n        };\n        HitDragging.prototype.prepareHits = function () {\n            this.offsetTrackers = core.mapHash(this.droppableStore, function (interactionSettings) {\n                interactionSettings.component.buildPositionCaches();\n                return new OffsetTracker(interactionSettings.el);\n            });\n        };\n        HitDragging.prototype.releaseHits = function () {\n            var offsetTrackers = this.offsetTrackers;\n            for (var id in offsetTrackers) {\n                offsetTrackers[id].destroy();\n            }\n            this.offsetTrackers = {};\n        };\n        HitDragging.prototype.queryHitForOffset = function (offsetLeft, offsetTop) {\n            var _a = this, droppableStore = _a.droppableStore, offsetTrackers = _a.offsetTrackers;\n            var bestHit = null;\n            for (var id in droppableStore) {\n                var component = droppableStore[id].component;\n                var offsetTracker = offsetTrackers[id];\n                if (offsetTracker.isWithinClipping(offsetLeft, offsetTop)) {\n                    var originLeft = offsetTracker.computeLeft();\n                    var originTop = offsetTracker.computeTop();\n                    var positionLeft = offsetLeft - originLeft;\n                    var positionTop = offsetTop - originTop;\n                    var origRect = offsetTracker.origRect;\n                    var width = origRect.right - origRect.left;\n                    var height = origRect.bottom - origRect.top;\n                    if (\n                    // must be within the element's bounds\n                    positionLeft >= 0 && positionLeft < width &&\n                        positionTop >= 0 && positionTop < height) {\n                        var hit = component.queryHit(positionLeft, positionTop, width, height);\n                        if (hit &&\n                            (\n                            // make sure the hit is within activeRange, meaning it's not a deal cell\n                            !component.props.dateProfile || // hack for DayTile\n                                core.rangeContainsRange(component.props.dateProfile.activeRange, hit.dateSpan.range)) &&\n                            (!bestHit || hit.layer > bestHit.layer)) {\n                            // TODO: better way to re-orient rectangle\n                            hit.rect.left += originLeft;\n                            hit.rect.right += originLeft;\n                            hit.rect.top += originTop;\n                            hit.rect.bottom += originTop;\n                            bestHit = hit;\n                        }\n                    }\n                }\n            }\n            return bestHit;\n        };\n        return HitDragging;\n    }());\n    function isHitsEqual(hit0, hit1) {\n        if (!hit0 && !hit1) {\n            return true;\n        }\n        if (Boolean(hit0) !== Boolean(hit1)) {\n            return false;\n        }\n        return core.isDateSpansEqual(hit0.dateSpan, hit1.dateSpan);\n    }\n\n    /*\n    Monitors when the user clicks on a specific date/time of a component.\n    A pointerdown+pointerup on the same \"hit\" constitutes a click.\n    */\n    var DateClicking = /** @class */ (function (_super) {\n        __extends(DateClicking, _super);\n        function DateClicking(settings) {\n            var _this = _super.call(this, settings) || this;\n            _this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                // do this in pointerdown (not dragend) because DOM might be mutated by the time dragend is fired\n                dragging.setIgnoreMove(!_this.component.isValidDateDownEl(dragging.pointer.downEl));\n            };\n            // won't even fire if moving was ignored\n            _this.handleDragEnd = function (ev) {\n                var component = _this.component;\n                var pointer = _this.dragging.pointer;\n                if (!pointer.wasTouchScroll) {\n                    var _a = _this.hitDragging, initialHit = _a.initialHit, finalHit = _a.finalHit;\n                    if (initialHit && finalHit && isHitsEqual(initialHit, finalHit)) {\n                        component.calendar.triggerDateClick(initialHit.dateSpan, initialHit.dayEl, component.view, ev.origEvent);\n                    }\n                }\n            };\n            var component = settings.component;\n            // we DO want to watch pointer moves because otherwise finalHit won't get populated\n            _this.dragging = new FeaturefulElementDragging(component.el);\n            _this.dragging.autoScroller.isEnabled = false;\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        DateClicking.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return DateClicking;\n    }(core.Interaction));\n\n    /*\n    Tracks when the user selects a portion of time of a component,\n    constituted by a drag over date cells, with a possible delay at the beginning of the drag.\n    */\n    var DateSelecting = /** @class */ (function (_super) {\n        __extends(DateSelecting, _super);\n        function DateSelecting(settings) {\n            var _this = _super.call(this, settings) || this;\n            _this.dragSelection = null;\n            _this.handlePointerDown = function (ev) {\n                var _a = _this, component = _a.component, dragging = _a.dragging;\n                var canSelect = component.opt('selectable') &&\n                    component.isValidDateDownEl(ev.origEvent.target);\n                // don't bother to watch expensive moves if component won't do selection\n                dragging.setIgnoreMove(!canSelect);\n                // if touch, require user to hold down\n                dragging.delay = ev.isTouch ? getComponentTouchDelay(component) : null;\n            };\n            _this.handleDragStart = function (ev) {\n                _this.component.calendar.unselect(ev); // unselect previous selections\n            };\n            _this.handleHitUpdate = function (hit, isFinal) {\n                var calendar = _this.component.calendar;\n                var dragSelection = null;\n                var isInvalid = false;\n                if (hit) {\n                    dragSelection = joinHitsIntoSelection(_this.hitDragging.initialHit, hit, calendar.pluginSystem.hooks.dateSelectionTransformers);\n                    if (!dragSelection || !_this.component.isDateSelectionValid(dragSelection)) {\n                        isInvalid = true;\n                        dragSelection = null;\n                    }\n                }\n                if (dragSelection) {\n                    calendar.dispatch({ type: 'SELECT_DATES', selection: dragSelection });\n                }\n                else if (!isFinal) { // only unselect if moved away while dragging\n                    calendar.dispatch({ type: 'UNSELECT_DATES' });\n                }\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    _this.dragSelection = dragSelection; // only clear if moved away from all hits while dragging\n                }\n            };\n            _this.handlePointerUp = function (pev) {\n                if (_this.dragSelection) {\n                    // selection is already rendered, so just need to report selection\n                    _this.component.calendar.triggerDateSelect(_this.dragSelection, pev);\n                    _this.dragSelection = null;\n                }\n            };\n            var component = settings.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.touchScrollAllowed = false;\n            dragging.minDistance = component.opt('selectMinDistance') || 0;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n            return _this;\n        }\n        DateSelecting.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return DateSelecting;\n    }(core.Interaction));\n    function getComponentTouchDelay(component) {\n        var delay = component.opt('selectLongPressDelay');\n        if (delay == null) {\n            delay = component.opt('longPressDelay');\n        }\n        return delay;\n    }\n    function joinHitsIntoSelection(hit0, hit1, dateSelectionTransformers) {\n        var dateSpan0 = hit0.dateSpan;\n        var dateSpan1 = hit1.dateSpan;\n        var ms = [\n            dateSpan0.range.start,\n            dateSpan0.range.end,\n            dateSpan1.range.start,\n            dateSpan1.range.end\n        ];\n        ms.sort(core.compareNumbers);\n        var props = {};\n        for (var _i = 0, dateSelectionTransformers_1 = dateSelectionTransformers; _i < dateSelectionTransformers_1.length; _i++) {\n            var transformer = dateSelectionTransformers_1[_i];\n            var res = transformer(hit0, hit1);\n            if (res === false) {\n                return null;\n            }\n            else if (res) {\n                __assign(props, res);\n            }\n        }\n        props.range = { start: ms[0], end: ms[3] };\n        props.allDay = dateSpan0.allDay;\n        return props;\n    }\n\n    var EventDragging = /** @class */ (function (_super) {\n        __extends(EventDragging, _super);\n        function EventDragging(settings) {\n            var _this = _super.call(this, settings) || this;\n            // internal state\n            _this.subjectSeg = null; // the seg being selected/dragged\n            _this.isDragging = false;\n            _this.eventRange = null;\n            _this.relevantEvents = null; // the events being dragged\n            _this.receivingCalendar = null;\n            _this.validMutation = null;\n            _this.mutatedRelevantEvents = null;\n            _this.handlePointerDown = function (ev) {\n                var origTarget = ev.origEvent.target;\n                var _a = _this, component = _a.component, dragging = _a.dragging;\n                var mirror = dragging.mirror;\n                var initialCalendar = component.calendar;\n                var subjectSeg = _this.subjectSeg = core.getElSeg(ev.subjectEl);\n                var eventRange = _this.eventRange = subjectSeg.eventRange;\n                var eventInstanceId = eventRange.instance.instanceId;\n                _this.relevantEvents = core.getRelevantEvents(initialCalendar.state.eventStore, eventInstanceId);\n                dragging.minDistance = ev.isTouch ? 0 : component.opt('eventDragMinDistance');\n                dragging.delay =\n                    // only do a touch delay if touch and this event hasn't been selected yet\n                    (ev.isTouch && eventInstanceId !== component.props.eventSelection) ?\n                        getComponentTouchDelay$1(component) :\n                        null;\n                mirror.parentNode = initialCalendar.el;\n                mirror.revertDuration = component.opt('dragRevertDuration');\n                var isValid = component.isValidSegDownEl(origTarget) &&\n                    !core.elementClosest(origTarget, '.fc-resizer');\n                dragging.setIgnoreMove(!isValid);\n                // disable dragging for elements that are resizable (ie, selectable)\n                // but are not draggable\n                _this.isDragging = isValid &&\n                    ev.subjectEl.classList.contains('fc-draggable');\n            };\n            _this.handleDragStart = function (ev) {\n                var initialCalendar = _this.component.calendar;\n                var eventRange = _this.eventRange;\n                var eventInstanceId = eventRange.instance.instanceId;\n                if (ev.isTouch) {\n                    // need to select a different event?\n                    if (eventInstanceId !== _this.component.props.eventSelection) {\n                        initialCalendar.dispatch({ type: 'SELECT_EVENT', eventInstanceId: eventInstanceId });\n                    }\n                }\n                else {\n                    // if now using mouse, but was previous touch interaction, clear selected event\n                    initialCalendar.dispatch({ type: 'UNSELECT_EVENT' });\n                }\n                if (_this.isDragging) {\n                    initialCalendar.unselect(ev); // unselect *date* selection\n                    initialCalendar.publiclyTrigger('eventDragStart', [\n                        {\n                            el: _this.subjectSeg.el,\n                            event: new core.EventApi(initialCalendar, eventRange.def, eventRange.instance),\n                            jsEvent: ev.origEvent,\n                            view: _this.component.view\n                        }\n                    ]);\n                }\n            };\n            _this.handleHitUpdate = function (hit, isFinal) {\n                if (!_this.isDragging) {\n                    return;\n                }\n                var relevantEvents = _this.relevantEvents;\n                var initialHit = _this.hitDragging.initialHit;\n                var initialCalendar = _this.component.calendar;\n                // states based on new hit\n                var receivingCalendar = null;\n                var mutation = null;\n                var mutatedRelevantEvents = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: relevantEvents,\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: true,\n                    origSeg: _this.subjectSeg\n                };\n                if (hit) {\n                    var receivingComponent = hit.component;\n                    receivingCalendar = receivingComponent.calendar;\n                    if (initialCalendar === receivingCalendar ||\n                        receivingComponent.opt('editable') && receivingComponent.opt('droppable')) {\n                        mutation = computeEventMutation(initialHit, hit, receivingCalendar.pluginSystem.hooks.eventDragMutationMassagers);\n                        if (mutation) {\n                            mutatedRelevantEvents = core.applyMutationToEventStore(relevantEvents, receivingCalendar.eventUiBases, mutation, receivingCalendar);\n                            interaction.mutatedEvents = mutatedRelevantEvents;\n                            if (!receivingComponent.isInteractionValid(interaction)) {\n                                isInvalid = true;\n                                mutation = null;\n                                mutatedRelevantEvents = null;\n                                interaction.mutatedEvents = core.createEmptyEventStore();\n                            }\n                        }\n                    }\n                    else {\n                        receivingCalendar = null;\n                    }\n                }\n                _this.displayDrag(receivingCalendar, interaction);\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    if (initialCalendar === receivingCalendar && // TODO: write test for this\n                        isHitsEqual(initialHit, hit)) {\n                        mutation = null;\n                    }\n                    _this.dragging.setMirrorNeedsRevert(!mutation);\n                    // render the mirror if no already-rendered mirror\n                    // TODO: wish we could somehow wait for dispatch to guarantee render\n                    _this.dragging.setMirrorIsVisible(!hit || !document.querySelector('.fc-mirror'));\n                    // assign states based on new hit\n                    _this.receivingCalendar = receivingCalendar;\n                    _this.validMutation = mutation;\n                    _this.mutatedRelevantEvents = mutatedRelevantEvents;\n                }\n            };\n            _this.handlePointerUp = function () {\n                if (!_this.isDragging) {\n                    _this.cleanup(); // because handleDragEnd won't fire\n                }\n            };\n            _this.handleDragEnd = function (ev) {\n                if (_this.isDragging) {\n                    var initialCalendar_1 = _this.component.calendar;\n                    var initialView = _this.component.view;\n                    var receivingCalendar = _this.receivingCalendar;\n                    var eventDef = _this.eventRange.def;\n                    var eventInstance = _this.eventRange.instance;\n                    var eventApi = new core.EventApi(initialCalendar_1, eventDef, eventInstance);\n                    var relevantEvents_1 = _this.relevantEvents;\n                    var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                    var finalHit = _this.hitDragging.finalHit;\n                    _this.clearDrag(); // must happen after revert animation\n                    initialCalendar_1.publiclyTrigger('eventDragStop', [\n                        {\n                            el: _this.subjectSeg.el,\n                            event: eventApi,\n                            jsEvent: ev.origEvent,\n                            view: initialView\n                        }\n                    ]);\n                    if (_this.validMutation) {\n                        // dropped within same calendar\n                        if (receivingCalendar === initialCalendar_1) {\n                            initialCalendar_1.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: mutatedRelevantEvents\n                            });\n                            var eventDropArg = {};\n                            for (var _i = 0, _a = initialCalendar_1.pluginSystem.hooks.eventDropTransformers; _i < _a.length; _i++) {\n                                var transformer = _a[_i];\n                                __assign(eventDropArg, transformer(_this.validMutation, initialCalendar_1));\n                            }\n                            __assign(eventDropArg, {\n                                el: ev.subjectEl,\n                                delta: _this.validMutation.startDelta,\n                                oldEvent: eventApi,\n                                event: new core.EventApi(// the data AFTER the mutation\n                                initialCalendar_1, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                                revert: function () {\n                                    initialCalendar_1.dispatch({\n                                        type: 'MERGE_EVENTS',\n                                        eventStore: relevantEvents_1\n                                    });\n                                },\n                                jsEvent: ev.origEvent,\n                                view: initialView\n                            });\n                            initialCalendar_1.publiclyTrigger('eventDrop', [eventDropArg]);\n                            // dropped in different calendar\n                        }\n                        else if (receivingCalendar) {\n                            initialCalendar_1.publiclyTrigger('eventLeave', [\n                                {\n                                    draggedEl: ev.subjectEl,\n                                    event: eventApi,\n                                    view: initialView\n                                }\n                            ]);\n                            initialCalendar_1.dispatch({\n                                type: 'REMOVE_EVENT_INSTANCES',\n                                instances: _this.mutatedRelevantEvents.instances\n                            });\n                            receivingCalendar.dispatch({\n                                type: 'MERGE_EVENTS',\n                                eventStore: _this.mutatedRelevantEvents\n                            });\n                            if (ev.isTouch) {\n                                receivingCalendar.dispatch({\n                                    type: 'SELECT_EVENT',\n                                    eventInstanceId: eventInstance.instanceId\n                                });\n                            }\n                            var dropArg = receivingCalendar.buildDatePointApi(finalHit.dateSpan);\n                            dropArg.draggedEl = ev.subjectEl;\n                            dropArg.jsEvent = ev.origEvent;\n                            dropArg.view = finalHit.component; // ?\n                            receivingCalendar.publiclyTrigger('drop', [dropArg]);\n                            receivingCalendar.publiclyTrigger('eventReceive', [\n                                {\n                                    draggedEl: ev.subjectEl,\n                                    event: new core.EventApi(// the data AFTER the mutation\n                                    receivingCalendar, mutatedRelevantEvents.defs[eventDef.defId], mutatedRelevantEvents.instances[eventInstance.instanceId]),\n                                    view: finalHit.component\n                                }\n                            ]);\n                        }\n                    }\n                    else {\n                        initialCalendar_1.publiclyTrigger('_noEventDrop');\n                    }\n                }\n                _this.cleanup();\n            };\n            var component = _this.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.pointer.selector = EventDragging.SELECTOR;\n            dragging.touchScrollAllowed = false;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsStore);\n            hitDragging.useSubjectCenter = settings.useEventCenter;\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('pointerup', _this.handlePointerUp);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        EventDragging.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        // render a drag state on the next receivingCalendar\n        EventDragging.prototype.displayDrag = function (nextCalendar, state) {\n            var initialCalendar = this.component.calendar;\n            var prevCalendar = this.receivingCalendar;\n            // does the previous calendar need to be cleared?\n            if (prevCalendar && prevCalendar !== nextCalendar) {\n                // does the initial calendar need to be cleared?\n                // if so, don't clear all the way. we still need to to hide the affectedEvents\n                if (prevCalendar === initialCalendar) {\n                    prevCalendar.dispatch({\n                        type: 'SET_EVENT_DRAG',\n                        state: {\n                            affectedEvents: state.affectedEvents,\n                            mutatedEvents: core.createEmptyEventStore(),\n                            isEvent: true,\n                            origSeg: state.origSeg\n                        }\n                    });\n                    // completely clear the old calendar if it wasn't the initial\n                }\n                else {\n                    prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n                }\n            }\n            if (nextCalendar) {\n                nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n            }\n        };\n        EventDragging.prototype.clearDrag = function () {\n            var initialCalendar = this.component.calendar;\n            var receivingCalendar = this.receivingCalendar;\n            if (receivingCalendar) {\n                receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n            // the initial calendar might have an dummy drag state from displayDrag\n            if (initialCalendar !== receivingCalendar) {\n                initialCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        };\n        EventDragging.prototype.cleanup = function () {\n            this.subjectSeg = null;\n            this.isDragging = false;\n            this.eventRange = null;\n            this.relevantEvents = null;\n            this.receivingCalendar = null;\n            this.validMutation = null;\n            this.mutatedRelevantEvents = null;\n        };\n        EventDragging.SELECTOR = '.fc-draggable, .fc-resizable'; // TODO: test this in IE11\n        return EventDragging;\n    }(core.Interaction));\n    function computeEventMutation(hit0, hit1, massagers) {\n        var dateSpan0 = hit0.dateSpan;\n        var dateSpan1 = hit1.dateSpan;\n        var date0 = dateSpan0.range.start;\n        var date1 = dateSpan1.range.start;\n        var standardProps = {};\n        if (dateSpan0.allDay !== dateSpan1.allDay) {\n            standardProps.allDay = dateSpan1.allDay;\n            standardProps.hasEnd = hit1.component.opt('allDayMaintainDuration');\n            if (dateSpan1.allDay) {\n                // means date1 is already start-of-day,\n                // but date0 needs to be converted\n                date0 = core.startOfDay(date0);\n            }\n        }\n        var delta = core.diffDates(date0, date1, hit0.component.dateEnv, hit0.component === hit1.component ?\n            hit0.component.largeUnit :\n            null);\n        if (delta.milliseconds) { // has hours/minutes/seconds\n            standardProps.allDay = false;\n        }\n        var mutation = {\n            startDelta: delta,\n            endDelta: delta,\n            standardProps: standardProps\n        };\n        for (var _i = 0, massagers_1 = massagers; _i < massagers_1.length; _i++) {\n            var massager = massagers_1[_i];\n            massager(mutation, hit0, hit1);\n        }\n        return mutation;\n    }\n    function getComponentTouchDelay$1(component) {\n        var delay = component.opt('eventLongPressDelay');\n        if (delay == null) {\n            delay = component.opt('longPressDelay');\n        }\n        return delay;\n    }\n\n    var EventDragging$1 = /** @class */ (function (_super) {\n        __extends(EventDragging, _super);\n        function EventDragging(settings) {\n            var _this = _super.call(this, settings) || this;\n            // internal state\n            _this.draggingSeg = null; // TODO: rename to resizingSeg? subjectSeg?\n            _this.eventRange = null;\n            _this.relevantEvents = null;\n            _this.validMutation = null;\n            _this.mutatedRelevantEvents = null;\n            _this.handlePointerDown = function (ev) {\n                var component = _this.component;\n                var seg = _this.querySeg(ev);\n                var eventRange = _this.eventRange = seg.eventRange;\n                _this.dragging.minDistance = component.opt('eventDragMinDistance');\n                // if touch, need to be working with a selected event\n                _this.dragging.setIgnoreMove(!_this.component.isValidSegDownEl(ev.origEvent.target) ||\n                    (ev.isTouch && _this.component.props.eventSelection !== eventRange.instance.instanceId));\n            };\n            _this.handleDragStart = function (ev) {\n                var calendar = _this.component.calendar;\n                var eventRange = _this.eventRange;\n                _this.relevantEvents = core.getRelevantEvents(calendar.state.eventStore, _this.eventRange.instance.instanceId);\n                _this.draggingSeg = _this.querySeg(ev);\n                calendar.unselect();\n                calendar.publiclyTrigger('eventResizeStart', [\n                    {\n                        el: _this.draggingSeg.el,\n                        event: new core.EventApi(calendar, eventRange.def, eventRange.instance),\n                        jsEvent: ev.origEvent,\n                        view: _this.component.view\n                    }\n                ]);\n            };\n            _this.handleHitUpdate = function (hit, isFinal, ev) {\n                var calendar = _this.component.calendar;\n                var relevantEvents = _this.relevantEvents;\n                var initialHit = _this.hitDragging.initialHit;\n                var eventInstance = _this.eventRange.instance;\n                var mutation = null;\n                var mutatedRelevantEvents = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: relevantEvents,\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: true,\n                    origSeg: _this.draggingSeg\n                };\n                if (hit) {\n                    mutation = computeMutation(initialHit, hit, ev.subjectEl.classList.contains('fc-start-resizer'), eventInstance.range, calendar.pluginSystem.hooks.eventResizeJoinTransforms);\n                }\n                if (mutation) {\n                    mutatedRelevantEvents = core.applyMutationToEventStore(relevantEvents, calendar.eventUiBases, mutation, calendar);\n                    interaction.mutatedEvents = mutatedRelevantEvents;\n                    if (!_this.component.isInteractionValid(interaction)) {\n                        isInvalid = true;\n                        mutation = null;\n                        mutatedRelevantEvents = null;\n                        interaction.mutatedEvents = null;\n                    }\n                }\n                if (mutatedRelevantEvents) {\n                    calendar.dispatch({\n                        type: 'SET_EVENT_RESIZE',\n                        state: interaction\n                    });\n                }\n                else {\n                    calendar.dispatch({ type: 'UNSET_EVENT_RESIZE' });\n                }\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    if (mutation && isHitsEqual(initialHit, hit)) {\n                        mutation = null;\n                    }\n                    _this.validMutation = mutation;\n                    _this.mutatedRelevantEvents = mutatedRelevantEvents;\n                }\n            };\n            _this.handleDragEnd = function (ev) {\n                var calendar = _this.component.calendar;\n                var view = _this.component.view;\n                var eventDef = _this.eventRange.def;\n                var eventInstance = _this.eventRange.instance;\n                var eventApi = new core.EventApi(calendar, eventDef, eventInstance);\n                var relevantEvents = _this.relevantEvents;\n                var mutatedRelevantEvents = _this.mutatedRelevantEvents;\n                calendar.publiclyTrigger('eventResizeStop', [\n                    {\n                        el: _this.draggingSeg.el,\n                        event: eventApi,\n                        jsEvent: ev.origEvent,\n                        view: view\n                    }\n                ]);\n                if (_this.validMutation) {\n                    calendar.dispatch({\n                        type: 'MERGE_EVENTS',\n                        eventStore: mutatedRelevantEvents\n                    });\n                    calendar.publiclyTrigger('eventResize', [\n                        {\n                            el: _this.draggingSeg.el,\n                            startDelta: _this.validMutation.startDelta || core.createDuration(0),\n                            endDelta: _this.validMutation.endDelta || core.createDuration(0),\n                            prevEvent: eventApi,\n                            event: new core.EventApi(// the data AFTER the mutation\n                            calendar, mutatedRelevantEvents.defs[eventDef.defId], eventInstance ? mutatedRelevantEvents.instances[eventInstance.instanceId] : null),\n                            revert: function () {\n                                calendar.dispatch({\n                                    type: 'MERGE_EVENTS',\n                                    eventStore: relevantEvents\n                                });\n                            },\n                            jsEvent: ev.origEvent,\n                            view: view\n                        }\n                    ]);\n                }\n                else {\n                    calendar.publiclyTrigger('_noEventResize');\n                }\n                // reset all internal state\n                _this.draggingSeg = null;\n                _this.relevantEvents = null;\n                _this.validMutation = null;\n                // okay to keep eventInstance around. useful to set it in handlePointerDown\n            };\n            var component = settings.component;\n            var dragging = _this.dragging = new FeaturefulElementDragging(component.el);\n            dragging.pointer.selector = '.fc-resizer';\n            dragging.touchScrollAllowed = false;\n            dragging.autoScroller.isEnabled = component.opt('dragScroll');\n            var hitDragging = _this.hitDragging = new HitDragging(_this.dragging, core.interactionSettingsToStore(settings));\n            hitDragging.emitter.on('pointerdown', _this.handlePointerDown);\n            hitDragging.emitter.on('dragstart', _this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', _this.handleHitUpdate);\n            hitDragging.emitter.on('dragend', _this.handleDragEnd);\n            return _this;\n        }\n        EventDragging.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        EventDragging.prototype.querySeg = function (ev) {\n            return core.getElSeg(core.elementClosest(ev.subjectEl, this.component.fgSegSelector));\n        };\n        return EventDragging;\n    }(core.Interaction));\n    function computeMutation(hit0, hit1, isFromStart, instanceRange, transforms) {\n        var dateEnv = hit0.component.dateEnv;\n        var date0 = hit0.dateSpan.range.start;\n        var date1 = hit1.dateSpan.range.start;\n        var delta = core.diffDates(date0, date1, dateEnv, hit0.component.largeUnit);\n        var props = {};\n        for (var _i = 0, transforms_1 = transforms; _i < transforms_1.length; _i++) {\n            var transform = transforms_1[_i];\n            var res = transform(hit0, hit1);\n            if (res === false) {\n                return null;\n            }\n            else if (res) {\n                __assign(props, res);\n            }\n        }\n        if (isFromStart) {\n            if (dateEnv.add(instanceRange.start, delta) < instanceRange.end) {\n                props.startDelta = delta;\n                return props;\n            }\n        }\n        else {\n            if (dateEnv.add(instanceRange.end, delta) > instanceRange.start) {\n                props.endDelta = delta;\n                return props;\n            }\n        }\n        return null;\n    }\n\n    var UnselectAuto = /** @class */ (function () {\n        function UnselectAuto(calendar) {\n            var _this = this;\n            this.isRecentPointerDateSelect = false; // wish we could use a selector to detect date selection, but uses hit system\n            this.onSelect = function (selectInfo) {\n                if (selectInfo.jsEvent) {\n                    _this.isRecentPointerDateSelect = true;\n                }\n            };\n            this.onDocumentPointerUp = function (pev) {\n                var _a = _this, calendar = _a.calendar, documentPointer = _a.documentPointer;\n                var state = calendar.state;\n                // touch-scrolling should never unfocus any type of selection\n                if (!documentPointer.wasTouchScroll) {\n                    if (state.dateSelection && // an existing date selection?\n                        !_this.isRecentPointerDateSelect // a new pointer-initiated date selection since last onDocumentPointerUp?\n                    ) {\n                        var unselectAuto = calendar.viewOpt('unselectAuto');\n                        var unselectCancel = calendar.viewOpt('unselectCancel');\n                        if (unselectAuto && (!unselectAuto || !core.elementClosest(documentPointer.downEl, unselectCancel))) {\n                            calendar.unselect(pev);\n                        }\n                    }\n                    if (state.eventSelection && // an existing event selected?\n                        !core.elementClosest(documentPointer.downEl, EventDragging.SELECTOR) // interaction DIDN'T start on an event\n                    ) {\n                        calendar.dispatch({ type: 'UNSELECT_EVENT' });\n                    }\n                }\n                _this.isRecentPointerDateSelect = false;\n            };\n            this.calendar = calendar;\n            var documentPointer = this.documentPointer = new PointerDragging(document);\n            documentPointer.shouldIgnoreMove = true;\n            documentPointer.shouldWatchScroll = false;\n            documentPointer.emitter.on('pointerup', this.onDocumentPointerUp);\n            /*\n            TODO: better way to know about whether there was a selection with the pointer\n            */\n            calendar.on('select', this.onSelect);\n        }\n        UnselectAuto.prototype.destroy = function () {\n            this.calendar.off('select', this.onSelect);\n            this.documentPointer.destroy();\n        };\n        return UnselectAuto;\n    }());\n\n    /*\n    Given an already instantiated draggable object for one-or-more elements,\n    Interprets any dragging as an attempt to drag an events that lives outside\n    of a calendar onto a calendar.\n    */\n    var ExternalElementDragging = /** @class */ (function () {\n        function ExternalElementDragging(dragging, suppliedDragMeta) {\n            var _this = this;\n            this.receivingCalendar = null;\n            this.droppableEvent = null; // will exist for all drags, even if create:false\n            this.suppliedDragMeta = null;\n            this.dragMeta = null;\n            this.handleDragStart = function (ev) {\n                _this.dragMeta = _this.buildDragMeta(ev.subjectEl);\n            };\n            this.handleHitUpdate = function (hit, isFinal, ev) {\n                var dragging = _this.hitDragging.dragging;\n                var receivingCalendar = null;\n                var droppableEvent = null;\n                var isInvalid = false;\n                var interaction = {\n                    affectedEvents: core.createEmptyEventStore(),\n                    mutatedEvents: core.createEmptyEventStore(),\n                    isEvent: _this.dragMeta.create,\n                    origSeg: null\n                };\n                if (hit) {\n                    receivingCalendar = hit.component.calendar;\n                    if (_this.canDropElOnCalendar(ev.subjectEl, receivingCalendar)) {\n                        droppableEvent = computeEventForDateSpan(hit.dateSpan, _this.dragMeta, receivingCalendar);\n                        interaction.mutatedEvents = core.eventTupleToStore(droppableEvent);\n                        isInvalid = !core.isInteractionValid(interaction, receivingCalendar);\n                        if (isInvalid) {\n                            interaction.mutatedEvents = core.createEmptyEventStore();\n                            droppableEvent = null;\n                        }\n                    }\n                }\n                _this.displayDrag(receivingCalendar, interaction);\n                // show mirror if no already-rendered mirror element OR if we are shutting down the mirror (?)\n                // TODO: wish we could somehow wait for dispatch to guarantee render\n                dragging.setMirrorIsVisible(isFinal || !droppableEvent || !document.querySelector('.fc-mirror'));\n                if (!isInvalid) {\n                    core.enableCursor();\n                }\n                else {\n                    core.disableCursor();\n                }\n                if (!isFinal) {\n                    dragging.setMirrorNeedsRevert(!droppableEvent);\n                    _this.receivingCalendar = receivingCalendar;\n                    _this.droppableEvent = droppableEvent;\n                }\n            };\n            this.handleDragEnd = function (pev) {\n                var _a = _this, receivingCalendar = _a.receivingCalendar, droppableEvent = _a.droppableEvent;\n                _this.clearDrag();\n                if (receivingCalendar && droppableEvent) {\n                    var finalHit = _this.hitDragging.finalHit;\n                    var finalView = finalHit.component.view;\n                    var dragMeta = _this.dragMeta;\n                    var arg = receivingCalendar.buildDatePointApi(finalHit.dateSpan);\n                    arg.draggedEl = pev.subjectEl;\n                    arg.jsEvent = pev.origEvent;\n                    arg.view = finalView;\n                    receivingCalendar.publiclyTrigger('drop', [arg]);\n                    if (dragMeta.create) {\n                        receivingCalendar.dispatch({\n                            type: 'MERGE_EVENTS',\n                            eventStore: core.eventTupleToStore(droppableEvent)\n                        });\n                        if (pev.isTouch) {\n                            receivingCalendar.dispatch({\n                                type: 'SELECT_EVENT',\n                                eventInstanceId: droppableEvent.instance.instanceId\n                            });\n                        }\n                        // signal that an external event landed\n                        receivingCalendar.publiclyTrigger('eventReceive', [\n                            {\n                                draggedEl: pev.subjectEl,\n                                event: new core.EventApi(receivingCalendar, droppableEvent.def, droppableEvent.instance),\n                                view: finalView\n                            }\n                        ]);\n                    }\n                }\n                _this.receivingCalendar = null;\n                _this.droppableEvent = null;\n            };\n            var hitDragging = this.hitDragging = new HitDragging(dragging, core.interactionSettingsStore);\n            hitDragging.requireInitial = false; // will start outside of a component\n            hitDragging.emitter.on('dragstart', this.handleDragStart);\n            hitDragging.emitter.on('hitupdate', this.handleHitUpdate);\n            hitDragging.emitter.on('dragend', this.handleDragEnd);\n            this.suppliedDragMeta = suppliedDragMeta;\n        }\n        ExternalElementDragging.prototype.buildDragMeta = function (subjectEl) {\n            if (typeof this.suppliedDragMeta === 'object') {\n                return core.parseDragMeta(this.suppliedDragMeta);\n            }\n            else if (typeof this.suppliedDragMeta === 'function') {\n                return core.parseDragMeta(this.suppliedDragMeta(subjectEl));\n            }\n            else {\n                return getDragMetaFromEl(subjectEl);\n            }\n        };\n        ExternalElementDragging.prototype.displayDrag = function (nextCalendar, state) {\n            var prevCalendar = this.receivingCalendar;\n            if (prevCalendar && prevCalendar !== nextCalendar) {\n                prevCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n            if (nextCalendar) {\n                nextCalendar.dispatch({ type: 'SET_EVENT_DRAG', state: state });\n            }\n        };\n        ExternalElementDragging.prototype.clearDrag = function () {\n            if (this.receivingCalendar) {\n                this.receivingCalendar.dispatch({ type: 'UNSET_EVENT_DRAG' });\n            }\n        };\n        ExternalElementDragging.prototype.canDropElOnCalendar = function (el, receivingCalendar) {\n            var dropAccept = receivingCalendar.opt('dropAccept');\n            if (typeof dropAccept === 'function') {\n                return dropAccept(el);\n            }\n            else if (typeof dropAccept === 'string' && dropAccept) {\n                return Boolean(core.elementMatches(el, dropAccept));\n            }\n            return true;\n        };\n        return ExternalElementDragging;\n    }());\n    // Utils for computing event store from the DragMeta\n    // ----------------------------------------------------------------------------------------------------\n    function computeEventForDateSpan(dateSpan, dragMeta, calendar) {\n        var defProps = __assign({}, dragMeta.leftoverProps);\n        for (var _i = 0, _a = calendar.pluginSystem.hooks.externalDefTransforms; _i < _a.length; _i++) {\n            var transform = _a[_i];\n            __assign(defProps, transform(dateSpan, dragMeta));\n        }\n        var def = core.parseEventDef(defProps, dragMeta.sourceId, dateSpan.allDay, calendar.opt('forceEventDuration') || Boolean(dragMeta.duration), // hasEnd\n        calendar);\n        var start = dateSpan.range.start;\n        // only rely on time info if drop zone is all-day,\n        // otherwise, we already know the time\n        if (dateSpan.allDay && dragMeta.startTime) {\n            start = calendar.dateEnv.add(start, dragMeta.startTime);\n        }\n        var end = dragMeta.duration ?\n            calendar.dateEnv.add(start, dragMeta.duration) :\n            calendar.getDefaultEventEnd(dateSpan.allDay, start);\n        var instance = core.createEventInstance(def.defId, { start: start, end: end });\n        return { def: def, instance: instance };\n    }\n    // Utils for extracting data from element\n    // ----------------------------------------------------------------------------------------------------\n    function getDragMetaFromEl(el) {\n        var str = getEmbeddedElData(el, 'event');\n        var obj = str ?\n            JSON.parse(str) :\n            { create: false }; // if no embedded data, assume no event creation\n        return core.parseDragMeta(obj);\n    }\n    core.config.dataAttrPrefix = '';\n    function getEmbeddedElData(el, name) {\n        var prefix = core.config.dataAttrPrefix;\n        var prefixedName = (prefix ? prefix + '-' : '') + name;\n        return el.getAttribute('data-' + prefixedName) || '';\n    }\n\n    /*\n    Makes an element (that is *external* to any calendar) draggable.\n    Can pass in data that determines how an event will be created when dropped onto a calendar.\n    Leverages FullCalendar's internal drag-n-drop functionality WITHOUT a third-party drag system.\n    */\n    var ExternalDraggable = /** @class */ (function () {\n        function ExternalDraggable(el, settings) {\n            var _this = this;\n            if (settings === void 0) { settings = {}; }\n            this.handlePointerDown = function (ev) {\n                var dragging = _this.dragging;\n                var _a = _this.settings, minDistance = _a.minDistance, longPressDelay = _a.longPressDelay;\n                dragging.minDistance =\n                    minDistance != null ?\n                        minDistance :\n                        (ev.isTouch ? 0 : core.globalDefaults.eventDragMinDistance);\n                dragging.delay =\n                    ev.isTouch ? // TODO: eventually read eventLongPressDelay instead vvv\n                        (longPressDelay != null ? longPressDelay : core.globalDefaults.longPressDelay) :\n                        0;\n            };\n            this.handleDragStart = function (ev) {\n                if (ev.isTouch &&\n                    _this.dragging.delay &&\n                    ev.subjectEl.classList.contains('fc-event')) {\n                    _this.dragging.mirror.getMirrorEl().classList.add('fc-selected');\n                }\n            };\n            this.settings = settings;\n            var dragging = this.dragging = new FeaturefulElementDragging(el);\n            dragging.touchScrollAllowed = false;\n            if (settings.itemSelector != null) {\n                dragging.pointer.selector = settings.itemSelector;\n            }\n            if (settings.appendTo != null) {\n                dragging.mirror.parentNode = settings.appendTo; // TODO: write tests\n            }\n            dragging.emitter.on('pointerdown', this.handlePointerDown);\n            dragging.emitter.on('dragstart', this.handleDragStart);\n            new ExternalElementDragging(dragging, settings.eventData);\n        }\n        ExternalDraggable.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return ExternalDraggable;\n    }());\n\n    /*\n    Detects when a *THIRD-PARTY* drag-n-drop system interacts with elements.\n    The third-party system is responsible for drawing the visuals effects of the drag.\n    This class simply monitors for pointer movements and fires events.\n    It also has the ability to hide the moving element (the \"mirror\") during the drag.\n    */\n    var InferredElementDragging = /** @class */ (function (_super) {\n        __extends(InferredElementDragging, _super);\n        function InferredElementDragging(containerEl) {\n            var _this = _super.call(this, containerEl) || this;\n            _this.shouldIgnoreMove = false;\n            _this.mirrorSelector = '';\n            _this.currentMirrorEl = null;\n            _this.handlePointerDown = function (ev) {\n                _this.emitter.trigger('pointerdown', ev);\n                if (!_this.shouldIgnoreMove) {\n                    // fire dragstart right away. does not support delay or min-distance\n                    _this.emitter.trigger('dragstart', ev);\n                }\n            };\n            _this.handlePointerMove = function (ev) {\n                if (!_this.shouldIgnoreMove) {\n                    _this.emitter.trigger('dragmove', ev);\n                }\n            };\n            _this.handlePointerUp = function (ev) {\n                _this.emitter.trigger('pointerup', ev);\n                if (!_this.shouldIgnoreMove) {\n                    // fire dragend right away. does not support a revert animation\n                    _this.emitter.trigger('dragend', ev);\n                }\n            };\n            var pointer = _this.pointer = new PointerDragging(containerEl);\n            pointer.emitter.on('pointerdown', _this.handlePointerDown);\n            pointer.emitter.on('pointermove', _this.handlePointerMove);\n            pointer.emitter.on('pointerup', _this.handlePointerUp);\n            return _this;\n        }\n        InferredElementDragging.prototype.destroy = function () {\n            this.pointer.destroy();\n        };\n        InferredElementDragging.prototype.setIgnoreMove = function (bool) {\n            this.shouldIgnoreMove = bool;\n        };\n        InferredElementDragging.prototype.setMirrorIsVisible = function (bool) {\n            if (bool) {\n                // restore a previously hidden element.\n                // use the reference in case the selector class has already been removed.\n                if (this.currentMirrorEl) {\n                    this.currentMirrorEl.style.visibility = '';\n                    this.currentMirrorEl = null;\n                }\n            }\n            else {\n                var mirrorEl = this.mirrorSelector ?\n                    document.querySelector(this.mirrorSelector) :\n                    null;\n                if (mirrorEl) {\n                    this.currentMirrorEl = mirrorEl;\n                    mirrorEl.style.visibility = 'hidden';\n                }\n            }\n        };\n        return InferredElementDragging;\n    }(core.ElementDragging));\n\n    /*\n    Bridges third-party drag-n-drop systems with FullCalendar.\n    Must be instantiated and destroyed by caller.\n    */\n    var ThirdPartyDraggable = /** @class */ (function () {\n        function ThirdPartyDraggable(containerOrSettings, settings) {\n            var containerEl = document;\n            if (\n            // wish we could just test instanceof EventTarget, but doesn't work in IE11\n            containerOrSettings === document ||\n                containerOrSettings instanceof Element) {\n                containerEl = containerOrSettings;\n                settings = settings || {};\n            }\n            else {\n                settings = (containerOrSettings || {});\n            }\n            var dragging = this.dragging = new InferredElementDragging(containerEl);\n            if (typeof settings.itemSelector === 'string') {\n                dragging.pointer.selector = settings.itemSelector;\n            }\n            else if (containerEl === document) {\n                dragging.pointer.selector = '[data-event]';\n            }\n            if (typeof settings.mirrorSelector === 'string') {\n                dragging.mirrorSelector = settings.mirrorSelector;\n            }\n            new ExternalElementDragging(dragging, settings.eventData);\n        }\n        ThirdPartyDraggable.prototype.destroy = function () {\n            this.dragging.destroy();\n        };\n        return ThirdPartyDraggable;\n    }());\n\n    var main = core.createPlugin({\n        componentInteractions: [DateClicking, DateSelecting, EventDragging, EventDragging$1],\n        calendarInteractions: [UnselectAuto],\n        elementDraggingImpl: FeaturefulElementDragging\n    });\n\n    exports.Draggable = ExternalDraggable;\n    exports.FeaturefulElementDragging = FeaturefulElementDragging;\n    exports.PointerDragging = PointerDragging;\n    exports.ThirdPartyDraggable = ThirdPartyDraggable;\n    exports.default = main;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]}